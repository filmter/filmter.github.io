{"version":3,"file":"Erg.stories-d0335cf7.js","sources":["../../node_modules/element-plus/es/utils/dom/position.mjs","../../node_modules/lodash-es/_baseCreate.js","../../node_modules/lodash-es/_copyArray.js","../../node_modules/lodash-es/_defineProperty.js","../../node_modules/lodash-es/_arrayEach.js","../../node_modules/lodash-es/_baseAssignValue.js","../../node_modules/lodash-es/_assignValue.js","../../node_modules/lodash-es/_copyObject.js","../../node_modules/lodash-es/_nativeKeysIn.js","../../node_modules/lodash-es/_baseKeysIn.js","../../node_modules/lodash-es/keysIn.js","../../node_modules/lodash-es/_getPrototype.js","../../node_modules/lodash-es/_baseAssign.js","../../node_modules/lodash-es/_baseAssignIn.js","../../node_modules/lodash-es/_cloneBuffer.js","../../node_modules/lodash-es/_copySymbols.js","../../node_modules/lodash-es/_getSymbolsIn.js","../../node_modules/lodash-es/_copySymbolsIn.js","../../node_modules/lodash-es/_getAllKeysIn.js","../../node_modules/lodash-es/_initCloneArray.js","../../node_modules/lodash-es/_cloneArrayBuffer.js","../../node_modules/lodash-es/_cloneDataView.js","../../node_modules/lodash-es/_cloneRegExp.js","../../node_modules/lodash-es/_cloneSymbol.js","../../node_modules/lodash-es/_cloneTypedArray.js","../../node_modules/lodash-es/_initCloneByTag.js","../../node_modules/lodash-es/_initCloneObject.js","../../node_modules/lodash-es/_baseIsMap.js","../../node_modules/lodash-es/isMap.js","../../node_modules/lodash-es/_baseIsSet.js","../../node_modules/lodash-es/isSet.js","../../node_modules/lodash-es/_baseClone.js","../../node_modules/lodash-es/cloneDeep.js","../../node_modules/element-plus/es/hooks/use-attrs/index.mjs","../../node_modules/element-plus/es/hooks/use-cursor/index.mjs","../../node_modules/element-plus/es/components/input/src/utils.mjs","../../node_modules/element-plus/es/components/input/src/input.mjs","../../node_modules/element-plus/es/components/input/src/input2.mjs","../../node_modules/element-plus/es/components/input/index.mjs","../../node_modules/element-plus/es/components/color-picker/src/props/alpha-slider.mjs","../../node_modules/element-plus/es/components/color-picker/src/utils/draggable.mjs","../../node_modules/element-plus/es/components/color-picker/src/composables/use-alpha-slider.mjs","../../node_modules/element-plus/es/components/color-picker/src/components/alpha-slider.mjs","../../node_modules/element-plus/es/components/color-picker/src/components/hue-slider.mjs","../../node_modules/element-plus/es/components/color-picker/src/color-picker.mjs","../../node_modules/element-plus/es/components/color-picker/src/utils/color.mjs","../../node_modules/element-plus/es/components/color-picker/src/components/predefine.mjs","../../node_modules/element-plus/es/components/color-picker/src/components/sv-panel.mjs","../../node_modules/element-plus/es/components/color-picker/src/color-picker2.mjs","../../node_modules/element-plus/es/components/color-picker/index.mjs","../../node_modules/element-plus/es/components/divider/src/divider.mjs","../../node_modules/element-plus/es/components/divider/src/divider2.mjs","../../node_modules/element-plus/es/components/divider/index.mjs","../../src/core/materials/icon/lock.ts","../../src/core/utils/color.ts","../../src/core/materials/node/node-erwin.ts","../../src/core/materials/node/node-rect.ts","../../src/core/utils/fx.ts","../../src/core/materials/line/line-erwin.ts","../../src/core/shared/history.ts","../../src/core/utils/math.ts","../../src/core/materials/text/text-base.ts","../../src/core/materials/frame/frame-resize.ts","../../src/core/materials/frame/frame-hover.ts","../../src/erg/shared/enum.ts","../../src/erg/hooks/event.ts","../../src/erg/index.ts","../../stories/erg/mock.ts","../../stories/erg/right-menu.ts","../../stories/erg/assets/icon/symbol-defs.svg","../../stories/erg/Erg.vue"],"sourcesContent":["import '../browser.mjs';\nimport { isClient } from '@vueuse/core';\n\nconst isInContainer = (el, container) => {\n  if (!isClient || !el || !container)\n    return false;\n  const elRect = el.getBoundingClientRect();\n  let containerRect;\n  if (container instanceof Element) {\n    containerRect = container.getBoundingClientRect();\n  } else {\n    containerRect = {\n      top: 0,\n      right: window.innerWidth,\n      bottom: window.innerHeight,\n      left: 0\n    };\n  }\n  return elRect.top < containerRect.bottom && elRect.bottom > containerRect.top && elRect.right > containerRect.left && elRect.left < containerRect.right;\n};\nconst getOffsetTop = (el) => {\n  let offset = 0;\n  let parent = el;\n  while (parent) {\n    offset += parent.offsetTop;\n    parent = parent.offsetParent;\n  }\n  return offset;\n};\nconst getOffsetTopDistance = (el, containerEl) => {\n  return Math.abs(getOffsetTop(el) - getOffsetTop(containerEl));\n};\nconst getClientXY = (event) => {\n  let clientX;\n  let clientY;\n  if (event.type === \"touchend\") {\n    clientY = event.changedTouches[0].clientY;\n    clientX = event.changedTouches[0].clientX;\n  } else if (event.type.startsWith(\"touch\")) {\n    clientY = event.touches[0].clientY;\n    clientX = event.touches[0].clientX;\n  } else {\n    clientY = event.clientY;\n    clientX = event.clientX;\n  }\n  return {\n    clientX,\n    clientY\n  };\n};\n\nexport { getClientXY, getOffsetTop, getOffsetTopDistance, isInContainer };\n//# sourceMappingURL=position.mjs.map\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import { computed, getCurrentInstance } from 'vue';\nimport { fromPairs } from 'lodash-unified';\nimport '../../utils/index.mjs';\nimport { debugWarn } from '../../utils/error.mjs';\n\nconst DEFAULT_EXCLUDE_KEYS = [\"class\", \"style\"];\nconst LISTENER_PREFIX = /^on[A-Z]/;\nconst useAttrs = (params = {}) => {\n  const { excludeListeners = false, excludeKeys } = params;\n  const allExcludeKeys = computed(() => {\n    return ((excludeKeys == null ? void 0 : excludeKeys.value) || []).concat(DEFAULT_EXCLUDE_KEYS);\n  });\n  const instance = getCurrentInstance();\n  if (!instance) {\n    debugWarn(\"use-attrs\", \"getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function\");\n    return computed(() => ({}));\n  }\n  return computed(() => {\n    var _a;\n    return fromPairs(Object.entries((_a = instance.proxy) == null ? void 0 : _a.$attrs).filter(([key]) => !allExcludeKeys.value.includes(key) && !(excludeListeners && LISTENER_PREFIX.test(key))));\n  });\n};\n\nexport { useAttrs };\n//# sourceMappingURL=index.mjs.map\n","import { ref } from 'vue';\n\nfunction useCursor(input) {\n  const selectionRef = ref();\n  function recordCursor() {\n    if (input.value == void 0)\n      return;\n    const { selectionStart, selectionEnd, value } = input.value;\n    if (selectionStart == null || selectionEnd == null)\n      return;\n    const beforeTxt = value.slice(0, Math.max(0, selectionStart));\n    const afterTxt = value.slice(Math.max(0, selectionEnd));\n    selectionRef.value = {\n      selectionStart,\n      selectionEnd,\n      value,\n      beforeTxt,\n      afterTxt\n    };\n  }\n  function setCursor() {\n    if (input.value == void 0 || selectionRef.value == void 0)\n      return;\n    const { value } = input.value;\n    const { beforeTxt, afterTxt, selectionStart } = selectionRef.value;\n    if (beforeTxt == void 0 || afterTxt == void 0 || selectionStart == void 0)\n      return;\n    let startPos = value.length;\n    if (value.endsWith(afterTxt)) {\n      startPos = value.length - afterTxt.length;\n    } else if (value.startsWith(beforeTxt)) {\n      startPos = beforeTxt.length;\n    } else {\n      const beforeLastChar = beforeTxt[selectionStart - 1];\n      const newIndex = value.indexOf(beforeLastChar, selectionStart - 1);\n      if (newIndex !== -1) {\n        startPos = newIndex + 1;\n      }\n    }\n    input.value.setSelectionRange(startPos, startPos);\n  }\n  return [recordCursor, setCursor];\n}\n\nexport { useCursor };\n//# sourceMappingURL=index.mjs.map\n","import '../../../utils/index.mjs';\nimport { isFirefox } from '../../../utils/browser.mjs';\nimport { isNumber } from '../../../utils/types.mjs';\n\nlet hiddenTextarea = void 0;\nconst HIDDEN_STYLE = `\n  height:0 !important;\n  visibility:hidden !important;\n  ${isFirefox() ? \"\" : \"overflow:hidden !important;\"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`;\nconst CONTEXT_STYLE = [\n  \"letter-spacing\",\n  \"line-height\",\n  \"padding-top\",\n  \"padding-bottom\",\n  \"font-family\",\n  \"font-weight\",\n  \"font-size\",\n  \"text-rendering\",\n  \"text-transform\",\n  \"width\",\n  \"text-indent\",\n  \"padding-left\",\n  \"padding-right\",\n  \"border-width\",\n  \"box-sizing\"\n];\nfunction calculateNodeStyling(targetElement) {\n  const style = window.getComputedStyle(targetElement);\n  const boxSizing = style.getPropertyValue(\"box-sizing\");\n  const paddingSize = Number.parseFloat(style.getPropertyValue(\"padding-bottom\")) + Number.parseFloat(style.getPropertyValue(\"padding-top\"));\n  const borderSize = Number.parseFloat(style.getPropertyValue(\"border-bottom-width\")) + Number.parseFloat(style.getPropertyValue(\"border-top-width\"));\n  const contextStyle = CONTEXT_STYLE.map((name) => `${name}:${style.getPropertyValue(name)}`).join(\";\");\n  return { contextStyle, paddingSize, borderSize, boxSizing };\n}\nfunction calcTextareaHeight(targetElement, minRows = 1, maxRows) {\n  var _a;\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement(\"textarea\");\n    document.body.appendChild(hiddenTextarea);\n  }\n  const { paddingSize, borderSize, boxSizing, contextStyle } = calculateNodeStyling(targetElement);\n  hiddenTextarea.setAttribute(\"style\", `${contextStyle};${HIDDEN_STYLE}`);\n  hiddenTextarea.value = targetElement.value || targetElement.placeholder || \"\";\n  let height = hiddenTextarea.scrollHeight;\n  const result = {};\n  if (boxSizing === \"border-box\") {\n    height = height + borderSize;\n  } else if (boxSizing === \"content-box\") {\n    height = height - paddingSize;\n  }\n  hiddenTextarea.value = \"\";\n  const singleRowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  if (isNumber(minRows)) {\n    let minHeight = singleRowHeight * minRows;\n    if (boxSizing === \"border-box\") {\n      minHeight = minHeight + paddingSize + borderSize;\n    }\n    height = Math.max(minHeight, height);\n    result.minHeight = `${minHeight}px`;\n  }\n  if (isNumber(maxRows)) {\n    let maxHeight = singleRowHeight * maxRows;\n    if (boxSizing === \"border-box\") {\n      maxHeight = maxHeight + paddingSize + borderSize;\n    }\n    height = Math.min(maxHeight, height);\n  }\n  result.height = `${height}px`;\n  (_a = hiddenTextarea.parentNode) == null ? void 0 : _a.removeChild(hiddenTextarea);\n  hiddenTextarea = void 0;\n  return result;\n}\n\nexport { calcTextareaHeight };\n//# sourceMappingURL=utils.mjs.map\n","import { isString } from '@vue/shared';\nimport '../../../utils/index.mjs';\nimport '../../../constants/index.mjs';\nimport '../../../hooks/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useSizeProp } from '../../../hooks/use-size/index.mjs';\nimport { iconPropType } from '../../../utils/vue/icon.mjs';\nimport { mutable } from '../../../utils/typescript.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\n\nconst inputProps = buildProps({\n  id: {\n    type: String,\n    default: void 0\n  },\n  size: useSizeProp,\n  disabled: Boolean,\n  modelValue: {\n    type: definePropType([\n      String,\n      Number,\n      Object\n    ]),\n    default: \"\"\n  },\n  type: {\n    type: String,\n    default: \"text\"\n  },\n  resize: {\n    type: String,\n    values: [\"none\", \"both\", \"horizontal\", \"vertical\"]\n  },\n  autosize: {\n    type: definePropType([Boolean, Object]),\n    default: false\n  },\n  autocomplete: {\n    type: String,\n    default: \"off\"\n  },\n  formatter: {\n    type: Function\n  },\n  parser: {\n    type: Function\n  },\n  placeholder: {\n    type: String\n  },\n  form: {\n    type: String\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  },\n  clearable: {\n    type: Boolean,\n    default: false\n  },\n  showPassword: {\n    type: Boolean,\n    default: false\n  },\n  showWordLimit: {\n    type: Boolean,\n    default: false\n  },\n  suffixIcon: {\n    type: iconPropType\n  },\n  prefixIcon: {\n    type: iconPropType\n  },\n  containerRole: {\n    type: String,\n    default: void 0\n  },\n  label: {\n    type: String,\n    default: void 0\n  },\n  tabindex: {\n    type: [String, Number],\n    default: 0\n  },\n  validateEvent: {\n    type: Boolean,\n    default: true\n  },\n  inputStyle: {\n    type: definePropType([Object, Array, String]),\n    default: () => mutable({})\n  }\n});\nconst inputEmits = {\n  [UPDATE_MODEL_EVENT]: (value) => isString(value),\n  input: (value) => isString(value),\n  change: (value) => isString(value),\n  focus: (evt) => evt instanceof FocusEvent,\n  blur: (evt) => evt instanceof FocusEvent,\n  clear: () => true,\n  mouseleave: (evt) => evt instanceof MouseEvent,\n  mouseenter: (evt) => evt instanceof MouseEvent,\n  keydown: (evt) => evt instanceof Event,\n  compositionstart: (evt) => evt instanceof CompositionEvent,\n  compositionupdate: (evt) => evt instanceof CompositionEvent,\n  compositionend: (evt) => evt instanceof CompositionEvent\n};\n\nexport { inputEmits, inputProps };\n//# sourceMappingURL=input.mjs.map\n","import { defineComponent, useAttrs, useSlots, computed, shallowRef, ref, nextTick, watch, onMounted, toRef, withDirectives, openBlock, createElementBlock, mergeProps, unref, createCommentVNode, Fragment, normalizeClass, renderSlot, createElementVNode, createBlock, withCtx, resolveDynamicComponent, withModifiers, createVNode, toDisplayString, normalizeStyle, vShow } from 'vue';\nimport { useResizeObserver, isClient } from '@vueuse/core';\nimport { isNil } from 'lodash-unified';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { View, Hide, CircleClose } from '@element-plus/icons-vue';\nimport '../../form/index.mjs';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../constants/index.mjs';\nimport { calcTextareaHeight } from './utils.mjs';\nimport { inputProps, inputEmits } from './input.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useAttrs as useAttrs$1 } from '../../../hooks/use-attrs/index.mjs';\nimport { useFormItem, useFormItemInputId } from '../../form/src/hooks/use-form-item.mjs';\nimport { useFormSize, useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { ValidateComponentsMap } from '../../../utils/vue/icon.mjs';\nimport { useCursor } from '../../../hooks/use-cursor/index.mjs';\nimport { isObject, NOOP } from '@vue/shared';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nimport { isKorean } from '../../../utils/i18n.mjs';\nimport { debugWarn } from '../../../utils/error.mjs';\n\nconst _hoisted_1 = [\"role\"];\nconst _hoisted_2 = [\"id\", \"type\", \"disabled\", \"formatter\", \"parser\", \"readonly\", \"autocomplete\", \"tabindex\", \"aria-label\", \"placeholder\", \"form\"];\nconst _hoisted_3 = [\"id\", \"tabindex\", \"disabled\", \"readonly\", \"autocomplete\", \"aria-label\", \"placeholder\", \"form\"];\nconst __default__ = defineComponent({\n  name: \"ElInput\",\n  inheritAttrs: false\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: inputProps,\n  emits: inputEmits,\n  setup(__props, { expose, emit }) {\n    const props = __props;\n    const rawAttrs = useAttrs();\n    const slots = useSlots();\n    const containerAttrs = computed(() => {\n      const comboBoxAttrs = {};\n      if (props.containerRole === \"combobox\") {\n        comboBoxAttrs[\"aria-haspopup\"] = rawAttrs[\"aria-haspopup\"];\n        comboBoxAttrs[\"aria-owns\"] = rawAttrs[\"aria-owns\"];\n        comboBoxAttrs[\"aria-expanded\"] = rawAttrs[\"aria-expanded\"];\n      }\n      return comboBoxAttrs;\n    });\n    const containerKls = computed(() => [\n      props.type === \"textarea\" ? nsTextarea.b() : nsInput.b(),\n      nsInput.m(inputSize.value),\n      nsInput.is(\"disabled\", inputDisabled.value),\n      nsInput.is(\"exceed\", inputExceed.value),\n      {\n        [nsInput.b(\"group\")]: slots.prepend || slots.append,\n        [nsInput.bm(\"group\", \"append\")]: slots.append,\n        [nsInput.bm(\"group\", \"prepend\")]: slots.prepend,\n        [nsInput.m(\"prefix\")]: slots.prefix || props.prefixIcon,\n        [nsInput.m(\"suffix\")]: slots.suffix || props.suffixIcon || props.clearable || props.showPassword,\n        [nsInput.bm(\"suffix\", \"password-clear\")]: showClear.value && showPwdVisible.value\n      },\n      rawAttrs.class\n    ]);\n    const wrapperKls = computed(() => [\n      nsInput.e(\"wrapper\"),\n      nsInput.is(\"focus\", focused.value)\n    ]);\n    const attrs = useAttrs$1({\n      excludeKeys: computed(() => {\n        return Object.keys(containerAttrs.value);\n      })\n    });\n    const { form, formItem } = useFormItem();\n    const { inputId } = useFormItemInputId(props, {\n      formItemContext: formItem\n    });\n    const inputSize = useFormSize();\n    const inputDisabled = useFormDisabled();\n    const nsInput = useNamespace(\"input\");\n    const nsTextarea = useNamespace(\"textarea\");\n    const input = shallowRef();\n    const textarea = shallowRef();\n    const focused = ref(false);\n    const hovering = ref(false);\n    const isComposing = ref(false);\n    const passwordVisible = ref(false);\n    const countStyle = ref();\n    const textareaCalcStyle = shallowRef(props.inputStyle);\n    const _ref = computed(() => input.value || textarea.value);\n    const needStatusIcon = computed(() => {\n      var _a;\n      return (_a = form == null ? void 0 : form.statusIcon) != null ? _a : false;\n    });\n    const validateState = computed(() => (formItem == null ? void 0 : formItem.validateState) || \"\");\n    const validateIcon = computed(() => validateState.value && ValidateComponentsMap[validateState.value]);\n    const passwordIcon = computed(() => passwordVisible.value ? View : Hide);\n    const containerStyle = computed(() => [\n      rawAttrs.style,\n      props.inputStyle\n    ]);\n    const textareaStyle = computed(() => [\n      props.inputStyle,\n      textareaCalcStyle.value,\n      { resize: props.resize }\n    ]);\n    const nativeInputValue = computed(() => isNil(props.modelValue) ? \"\" : String(props.modelValue));\n    const showClear = computed(() => props.clearable && !inputDisabled.value && !props.readonly && !!nativeInputValue.value && (focused.value || hovering.value));\n    const showPwdVisible = computed(() => props.showPassword && !inputDisabled.value && !props.readonly && !!nativeInputValue.value && (!!nativeInputValue.value || focused.value));\n    const isWordLimitVisible = computed(() => props.showWordLimit && !!attrs.value.maxlength && (props.type === \"text\" || props.type === \"textarea\") && !inputDisabled.value && !props.readonly && !props.showPassword);\n    const textLength = computed(() => nativeInputValue.value.length);\n    const inputExceed = computed(() => !!isWordLimitVisible.value && textLength.value > Number(attrs.value.maxlength));\n    const suffixVisible = computed(() => !!slots.suffix || !!props.suffixIcon || showClear.value || props.showPassword || isWordLimitVisible.value || !!validateState.value && needStatusIcon.value);\n    const [recordCursor, setCursor] = useCursor(input);\n    useResizeObserver(textarea, (entries) => {\n      onceInitSizeTextarea();\n      if (!isWordLimitVisible.value || props.resize !== \"both\")\n        return;\n      const entry = entries[0];\n      const { width } = entry.contentRect;\n      countStyle.value = {\n        right: `calc(100% - ${width + 15 + 6}px)`\n      };\n    });\n    const resizeTextarea = () => {\n      const { type, autosize } = props;\n      if (!isClient || type !== \"textarea\" || !textarea.value)\n        return;\n      if (autosize) {\n        const minRows = isObject(autosize) ? autosize.minRows : void 0;\n        const maxRows = isObject(autosize) ? autosize.maxRows : void 0;\n        const textareaStyle2 = calcTextareaHeight(textarea.value, minRows, maxRows);\n        textareaCalcStyle.value = {\n          overflowY: \"hidden\",\n          ...textareaStyle2\n        };\n        nextTick(() => {\n          textarea.value.offsetHeight;\n          textareaCalcStyle.value = textareaStyle2;\n        });\n      } else {\n        textareaCalcStyle.value = {\n          minHeight: calcTextareaHeight(textarea.value).minHeight\n        };\n      }\n    };\n    const createOnceInitResize = (resizeTextarea2) => {\n      let isInit = false;\n      return () => {\n        var _a;\n        if (isInit || !props.autosize)\n          return;\n        const isElHidden = ((_a = textarea.value) == null ? void 0 : _a.offsetParent) === null;\n        if (!isElHidden) {\n          resizeTextarea2();\n          isInit = true;\n        }\n      };\n    };\n    const onceInitSizeTextarea = createOnceInitResize(resizeTextarea);\n    const setNativeInputValue = () => {\n      const input2 = _ref.value;\n      if (!input2 || input2.value === nativeInputValue.value)\n        return;\n      input2.value = nativeInputValue.value;\n    };\n    const handleInput = async (event) => {\n      recordCursor();\n      let { value } = event.target;\n      if (props.formatter) {\n        value = props.parser ? props.parser(value) : value;\n        value = props.formatter(value);\n      }\n      if (isComposing.value)\n        return;\n      if (value === nativeInputValue.value) {\n        setNativeInputValue();\n        return;\n      }\n      emit(UPDATE_MODEL_EVENT, value);\n      emit(\"input\", value);\n      await nextTick();\n      setNativeInputValue();\n      setCursor();\n    };\n    const handleChange = (event) => {\n      emit(\"change\", event.target.value);\n    };\n    const handleCompositionStart = (event) => {\n      emit(\"compositionstart\", event);\n      isComposing.value = true;\n    };\n    const handleCompositionUpdate = (event) => {\n      var _a;\n      emit(\"compositionupdate\", event);\n      const text = (_a = event.target) == null ? void 0 : _a.value;\n      const lastCharacter = text[text.length - 1] || \"\";\n      isComposing.value = !isKorean(lastCharacter);\n    };\n    const handleCompositionEnd = (event) => {\n      emit(\"compositionend\", event);\n      if (isComposing.value) {\n        isComposing.value = false;\n        handleInput(event);\n      }\n    };\n    const handlePasswordVisible = () => {\n      passwordVisible.value = !passwordVisible.value;\n      focus();\n    };\n    const focus = async () => {\n      var _a;\n      await nextTick();\n      (_a = _ref.value) == null ? void 0 : _a.focus();\n    };\n    const blur = () => {\n      var _a;\n      return (_a = _ref.value) == null ? void 0 : _a.blur();\n    };\n    const handleFocus = (event) => {\n      focused.value = true;\n      emit(\"focus\", event);\n    };\n    const handleBlur = (event) => {\n      var _a;\n      focused.value = false;\n      emit(\"blur\", event);\n      if (props.validateEvent) {\n        (_a = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a.call(formItem, \"blur\").catch((err) => debugWarn(err));\n      }\n    };\n    const handleMouseLeave = (evt) => {\n      hovering.value = false;\n      emit(\"mouseleave\", evt);\n    };\n    const handleMouseEnter = (evt) => {\n      hovering.value = true;\n      emit(\"mouseenter\", evt);\n    };\n    const handleKeydown = (evt) => {\n      emit(\"keydown\", evt);\n    };\n    const select = () => {\n      var _a;\n      (_a = _ref.value) == null ? void 0 : _a.select();\n    };\n    const clear = () => {\n      emit(UPDATE_MODEL_EVENT, \"\");\n      emit(\"change\", \"\");\n      emit(\"clear\");\n      emit(\"input\", \"\");\n    };\n    watch(() => props.modelValue, () => {\n      var _a;\n      nextTick(() => resizeTextarea());\n      if (props.validateEvent) {\n        (_a = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a.call(formItem, \"change\").catch((err) => debugWarn(err));\n      }\n    });\n    watch(nativeInputValue, () => setNativeInputValue());\n    watch(() => props.type, async () => {\n      await nextTick();\n      setNativeInputValue();\n      resizeTextarea();\n    });\n    onMounted(() => {\n      if (!props.formatter && props.parser) {\n        debugWarn(\"ElInput\", \"If you set the parser, you also need to set the formatter.\");\n      }\n      setNativeInputValue();\n      nextTick(resizeTextarea);\n    });\n    expose({\n      input,\n      textarea,\n      ref: _ref,\n      textareaStyle,\n      autosize: toRef(props, \"autosize\"),\n      focus,\n      blur,\n      select,\n      clear,\n      resizeTextarea\n    });\n    return (_ctx, _cache) => {\n      return withDirectives((openBlock(), createElementBlock(\"div\", mergeProps(unref(containerAttrs), {\n        class: unref(containerKls),\n        style: unref(containerStyle),\n        role: _ctx.containerRole,\n        onMouseenter: handleMouseEnter,\n        onMouseleave: handleMouseLeave\n      }), [\n        createCommentVNode(\" input \"),\n        _ctx.type !== \"textarea\" ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [\n          createCommentVNode(\" prepend slot \"),\n          _ctx.$slots.prepend ? (openBlock(), createElementBlock(\"div\", {\n            key: 0,\n            class: normalizeClass(unref(nsInput).be(\"group\", \"prepend\"))\n          }, [\n            renderSlot(_ctx.$slots, \"prepend\")\n          ], 2)) : createCommentVNode(\"v-if\", true),\n          createElementVNode(\"div\", {\n            class: normalizeClass(unref(wrapperKls))\n          }, [\n            createCommentVNode(\" prefix slot \"),\n            _ctx.$slots.prefix || _ctx.prefixIcon ? (openBlock(), createElementBlock(\"span\", {\n              key: 0,\n              class: normalizeClass(unref(nsInput).e(\"prefix\"))\n            }, [\n              createElementVNode(\"span\", {\n                class: normalizeClass(unref(nsInput).e(\"prefix-inner\")),\n                onClick: focus\n              }, [\n                renderSlot(_ctx.$slots, \"prefix\"),\n                _ctx.prefixIcon ? (openBlock(), createBlock(unref(ElIcon), {\n                  key: 0,\n                  class: normalizeClass(unref(nsInput).e(\"icon\"))\n                }, {\n                  default: withCtx(() => [\n                    (openBlock(), createBlock(resolveDynamicComponent(_ctx.prefixIcon)))\n                  ]),\n                  _: 1\n                }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)\n              ], 2)\n            ], 2)) : createCommentVNode(\"v-if\", true),\n            createElementVNode(\"input\", mergeProps({\n              id: unref(inputId),\n              ref_key: \"input\",\n              ref: input,\n              class: unref(nsInput).e(\"inner\")\n            }, unref(attrs), {\n              type: _ctx.showPassword ? passwordVisible.value ? \"text\" : \"password\" : _ctx.type,\n              disabled: unref(inputDisabled),\n              formatter: _ctx.formatter,\n              parser: _ctx.parser,\n              readonly: _ctx.readonly,\n              autocomplete: _ctx.autocomplete,\n              tabindex: _ctx.tabindex,\n              \"aria-label\": _ctx.label,\n              placeholder: _ctx.placeholder,\n              style: _ctx.inputStyle,\n              form: props.form,\n              onCompositionstart: handleCompositionStart,\n              onCompositionupdate: handleCompositionUpdate,\n              onCompositionend: handleCompositionEnd,\n              onInput: handleInput,\n              onFocus: handleFocus,\n              onBlur: handleBlur,\n              onChange: handleChange,\n              onKeydown: handleKeydown\n            }), null, 16, _hoisted_2),\n            createCommentVNode(\" suffix slot \"),\n            unref(suffixVisible) ? (openBlock(), createElementBlock(\"span\", {\n              key: 1,\n              class: normalizeClass(unref(nsInput).e(\"suffix\"))\n            }, [\n              createElementVNode(\"span\", {\n                class: normalizeClass(unref(nsInput).e(\"suffix-inner\")),\n                onClick: focus\n              }, [\n                !unref(showClear) || !unref(showPwdVisible) || !unref(isWordLimitVisible) ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [\n                  renderSlot(_ctx.$slots, \"suffix\"),\n                  _ctx.suffixIcon ? (openBlock(), createBlock(unref(ElIcon), {\n                    key: 0,\n                    class: normalizeClass(unref(nsInput).e(\"icon\"))\n                  }, {\n                    default: withCtx(() => [\n                      (openBlock(), createBlock(resolveDynamicComponent(_ctx.suffixIcon)))\n                    ]),\n                    _: 1\n                  }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)\n                ], 64)) : createCommentVNode(\"v-if\", true),\n                unref(showClear) ? (openBlock(), createBlock(unref(ElIcon), {\n                  key: 1,\n                  class: normalizeClass([unref(nsInput).e(\"icon\"), unref(nsInput).e(\"clear\")]),\n                  onMousedown: withModifiers(unref(NOOP), [\"prevent\"]),\n                  onClick: clear\n                }, {\n                  default: withCtx(() => [\n                    createVNode(unref(CircleClose))\n                  ]),\n                  _: 1\n                }, 8, [\"class\", \"onMousedown\"])) : createCommentVNode(\"v-if\", true),\n                unref(showPwdVisible) ? (openBlock(), createBlock(unref(ElIcon), {\n                  key: 2,\n                  class: normalizeClass([unref(nsInput).e(\"icon\"), unref(nsInput).e(\"password\")]),\n                  onClick: handlePasswordVisible\n                }, {\n                  default: withCtx(() => [\n                    (openBlock(), createBlock(resolveDynamicComponent(unref(passwordIcon))))\n                  ]),\n                  _: 1\n                }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true),\n                unref(isWordLimitVisible) ? (openBlock(), createElementBlock(\"span\", {\n                  key: 3,\n                  class: normalizeClass(unref(nsInput).e(\"count\"))\n                }, [\n                  createElementVNode(\"span\", {\n                    class: normalizeClass(unref(nsInput).e(\"count-inner\"))\n                  }, toDisplayString(unref(textLength)) + \" / \" + toDisplayString(unref(attrs).maxlength), 3)\n                ], 2)) : createCommentVNode(\"v-if\", true),\n                unref(validateState) && unref(validateIcon) && unref(needStatusIcon) ? (openBlock(), createBlock(unref(ElIcon), {\n                  key: 4,\n                  class: normalizeClass([\n                    unref(nsInput).e(\"icon\"),\n                    unref(nsInput).e(\"validateIcon\"),\n                    unref(nsInput).is(\"loading\", unref(validateState) === \"validating\")\n                  ])\n                }, {\n                  default: withCtx(() => [\n                    (openBlock(), createBlock(resolveDynamicComponent(unref(validateIcon))))\n                  ]),\n                  _: 1\n                }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)\n              ], 2)\n            ], 2)) : createCommentVNode(\"v-if\", true)\n          ], 2),\n          createCommentVNode(\" append slot \"),\n          _ctx.$slots.append ? (openBlock(), createElementBlock(\"div\", {\n            key: 1,\n            class: normalizeClass(unref(nsInput).be(\"group\", \"append\"))\n          }, [\n            renderSlot(_ctx.$slots, \"append\")\n          ], 2)) : createCommentVNode(\"v-if\", true)\n        ], 64)) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [\n          createCommentVNode(\" textarea \"),\n          createElementVNode(\"textarea\", mergeProps({\n            id: unref(inputId),\n            ref_key: \"textarea\",\n            ref: textarea,\n            class: unref(nsTextarea).e(\"inner\")\n          }, unref(attrs), {\n            tabindex: _ctx.tabindex,\n            disabled: unref(inputDisabled),\n            readonly: _ctx.readonly,\n            autocomplete: _ctx.autocomplete,\n            style: unref(textareaStyle),\n            \"aria-label\": _ctx.label,\n            placeholder: _ctx.placeholder,\n            form: props.form,\n            onCompositionstart: handleCompositionStart,\n            onCompositionupdate: handleCompositionUpdate,\n            onCompositionend: handleCompositionEnd,\n            onInput: handleInput,\n            onFocus: handleFocus,\n            onBlur: handleBlur,\n            onChange: handleChange,\n            onKeydown: handleKeydown\n          }), null, 16, _hoisted_3),\n          unref(isWordLimitVisible) ? (openBlock(), createElementBlock(\"span\", {\n            key: 0,\n            style: normalizeStyle(countStyle.value),\n            class: normalizeClass(unref(nsInput).e(\"count\"))\n          }, toDisplayString(unref(textLength)) + \" / \" + toDisplayString(unref(attrs).maxlength), 7)) : createCommentVNode(\"v-if\", true)\n        ], 64))\n      ], 16, _hoisted_1)), [\n        [vShow, _ctx.type !== \"hidden\"]\n      ]);\n    };\n  }\n});\nvar Input = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue\"]]);\n\nexport { Input as default };\n//# sourceMappingURL=input2.mjs.map\n","import '../../utils/index.mjs';\nimport Input from './src/input2.mjs';\nexport { inputEmits, inputProps } from './src/input.mjs';\nimport { withInstall } from '../../utils/vue/install.mjs';\n\nconst ElInput = withInstall(Input);\n\nexport { ElInput, ElInput as default };\n//# sourceMappingURL=index.mjs.map\n","import '../../../../utils/index.mjs';\nimport { buildProps, definePropType } from '../../../../utils/vue/props/runtime.mjs';\n\nconst alphaSliderProps = buildProps({\n  color: {\n    type: definePropType(Object),\n    required: true\n  },\n  vertical: {\n    type: Boolean,\n    default: false\n  }\n});\n\nexport { alphaSliderProps };\n//# sourceMappingURL=alpha-slider.mjs.map\n","import '../../../../utils/index.mjs';\nimport { isClient } from '@vueuse/core';\n\nlet isDragging = false;\nfunction draggable(element, options) {\n  if (!isClient)\n    return;\n  const moveFn = function(event) {\n    var _a;\n    (_a = options.drag) == null ? void 0 : _a.call(options, event);\n  };\n  const upFn = function(event) {\n    var _a;\n    document.removeEventListener(\"mousemove\", moveFn);\n    document.removeEventListener(\"mouseup\", upFn);\n    document.removeEventListener(\"touchmove\", moveFn);\n    document.removeEventListener(\"touchend\", upFn);\n    document.onselectstart = null;\n    document.ondragstart = null;\n    isDragging = false;\n    (_a = options.end) == null ? void 0 : _a.call(options, event);\n  };\n  const downFn = function(event) {\n    var _a;\n    if (isDragging)\n      return;\n    event.preventDefault();\n    document.onselectstart = () => false;\n    document.ondragstart = () => false;\n    document.addEventListener(\"mousemove\", moveFn);\n    document.addEventListener(\"mouseup\", upFn);\n    document.addEventListener(\"touchmove\", moveFn);\n    document.addEventListener(\"touchend\", upFn);\n    isDragging = true;\n    (_a = options.start) == null ? void 0 : _a.call(options, event);\n  };\n  element.addEventListener(\"mousedown\", downFn);\n  element.addEventListener(\"touchstart\", downFn);\n}\n\nexport { draggable };\n//# sourceMappingURL=draggable.mjs.map\n","import { getCurrentInstance, shallowRef, ref, onMounted, watch, computed } from 'vue';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport { draggable } from '../utils/draggable.mjs';\nimport { getClientXY } from '../../../../utils/dom/position.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { addUnit } from '../../../../utils/dom/style.mjs';\n\nconst useAlphaSlider = (props) => {\n  const instance = getCurrentInstance();\n  const thumb = shallowRef();\n  const bar = shallowRef();\n  function handleClick(event) {\n    const target = event.target;\n    if (target !== thumb.value) {\n      handleDrag(event);\n    }\n  }\n  function handleDrag(event) {\n    if (!bar.value || !thumb.value)\n      return;\n    const el = instance.vnode.el;\n    const rect = el.getBoundingClientRect();\n    const { clientX, clientY } = getClientXY(event);\n    if (!props.vertical) {\n      let left = clientX - rect.left;\n      left = Math.max(thumb.value.offsetWidth / 2, left);\n      left = Math.min(left, rect.width - thumb.value.offsetWidth / 2);\n      props.color.set(\"alpha\", Math.round((left - thumb.value.offsetWidth / 2) / (rect.width - thumb.value.offsetWidth) * 100));\n    } else {\n      let top = clientY - rect.top;\n      top = Math.max(thumb.value.offsetHeight / 2, top);\n      top = Math.min(top, rect.height - thumb.value.offsetHeight / 2);\n      props.color.set(\"alpha\", Math.round((top - thumb.value.offsetHeight / 2) / (rect.height - thumb.value.offsetHeight) * 100));\n    }\n  }\n  return {\n    thumb,\n    bar,\n    handleDrag,\n    handleClick\n  };\n};\nconst useAlphaSliderDOM = (props, {\n  bar,\n  thumb,\n  handleDrag\n}) => {\n  const instance = getCurrentInstance();\n  const ns = useNamespace(\"color-alpha-slider\");\n  const thumbLeft = ref(0);\n  const thumbTop = ref(0);\n  const background = ref();\n  function getThumbLeft() {\n    if (!thumb.value)\n      return 0;\n    if (props.vertical)\n      return 0;\n    const el = instance.vnode.el;\n    const alpha = props.color.get(\"alpha\");\n    if (!el)\n      return 0;\n    return Math.round(alpha * (el.offsetWidth - thumb.value.offsetWidth / 2) / 100);\n  }\n  function getThumbTop() {\n    if (!thumb.value)\n      return 0;\n    const el = instance.vnode.el;\n    if (!props.vertical)\n      return 0;\n    const alpha = props.color.get(\"alpha\");\n    if (!el)\n      return 0;\n    return Math.round(alpha * (el.offsetHeight - thumb.value.offsetHeight / 2) / 100);\n  }\n  function getBackground() {\n    if (props.color && props.color.value) {\n      const { r, g, b } = props.color.toRgb();\n      return `linear-gradient(to right, rgba(${r}, ${g}, ${b}, 0) 0%, rgba(${r}, ${g}, ${b}, 1) 100%)`;\n    }\n    return \"\";\n  }\n  function update() {\n    thumbLeft.value = getThumbLeft();\n    thumbTop.value = getThumbTop();\n    background.value = getBackground();\n  }\n  onMounted(() => {\n    if (!bar.value || !thumb.value)\n      return;\n    const dragConfig = {\n      drag: (event) => {\n        handleDrag(event);\n      },\n      end: (event) => {\n        handleDrag(event);\n      }\n    };\n    draggable(bar.value, dragConfig);\n    draggable(thumb.value, dragConfig);\n    update();\n  });\n  watch(() => props.color.get(\"alpha\"), () => update());\n  watch(() => props.color.value, () => update());\n  const rootKls = computed(() => [ns.b(), ns.is(\"vertical\", props.vertical)]);\n  const barKls = computed(() => ns.e(\"bar\"));\n  const thumbKls = computed(() => ns.e(\"thumb\"));\n  const barStyle = computed(() => ({ background: background.value }));\n  const thumbStyle = computed(() => ({\n    left: addUnit(thumbLeft.value),\n    top: addUnit(thumbTop.value)\n  }));\n  return { rootKls, barKls, barStyle, thumbKls, thumbStyle, update };\n};\n\nexport { useAlphaSlider, useAlphaSliderDOM };\n//# sourceMappingURL=use-alpha-slider.mjs.map\n","import { defineComponent, openBlock, createElementBlock, normalizeClass, unref, createElementVNode, normalizeStyle } from 'vue';\nimport { alphaSliderProps } from '../props/alpha-slider.mjs';\nimport { useAlphaSlider, useAlphaSliderDOM } from '../composables/use-alpha-slider.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\n\nconst COMPONENT_NAME = \"ElColorAlphaSlider\";\nconst __default__ = defineComponent({\n  name: COMPONENT_NAME\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: alphaSliderProps,\n  setup(__props, { expose }) {\n    const props = __props;\n    const { bar, thumb, handleDrag, handleClick } = useAlphaSlider(props);\n    const { rootKls, barKls, barStyle, thumbKls, thumbStyle, update } = useAlphaSliderDOM(props, {\n      bar,\n      thumb,\n      handleDrag\n    });\n    expose({\n      update,\n      bar,\n      thumb\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass(unref(rootKls))\n      }, [\n        createElementVNode(\"div\", {\n          ref_key: \"bar\",\n          ref: bar,\n          class: normalizeClass(unref(barKls)),\n          style: normalizeStyle(unref(barStyle)),\n          onClick: _cache[0] || (_cache[0] = (...args) => unref(handleClick) && unref(handleClick)(...args))\n        }, null, 6),\n        createElementVNode(\"div\", {\n          ref_key: \"thumb\",\n          ref: thumb,\n          class: normalizeClass(unref(thumbKls)),\n          style: normalizeStyle(unref(thumbStyle))\n        }, null, 6)\n      ], 2);\n    };\n  }\n});\nvar AlphaSlider = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue\"]]);\n\nexport { AlphaSlider as default };\n//# sourceMappingURL=alpha-slider.mjs.map\n","import { defineComponent, getCurrentInstance, ref, computed, watch, onMounted, openBlock, createElementBlock, normalizeClass, createElementVNode, normalizeStyle } from 'vue';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport { draggable } from '../utils/draggable.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { getClientXY } from '../../../../utils/dom/position.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElColorHueSlider\",\n  props: {\n    color: {\n      type: Object,\n      required: true\n    },\n    vertical: Boolean\n  },\n  setup(props) {\n    const ns = useNamespace(\"color-hue-slider\");\n    const instance = getCurrentInstance();\n    const thumb = ref();\n    const bar = ref();\n    const thumbLeft = ref(0);\n    const thumbTop = ref(0);\n    const hueValue = computed(() => {\n      return props.color.get(\"hue\");\n    });\n    watch(() => hueValue.value, () => {\n      update();\n    });\n    function handleClick(event) {\n      const target = event.target;\n      if (target !== thumb.value) {\n        handleDrag(event);\n      }\n    }\n    function handleDrag(event) {\n      if (!bar.value || !thumb.value)\n        return;\n      const el = instance.vnode.el;\n      const rect = el.getBoundingClientRect();\n      const { clientX, clientY } = getClientXY(event);\n      let hue;\n      if (!props.vertical) {\n        let left = clientX - rect.left;\n        left = Math.min(left, rect.width - thumb.value.offsetWidth / 2);\n        left = Math.max(thumb.value.offsetWidth / 2, left);\n        hue = Math.round((left - thumb.value.offsetWidth / 2) / (rect.width - thumb.value.offsetWidth) * 360);\n      } else {\n        let top = clientY - rect.top;\n        top = Math.min(top, rect.height - thumb.value.offsetHeight / 2);\n        top = Math.max(thumb.value.offsetHeight / 2, top);\n        hue = Math.round((top - thumb.value.offsetHeight / 2) / (rect.height - thumb.value.offsetHeight) * 360);\n      }\n      props.color.set(\"hue\", hue);\n    }\n    function getThumbLeft() {\n      if (!thumb.value)\n        return 0;\n      const el = instance.vnode.el;\n      if (props.vertical)\n        return 0;\n      const hue = props.color.get(\"hue\");\n      if (!el)\n        return 0;\n      return Math.round(hue * (el.offsetWidth - thumb.value.offsetWidth / 2) / 360);\n    }\n    function getThumbTop() {\n      if (!thumb.value)\n        return 0;\n      const el = instance.vnode.el;\n      if (!props.vertical)\n        return 0;\n      const hue = props.color.get(\"hue\");\n      if (!el)\n        return 0;\n      return Math.round(hue * (el.offsetHeight - thumb.value.offsetHeight / 2) / 360);\n    }\n    function update() {\n      thumbLeft.value = getThumbLeft();\n      thumbTop.value = getThumbTop();\n    }\n    onMounted(() => {\n      if (!bar.value || !thumb.value)\n        return;\n      const dragConfig = {\n        drag: (event) => {\n          handleDrag(event);\n        },\n        end: (event) => {\n          handleDrag(event);\n        }\n      };\n      draggable(bar.value, dragConfig);\n      draggable(thumb.value, dragConfig);\n      update();\n    });\n    return {\n      bar,\n      thumb,\n      thumbLeft,\n      thumbTop,\n      hueValue,\n      handleClick,\n      update,\n      ns\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([_ctx.ns.b(), _ctx.ns.is(\"vertical\", _ctx.vertical)])\n  }, [\n    createElementVNode(\"div\", {\n      ref: \"bar\",\n      class: normalizeClass(_ctx.ns.e(\"bar\")),\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleClick && _ctx.handleClick(...args))\n    }, null, 2),\n    createElementVNode(\"div\", {\n      ref: \"thumb\",\n      class: normalizeClass(_ctx.ns.e(\"thumb\")),\n      style: normalizeStyle({\n        left: _ctx.thumbLeft + \"px\",\n        top: _ctx.thumbTop + \"px\"\n      })\n    }, null, 6)\n  ], 2);\n}\nvar HueSlider = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue\"]]);\n\nexport { HueSlider as default };\n//# sourceMappingURL=hue-slider.mjs.map\n","import { isNil } from 'lodash-unified';\nimport '../../../utils/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../constants/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\nimport { useSizeProp } from '../../../hooks/use-size/index.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { isString } from '@vue/shared';\n\nconst colorPickerProps = buildProps({\n  modelValue: String,\n  id: String,\n  showAlpha: Boolean,\n  colorFormat: String,\n  disabled: Boolean,\n  size: useSizeProp,\n  popperClass: {\n    type: String,\n    default: \"\"\n  },\n  label: {\n    type: String,\n    default: void 0\n  },\n  tabindex: {\n    type: [String, Number],\n    default: 0\n  },\n  predefine: {\n    type: definePropType(Array)\n  },\n  validateEvent: {\n    type: Boolean,\n    default: true\n  }\n});\nconst colorPickerEmits = {\n  [UPDATE_MODEL_EVENT]: (val) => isString(val) || isNil(val),\n  [CHANGE_EVENT]: (val) => isString(val) || isNil(val),\n  activeChange: (val) => isString(val) || isNil(val)\n};\nconst colorPickerContextKey = Symbol(\"colorPickerContextKey\");\n\nexport { colorPickerContextKey, colorPickerEmits, colorPickerProps };\n//# sourceMappingURL=color-picker.mjs.map\n","import '../../../../utils/index.mjs';\nimport { hasOwn } from '@vue/shared';\n\nconst hsv2hsl = function(hue, sat, val) {\n  return [\n    hue,\n    sat * val / ((hue = (2 - sat) * val) < 1 ? hue : 2 - hue) || 0,\n    hue / 2\n  ];\n};\nconst isOnePointZero = function(n) {\n  return typeof n === \"string\" && n.includes(\".\") && Number.parseFloat(n) === 1;\n};\nconst isPercentage = function(n) {\n  return typeof n === \"string\" && n.includes(\"%\");\n};\nconst bound01 = function(value, max) {\n  if (isOnePointZero(value))\n    value = \"100%\";\n  const processPercent = isPercentage(value);\n  value = Math.min(max, Math.max(0, Number.parseFloat(`${value}`)));\n  if (processPercent) {\n    value = Number.parseInt(`${value * max}`, 10) / 100;\n  }\n  if (Math.abs(value - max) < 1e-6) {\n    return 1;\n  }\n  return value % max / Number.parseFloat(max);\n};\nconst INT_HEX_MAP = {\n  10: \"A\",\n  11: \"B\",\n  12: \"C\",\n  13: \"D\",\n  14: \"E\",\n  15: \"F\"\n};\nconst hexOne = (value) => {\n  value = Math.min(Math.round(value), 255);\n  const high = Math.floor(value / 16);\n  const low = value % 16;\n  return `${INT_HEX_MAP[high] || high}${INT_HEX_MAP[low] || low}`;\n};\nconst toHex = function({ r, g, b }) {\n  if (Number.isNaN(+r) || Number.isNaN(+g) || Number.isNaN(+b))\n    return \"\";\n  return `#${hexOne(r)}${hexOne(g)}${hexOne(b)}`;\n};\nconst HEX_INT_MAP = {\n  A: 10,\n  B: 11,\n  C: 12,\n  D: 13,\n  E: 14,\n  F: 15\n};\nconst parseHexChannel = function(hex) {\n  if (hex.length === 2) {\n    return (HEX_INT_MAP[hex[0].toUpperCase()] || +hex[0]) * 16 + (HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1]);\n  }\n  return HEX_INT_MAP[hex[1].toUpperCase()] || +hex[1];\n};\nconst hsl2hsv = function(hue, sat, light) {\n  sat = sat / 100;\n  light = light / 100;\n  let smin = sat;\n  const lmin = Math.max(light, 0.01);\n  light *= 2;\n  sat *= light <= 1 ? light : 2 - light;\n  smin *= lmin <= 1 ? lmin : 2 - lmin;\n  const v = (light + sat) / 2;\n  const sv = light === 0 ? 2 * smin / (lmin + smin) : 2 * sat / (light + sat);\n  return {\n    h: hue,\n    s: sv * 100,\n    v: v * 100\n  };\n};\nconst rgb2hsv = (r, g, b) => {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h;\n  const v = max;\n  const d = max - min;\n  const s = max === 0 ? 0 : d / max;\n  if (max === min) {\n    h = 0;\n  } else {\n    switch (max) {\n      case r: {\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      }\n      case g: {\n        h = (b - r) / d + 2;\n        break;\n      }\n      case b: {\n        h = (r - g) / d + 4;\n        break;\n      }\n    }\n    h /= 6;\n  }\n  return { h: h * 360, s: s * 100, v: v * 100 };\n};\nconst hsv2rgb = function(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  const i = Math.floor(h);\n  const f = h - i;\n  const p = v * (1 - s);\n  const q = v * (1 - f * s);\n  const t = v * (1 - (1 - f) * s);\n  const mod = i % 6;\n  const r = [v, q, p, p, t, v][mod];\n  const g = [t, v, v, q, p, p][mod];\n  const b = [p, p, t, v, v, q][mod];\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  };\n};\nclass Color {\n  constructor(options = {}) {\n    this._hue = 0;\n    this._saturation = 100;\n    this._value = 100;\n    this._alpha = 100;\n    this.enableAlpha = false;\n    this.format = \"hex\";\n    this.value = \"\";\n    for (const option in options) {\n      if (hasOwn(options, option)) {\n        this[option] = options[option];\n      }\n    }\n    if (options.value) {\n      this.fromString(options.value);\n    } else {\n      this.doOnChange();\n    }\n  }\n  set(prop, value) {\n    if (arguments.length === 1 && typeof prop === \"object\") {\n      for (const p in prop) {\n        if (hasOwn(prop, p)) {\n          this.set(p, prop[p]);\n        }\n      }\n      return;\n    }\n    ;\n    this[`_${prop}`] = value;\n    this.doOnChange();\n  }\n  get(prop) {\n    if (prop === \"alpha\") {\n      return Math.floor(this[`_${prop}`]);\n    }\n    return this[`_${prop}`];\n  }\n  toRgb() {\n    return hsv2rgb(this._hue, this._saturation, this._value);\n  }\n  fromString(value) {\n    if (!value) {\n      this._hue = 0;\n      this._saturation = 100;\n      this._value = 100;\n      this.doOnChange();\n      return;\n    }\n    const fromHSV = (h, s, v) => {\n      this._hue = Math.max(0, Math.min(360, h));\n      this._saturation = Math.max(0, Math.min(100, s));\n      this._value = Math.max(0, Math.min(100, v));\n      this.doOnChange();\n    };\n    if (value.includes(\"hsl\")) {\n      const parts = value.replace(/hsla|hsl|\\(|\\)/gm, \"\").split(/\\s|,/g).filter((val) => val !== \"\").map((val, index) => index > 2 ? Number.parseFloat(val) : Number.parseInt(val, 10));\n      if (parts.length === 4) {\n        this._alpha = Number.parseFloat(parts[3]) * 100;\n      } else if (parts.length === 3) {\n        this._alpha = 100;\n      }\n      if (parts.length >= 3) {\n        const { h, s, v } = hsl2hsv(parts[0], parts[1], parts[2]);\n        fromHSV(h, s, v);\n      }\n    } else if (value.includes(\"hsv\")) {\n      const parts = value.replace(/hsva|hsv|\\(|\\)/gm, \"\").split(/\\s|,/g).filter((val) => val !== \"\").map((val, index) => index > 2 ? Number.parseFloat(val) : Number.parseInt(val, 10));\n      if (parts.length === 4) {\n        this._alpha = Number.parseFloat(parts[3]) * 100;\n      } else if (parts.length === 3) {\n        this._alpha = 100;\n      }\n      if (parts.length >= 3) {\n        fromHSV(parts[0], parts[1], parts[2]);\n      }\n    } else if (value.includes(\"rgb\")) {\n      const parts = value.replace(/rgba|rgb|\\(|\\)/gm, \"\").split(/\\s|,/g).filter((val) => val !== \"\").map((val, index) => index > 2 ? Number.parseFloat(val) : Number.parseInt(val, 10));\n      if (parts.length === 4) {\n        this._alpha = Number.parseFloat(parts[3]) * 100;\n      } else if (parts.length === 3) {\n        this._alpha = 100;\n      }\n      if (parts.length >= 3) {\n        const { h, s, v } = rgb2hsv(parts[0], parts[1], parts[2]);\n        fromHSV(h, s, v);\n      }\n    } else if (value.includes(\"#\")) {\n      const hex = value.replace(\"#\", \"\").trim();\n      if (!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(hex))\n        return;\n      let r, g, b;\n      if (hex.length === 3) {\n        r = parseHexChannel(hex[0] + hex[0]);\n        g = parseHexChannel(hex[1] + hex[1]);\n        b = parseHexChannel(hex[2] + hex[2]);\n      } else if (hex.length === 6 || hex.length === 8) {\n        r = parseHexChannel(hex.slice(0, 2));\n        g = parseHexChannel(hex.slice(2, 4));\n        b = parseHexChannel(hex.slice(4, 6));\n      }\n      if (hex.length === 8) {\n        this._alpha = parseHexChannel(hex.slice(6)) / 255 * 100;\n      } else if (hex.length === 3 || hex.length === 6) {\n        this._alpha = 100;\n      }\n      const { h, s, v } = rgb2hsv(r, g, b);\n      fromHSV(h, s, v);\n    }\n  }\n  compare(color) {\n    return Math.abs(color._hue - this._hue) < 2 && Math.abs(color._saturation - this._saturation) < 1 && Math.abs(color._value - this._value) < 1 && Math.abs(color._alpha - this._alpha) < 1;\n  }\n  doOnChange() {\n    const { _hue, _saturation, _value, _alpha, format } = this;\n    if (this.enableAlpha) {\n      switch (format) {\n        case \"hsl\": {\n          const hsl = hsv2hsl(_hue, _saturation / 100, _value / 100);\n          this.value = `hsla(${_hue}, ${Math.round(hsl[1] * 100)}%, ${Math.round(hsl[2] * 100)}%, ${this.get(\"alpha\") / 100})`;\n          break;\n        }\n        case \"hsv\": {\n          this.value = `hsva(${_hue}, ${Math.round(_saturation)}%, ${Math.round(_value)}%, ${this.get(\"alpha\") / 100})`;\n          break;\n        }\n        case \"hex\": {\n          this.value = `${toHex(hsv2rgb(_hue, _saturation, _value))}${hexOne(_alpha * 255 / 100)}`;\n          break;\n        }\n        default: {\n          const { r, g, b } = hsv2rgb(_hue, _saturation, _value);\n          this.value = `rgba(${r}, ${g}, ${b}, ${this.get(\"alpha\") / 100})`;\n        }\n      }\n    } else {\n      switch (format) {\n        case \"hsl\": {\n          const hsl = hsv2hsl(_hue, _saturation / 100, _value / 100);\n          this.value = `hsl(${_hue}, ${Math.round(hsl[1] * 100)}%, ${Math.round(hsl[2] * 100)}%)`;\n          break;\n        }\n        case \"hsv\": {\n          this.value = `hsv(${_hue}, ${Math.round(_saturation)}%, ${Math.round(_value)}%)`;\n          break;\n        }\n        case \"rgb\": {\n          const { r, g, b } = hsv2rgb(_hue, _saturation, _value);\n          this.value = `rgb(${r}, ${g}, ${b})`;\n          break;\n        }\n        default: {\n          this.value = toHex(hsv2rgb(_hue, _saturation, _value));\n        }\n      }\n    }\n  }\n}\n\nexport { Color as default };\n//# sourceMappingURL=color.mjs.map\n","import { defineComponent, inject, ref, watch, watchEffect, openBlock, createElementBlock, normalizeClass, createElementVNode, Fragment, renderList, normalizeStyle } from 'vue';\nimport '../../../../hooks/index.mjs';\nimport { colorPickerContextKey } from '../color-picker.mjs';\nimport Color from '../utils/color.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\n\nconst _sfc_main = defineComponent({\n  props: {\n    colors: {\n      type: Array,\n      required: true\n    },\n    color: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const ns = useNamespace(\"color-predefine\");\n    const { currentColor } = inject(colorPickerContextKey);\n    const rgbaColors = ref(parseColors(props.colors, props.color));\n    watch(() => currentColor.value, (val) => {\n      const color = new Color();\n      color.fromString(val);\n      rgbaColors.value.forEach((item) => {\n        item.selected = color.compare(item);\n      });\n    });\n    watchEffect(() => {\n      rgbaColors.value = parseColors(props.colors, props.color);\n    });\n    function handleSelect(index) {\n      props.color.fromString(props.colors[index]);\n    }\n    function parseColors(colors, color) {\n      return colors.map((value) => {\n        const c = new Color();\n        c.enableAlpha = true;\n        c.format = \"rgba\";\n        c.fromString(value);\n        c.selected = c.value === color.value;\n        return c;\n      });\n    }\n    return {\n      rgbaColors,\n      handleSelect,\n      ns\n    };\n  }\n});\nconst _hoisted_1 = [\"onClick\"];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b())\n  }, [\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"colors\"))\n    }, [\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.rgbaColors, (item, index) => {\n        return openBlock(), createElementBlock(\"div\", {\n          key: _ctx.colors[index],\n          class: normalizeClass([\n            _ctx.ns.e(\"color-selector\"),\n            _ctx.ns.is(\"alpha\", item._alpha < 100),\n            { selected: item.selected }\n          ]),\n          onClick: ($event) => _ctx.handleSelect(index)\n        }, [\n          createElementVNode(\"div\", {\n            style: normalizeStyle({ backgroundColor: item.value })\n          }, null, 4)\n        ], 10, _hoisted_1);\n      }), 128))\n    ], 2)\n  ], 2);\n}\nvar Predefine = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue\"]]);\n\nexport { Predefine as default };\n//# sourceMappingURL=predefine.mjs.map\n","import { defineComponent, getCurrentInstance, ref, computed, watch, onMounted, createElementVNode, openBlock, createElementBlock, normalizeClass, normalizeStyle } from 'vue';\nimport '../../../../utils/index.mjs';\nimport '../../../../hooks/index.mjs';\nimport { draggable } from '../utils/draggable.mjs';\nimport _export_sfc from '../../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nimport { getClientXY } from '../../../../utils/dom/position.mjs';\n\nconst _sfc_main = defineComponent({\n  name: \"ElSlPanel\",\n  props: {\n    color: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const ns = useNamespace(\"color-svpanel\");\n    const instance = getCurrentInstance();\n    const cursorTop = ref(0);\n    const cursorLeft = ref(0);\n    const background = ref(\"hsl(0, 100%, 50%)\");\n    const colorValue = computed(() => {\n      const hue = props.color.get(\"hue\");\n      const value = props.color.get(\"value\");\n      return { hue, value };\n    });\n    function update() {\n      const saturation = props.color.get(\"saturation\");\n      const value = props.color.get(\"value\");\n      const el = instance.vnode.el;\n      const { clientWidth: width, clientHeight: height } = el;\n      cursorLeft.value = saturation * width / 100;\n      cursorTop.value = (100 - value) * height / 100;\n      background.value = `hsl(${props.color.get(\"hue\")}, 100%, 50%)`;\n    }\n    function handleDrag(event) {\n      const el = instance.vnode.el;\n      const rect = el.getBoundingClientRect();\n      const { clientX, clientY } = getClientXY(event);\n      let left = clientX - rect.left;\n      let top = clientY - rect.top;\n      left = Math.max(0, left);\n      left = Math.min(left, rect.width);\n      top = Math.max(0, top);\n      top = Math.min(top, rect.height);\n      cursorLeft.value = left;\n      cursorTop.value = top;\n      props.color.set({\n        saturation: left / rect.width * 100,\n        value: 100 - top / rect.height * 100\n      });\n    }\n    watch(() => colorValue.value, () => {\n      update();\n    });\n    onMounted(() => {\n      draggable(instance.vnode.el, {\n        drag: (event) => {\n          handleDrag(event);\n        },\n        end: (event) => {\n          handleDrag(event);\n        }\n      });\n      update();\n    });\n    return {\n      cursorTop,\n      cursorLeft,\n      background,\n      colorValue,\n      handleDrag,\n      update,\n      ns\n    };\n  }\n});\nconst _hoisted_1 = /* @__PURE__ */ createElementVNode(\"div\", null, null, -1);\nconst _hoisted_2 = [\n  _hoisted_1\n];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass(_ctx.ns.b()),\n    style: normalizeStyle({\n      backgroundColor: _ctx.background\n    })\n  }, [\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"white\"))\n    }, null, 2),\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"black\"))\n    }, null, 2),\n    createElementVNode(\"div\", {\n      class: normalizeClass(_ctx.ns.e(\"cursor\")),\n      style: normalizeStyle({\n        top: _ctx.cursorTop + \"px\",\n        left: _ctx.cursorLeft + \"px\"\n      })\n    }, _hoisted_2, 6)\n  ], 6);\n}\nvar SvPanel = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue\"]]);\n\nexport { SvPanel as default };\n//# sourceMappingURL=sv-panel.mjs.map\n","import { defineComponent, ref, reactive, computed, nextTick, onMounted, watch, provide, openBlock, createBlock, unref, withCtx, withDirectives, createElementBlock, createElementVNode, normalizeClass, createVNode, createCommentVNode, withKeys, createTextVNode, toDisplayString, normalizeStyle, vShow } from 'vue';\nimport { debounce } from 'lodash-unified';\nimport { ElButton } from '../../button/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport '../../../directives/index.mjs';\nimport { ElTooltip } from '../../tooltip/index.mjs';\nimport { ElInput } from '../../input/index.mjs';\nimport '../../form/index.mjs';\nimport '../../../hooks/index.mjs';\nimport '../../../constants/index.mjs';\nimport '../../../utils/index.mjs';\nimport { ArrowDown, Close } from '@element-plus/icons-vue';\nimport AlphaSlider from './components/alpha-slider.mjs';\nimport HueSlider from './components/hue-slider.mjs';\nimport Predefine from './components/predefine.mjs';\nimport SvPanel from './components/sv-panel.mjs';\nimport Color from './utils/color.mjs';\nimport { colorPickerProps, colorPickerEmits, colorPickerContextKey } from './color-picker.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormItem, useFormItemInputId } from '../../form/src/hooks/use-form-item.mjs';\nimport { useFormSize, useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nimport { debugWarn } from '../../../utils/error.mjs';\nimport ClickOutside from '../../../directives/click-outside/index.mjs';\n\nconst _hoisted_1 = [\"id\", \"aria-label\", \"aria-labelledby\", \"aria-description\", \"tabindex\", \"onKeydown\"];\nconst __default__ = defineComponent({\n  name: \"ElColorPicker\"\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: colorPickerProps,\n  emits: colorPickerEmits,\n  setup(__props, { expose, emit }) {\n    const props = __props;\n    const { t } = useLocale();\n    const ns = useNamespace(\"color\");\n    const { formItem } = useFormItem();\n    const colorSize = useFormSize();\n    const colorDisabled = useFormDisabled();\n    const { inputId: buttonId, isLabeledByFormItem } = useFormItemInputId(props, {\n      formItemContext: formItem\n    });\n    const hue = ref();\n    const sv = ref();\n    const alpha = ref();\n    const popper = ref();\n    let shouldActiveChange = true;\n    const color = reactive(new Color({\n      enableAlpha: props.showAlpha,\n      format: props.colorFormat || \"\",\n      value: props.modelValue\n    }));\n    const showPicker = ref(false);\n    const showPanelColor = ref(false);\n    const customInput = ref(\"\");\n    const displayedColor = computed(() => {\n      if (!props.modelValue && !showPanelColor.value) {\n        return \"transparent\";\n      }\n      return displayedRgb(color, props.showAlpha);\n    });\n    const currentColor = computed(() => {\n      return !props.modelValue && !showPanelColor.value ? \"\" : color.value;\n    });\n    const buttonAriaLabel = computed(() => {\n      return !isLabeledByFormItem.value ? props.label || t(\"el.colorpicker.defaultLabel\") : void 0;\n    });\n    const buttonAriaLabelledby = computed(() => {\n      return isLabeledByFormItem.value ? formItem == null ? void 0 : formItem.labelId : void 0;\n    });\n    const btnKls = computed(() => {\n      return [\n        ns.b(\"picker\"),\n        ns.is(\"disabled\", colorDisabled.value),\n        ns.bm(\"picker\", colorSize.value)\n      ];\n    });\n    function displayedRgb(color2, showAlpha) {\n      if (!(color2 instanceof Color)) {\n        throw new TypeError(\"color should be instance of _color Class\");\n      }\n      const { r, g, b } = color2.toRgb();\n      return showAlpha ? `rgba(${r}, ${g}, ${b}, ${color2.get(\"alpha\") / 100})` : `rgb(${r}, ${g}, ${b})`;\n    }\n    function setShowPicker(value) {\n      showPicker.value = value;\n    }\n    const debounceSetShowPicker = debounce(setShowPicker, 100);\n    function show() {\n      if (colorDisabled.value)\n        return;\n      setShowPicker(true);\n    }\n    function hide() {\n      debounceSetShowPicker(false);\n      resetColor();\n    }\n    function resetColor() {\n      nextTick(() => {\n        if (props.modelValue) {\n          color.fromString(props.modelValue);\n        } else {\n          color.value = \"\";\n          nextTick(() => {\n            showPanelColor.value = false;\n          });\n        }\n      });\n    }\n    function handleTrigger() {\n      if (colorDisabled.value)\n        return;\n      debounceSetShowPicker(!showPicker.value);\n    }\n    function handleConfirm() {\n      color.fromString(customInput.value);\n    }\n    function confirmValue() {\n      const value = color.value;\n      emit(UPDATE_MODEL_EVENT, value);\n      emit(\"change\", value);\n      if (props.validateEvent) {\n        formItem == null ? void 0 : formItem.validate(\"change\").catch((err) => debugWarn(err));\n      }\n      debounceSetShowPicker(false);\n      nextTick(() => {\n        const newColor = new Color({\n          enableAlpha: props.showAlpha,\n          format: props.colorFormat || \"\",\n          value: props.modelValue\n        });\n        if (!color.compare(newColor)) {\n          resetColor();\n        }\n      });\n    }\n    function clear() {\n      debounceSetShowPicker(false);\n      emit(UPDATE_MODEL_EVENT, null);\n      emit(\"change\", null);\n      if (props.modelValue !== null && props.validateEvent) {\n        formItem == null ? void 0 : formItem.validate(\"change\").catch((err) => debugWarn(err));\n      }\n      resetColor();\n    }\n    onMounted(() => {\n      if (props.modelValue) {\n        customInput.value = currentColor.value;\n      }\n    });\n    watch(() => props.modelValue, (newVal) => {\n      if (!newVal) {\n        showPanelColor.value = false;\n      } else if (newVal && newVal !== color.value) {\n        shouldActiveChange = false;\n        color.fromString(newVal);\n      }\n    });\n    watch(() => currentColor.value, (val) => {\n      customInput.value = val;\n      shouldActiveChange && emit(\"activeChange\", val);\n      shouldActiveChange = true;\n    });\n    watch(() => color.value, () => {\n      if (!props.modelValue && !showPanelColor.value) {\n        showPanelColor.value = true;\n      }\n    });\n    watch(() => showPicker.value, () => {\n      nextTick(() => {\n        var _a, _b, _c;\n        (_a = hue.value) == null ? void 0 : _a.update();\n        (_b = sv.value) == null ? void 0 : _b.update();\n        (_c = alpha.value) == null ? void 0 : _c.update();\n      });\n    });\n    provide(colorPickerContextKey, {\n      currentColor\n    });\n    expose({\n      color,\n      show,\n      hide\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElTooltip), {\n        ref_key: \"popper\",\n        ref: popper,\n        visible: showPicker.value,\n        \"show-arrow\": false,\n        \"fallback-placements\": [\"bottom\", \"top\", \"right\", \"left\"],\n        offset: 0,\n        \"gpu-acceleration\": false,\n        \"popper-class\": [unref(ns).be(\"picker\", \"panel\"), unref(ns).b(\"dropdown\"), _ctx.popperClass],\n        \"stop-popper-mouse-event\": false,\n        effect: \"light\",\n        trigger: \"click\",\n        transition: `${unref(ns).namespace.value}-zoom-in-top`,\n        persistent: \"\"\n      }, {\n        content: withCtx(() => [\n          withDirectives((openBlock(), createElementBlock(\"div\", null, [\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).be(\"dropdown\", \"main-wrapper\"))\n            }, [\n              createVNode(HueSlider, {\n                ref_key: \"hue\",\n                ref: hue,\n                class: \"hue-slider\",\n                color: unref(color),\n                vertical: \"\"\n              }, null, 8, [\"color\"]),\n              createVNode(SvPanel, {\n                ref: \"svPanel\",\n                color: unref(color)\n              }, null, 8, [\"color\"])\n            ], 2),\n            _ctx.showAlpha ? (openBlock(), createBlock(AlphaSlider, {\n              key: 0,\n              ref_key: \"alpha\",\n              ref: alpha,\n              color: unref(color)\n            }, null, 8, [\"color\"])) : createCommentVNode(\"v-if\", true),\n            _ctx.predefine ? (openBlock(), createBlock(Predefine, {\n              key: 1,\n              ref: \"predefine\",\n              color: unref(color),\n              colors: _ctx.predefine\n            }, null, 8, [\"color\", \"colors\"])) : createCommentVNode(\"v-if\", true),\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).be(\"dropdown\", \"btns\"))\n            }, [\n              createElementVNode(\"span\", {\n                class: normalizeClass(unref(ns).be(\"dropdown\", \"value\"))\n              }, [\n                createVNode(unref(ElInput), {\n                  modelValue: customInput.value,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => customInput.value = $event),\n                  \"validate-event\": false,\n                  size: \"small\",\n                  onKeyup: withKeys(handleConfirm, [\"enter\"]),\n                  onBlur: handleConfirm\n                }, null, 8, [\"modelValue\", \"onKeyup\"])\n              ], 2),\n              createVNode(unref(ElButton), {\n                class: normalizeClass(unref(ns).be(\"dropdown\", \"link-btn\")),\n                text: \"\",\n                size: \"small\",\n                onClick: clear\n              }, {\n                default: withCtx(() => [\n                  createTextVNode(toDisplayString(unref(t)(\"el.colorpicker.clear\")), 1)\n                ]),\n                _: 1\n              }, 8, [\"class\"]),\n              createVNode(unref(ElButton), {\n                plain: \"\",\n                size: \"small\",\n                class: normalizeClass(unref(ns).be(\"dropdown\", \"btn\")),\n                onClick: confirmValue\n              }, {\n                default: withCtx(() => [\n                  createTextVNode(toDisplayString(unref(t)(\"el.colorpicker.confirm\")), 1)\n                ]),\n                _: 1\n              }, 8, [\"class\"])\n            ], 2)\n          ])), [\n            [unref(ClickOutside), hide]\n          ])\n        ]),\n        default: withCtx(() => [\n          createElementVNode(\"div\", {\n            id: unref(buttonId),\n            class: normalizeClass(unref(btnKls)),\n            role: \"button\",\n            \"aria-label\": unref(buttonAriaLabel),\n            \"aria-labelledby\": unref(buttonAriaLabelledby),\n            \"aria-description\": unref(t)(\"el.colorpicker.description\", { color: _ctx.modelValue || \"\" }),\n            tabindex: _ctx.tabindex,\n            onKeydown: withKeys(handleTrigger, [\"enter\"])\n          }, [\n            unref(colorDisabled) ? (openBlock(), createElementBlock(\"div\", {\n              key: 0,\n              class: normalizeClass(unref(ns).be(\"picker\", \"mask\"))\n            }, null, 2)) : createCommentVNode(\"v-if\", true),\n            createElementVNode(\"div\", {\n              class: normalizeClass(unref(ns).be(\"picker\", \"trigger\")),\n              onClick: handleTrigger\n            }, [\n              createElementVNode(\"span\", {\n                class: normalizeClass([unref(ns).be(\"picker\", \"color\"), unref(ns).is(\"alpha\", _ctx.showAlpha)])\n              }, [\n                createElementVNode(\"span\", {\n                  class: normalizeClass(unref(ns).be(\"picker\", \"color-inner\")),\n                  style: normalizeStyle({\n                    backgroundColor: unref(displayedColor)\n                  })\n                }, [\n                  withDirectives(createVNode(unref(ElIcon), {\n                    class: normalizeClass([unref(ns).be(\"picker\", \"icon\"), unref(ns).is(\"icon-arrow-down\")])\n                  }, {\n                    default: withCtx(() => [\n                      createVNode(unref(ArrowDown))\n                    ]),\n                    _: 1\n                  }, 8, [\"class\"]), [\n                    [vShow, _ctx.modelValue || showPanelColor.value]\n                  ]),\n                  !_ctx.modelValue && !showPanelColor.value ? (openBlock(), createBlock(unref(ElIcon), {\n                    key: 0,\n                    class: normalizeClass([unref(ns).be(\"picker\", \"empty\"), unref(ns).is(\"icon-close\")])\n                  }, {\n                    default: withCtx(() => [\n                      createVNode(unref(Close))\n                    ]),\n                    _: 1\n                  }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true)\n                ], 6)\n              ], 2)\n            ], 2)\n          ], 42, _hoisted_1)\n        ]),\n        _: 1\n      }, 8, [\"visible\", \"popper-class\", \"transition\"]);\n    };\n  }\n});\nvar ColorPicker = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue\"]]);\n\nexport { ColorPicker as default };\n//# sourceMappingURL=color-picker2.mjs.map\n","import '../../utils/index.mjs';\nimport ColorPicker from './src/color-picker2.mjs';\nexport { colorPickerContextKey, colorPickerEmits, colorPickerProps } from './src/color-picker.mjs';\nimport { withInstall } from '../../utils/vue/install.mjs';\n\nconst ElColorPicker = withInstall(ColorPicker);\n\nexport { ElColorPicker, ElColorPicker as default };\n//# sourceMappingURL=index.mjs.map\n","import '../../../utils/index.mjs';\nimport { buildProps, definePropType } from '../../../utils/vue/props/runtime.mjs';\n\nconst dividerProps = buildProps({\n  direction: {\n    type: String,\n    values: [\"horizontal\", \"vertical\"],\n    default: \"horizontal\"\n  },\n  contentPosition: {\n    type: String,\n    values: [\"left\", \"center\", \"right\"],\n    default: \"center\"\n  },\n  borderStyle: {\n    type: definePropType(String),\n    default: \"solid\"\n  }\n});\n\nexport { dividerProps };\n//# sourceMappingURL=divider.mjs.map\n","import { defineComponent, computed, openBlock, createElementBlock, normalizeClass, unref, normalizeStyle, renderSlot, createCommentVNode } from 'vue';\nimport '../../../hooks/index.mjs';\nimport { dividerProps } from './divider.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\n\nconst __default__ = defineComponent({\n  name: \"ElDivider\"\n});\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  ...__default__,\n  props: dividerProps,\n  setup(__props) {\n    const props = __props;\n    const ns = useNamespace(\"divider\");\n    const dividerStyle = computed(() => {\n      return ns.cssVar({\n        \"border-style\": props.borderStyle\n      });\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([unref(ns).b(), unref(ns).m(_ctx.direction)]),\n        style: normalizeStyle(unref(dividerStyle)),\n        role: \"separator\"\n      }, [\n        _ctx.$slots.default && _ctx.direction !== \"vertical\" ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          class: normalizeClass([unref(ns).e(\"text\"), unref(ns).is(_ctx.contentPosition)])\n        }, [\n          renderSlot(_ctx.$slots, \"default\")\n        ], 2)) : createCommentVNode(\"v-if\", true)\n      ], 6);\n    };\n  }\n});\nvar Divider = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue\"]]);\n\nexport { Divider as default };\n//# sourceMappingURL=divider2.mjs.map\n","import '../../utils/index.mjs';\nimport Divider from './src/divider2.mjs';\nexport { dividerProps } from './src/divider.mjs';\nimport { withInstall } from '../../utils/vue/install.mjs';\n\nconst ElDivider = withInstall(Divider);\n\nexport { ElDivider, ElDivider as default };\n//# sourceMappingURL=index.mjs.map\n","import { FabricObject } from '../../shared/fabric'\n\ninterface Options {\n  x: number,\n  y: number,\n  w?: number\n  h?: number\n  fillStyle?: string\n  strokeStyle?: string\n  tiggerFunc?: () => void\n}\n\nexport class LockIcon extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  private x = 0\n  private y = 0\n  private w = 20\n  private h = 14\n  private fillStyle = '#eeb174'\n  private strokeStyle = '#333'\n  private tiggerFunc: () => void\n\n  constructor(ctx: CanvasRenderingContext2D, options: Options) {\n    super()\n    this.ctx = ctx\n    this.analysisOptions(options)\n  }\n\n  private analysisOptions(options) {\n    if (options.x) this.x = options.x\n    if (options.y) this.y = options.y\n    if (options.w) this.w = options.w\n    if (options.h) this.h = options.h\n    if (options.fillStyle) this.fillStyle = options.fillStyle\n    if (options.strokeStyle) this.strokeStyle = options.strokeStyle\n    if (options.tiggerFunc) this.tiggerFunc = options.tiggerFunc\n  }\n\n  public draw() {\n    const {\n      ctx,\n      x, y,\n      w, h,\n      fillStyle, strokeStyle,\n    } = this\n    ctx.save()\n    ctx.fillStyle = fillStyle\n    ctx.strokeStyle = strokeStyle\n    ctx.lineWidth = 3\n    ctx.beginPath()\n    ctx.arc(x + w / 2, y - 3, w / 3, 0, Math.PI, true)\n    ctx.stroke()\n    ctx.drawRoundedRect(x, y, w, h, 2, 2, 2, 2, true, true, false, false)\n    ctx.restore()\n  }\n\n  public containsPoint(e: MouseEvent, trigger = false) {\n    const { x, y, w, h } = this\n    const {\n      x: ex, y: ey,\n    } = e\n    const lines = this.getImageLines({\n      tl: { x: x, y: y },\n      tr: { x: x + w, y: y },\n      bl: { x: x, y: y + h },\n      br: { x: x + w, y: y + h },\n    })\n\n    const xpoints = this.findCrossPoints(ex, ey, lines)\n    const isContains = Boolean(xpoints % 2)\n\n    if (isContains && trigger) this.tiggerFunc?.()\n    return isContains\n  }\n}","/**\n * hex色值转换为rgb颜色\n * @param {String} hex    hex色值\n * \n * @return {String} rgb() 转换后的RGB色值\n */\nexport const hexToRgb = function (hex) {\n  //把诸如#fff转为#ffffff\n  hex.length === 4 && (hex = hex.slice(0, 2) + hex.slice(1, 2) + hex.slice(2, 3) + hex.slice(2, 3) + hex.slice(3, 4) + hex.slice(3, 4))\n\n  return 'rgb(' + parseInt('0x' + hex.slice(1, 3)) + ',' + parseInt('0x' + hex.slice(3, 5)) + ',' + parseInt('0x' + hex.slice(5, 7)) + ')'\n}\n\n\n/**\n * 判断是否是浅色系\n * @param {String} color 要判断的颜色（接受hex/rgb颜色\n * \n * @return {Boolean}     true -> 是浅色系；false -> 是深色系；\n */\nexport const isLightColor = function (color) {\n  const rgbStr = color.includes('rgb') ? color : hexToRgb(color)\n  const rgbArr = rgbStr.replace(/rgb\\(|rgba\\(|\\)/g, '').split(',')\n\n  return (\n    0.213 * rgbArr[0] +\n    0.715 * rgbArr[1] +\n    0.072 * rgbArr[2] >\n    255 / 2\n  )\n}","import { FabricObject } from '../../shared/fabric'\nimport { Table, Attribute, CanvasEvent, Id } from '../../../types'\nimport { DataTypeClassify, DataTypeDate, DataTypeNumber, DataTypeString } from '../../../types/enum'\nimport { imageMap } from '../../shared/image'\nimport { isBoolean, isNumber } from '../../utils/verify'\nimport { isLightColor } from '../../utils/color'\n\n/**\n * 待优化：\n * 1.属性超出画布无需渲染\n */\ninterface NodeInput extends Table {\n  x?: number\n  y?: number\n  width?: number\n  height?: number\n  bgC?: string\n  bdC?: string\n  quotePrimaryKey?: boolean\n  physicalTables?: boolean\n  manualChange?: boolean\n}\nexport class NodeErwin extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  public width = 100\n  public height = 50\n  public titleHeight = 24\n  private fontSize = 16\n  private padding = 10\n\n  private attrHeight = 16\n  private borderWidth = 1\n  private datatypeIconWidth = 14\n\n  public x = 0\n  public y = 0\n  public id: Id\n  public enName: string\n  public cnName: string\n  public type: string\n  public attributes: Attribute[] = []\n  public attributesPrimary: Attribute[] = []\n  public attributesPrimaryNon: Attribute[] = []\n  private expandAttrs = []\n\n  private borderColor = '#000000'\n  private textColor = '#000000'\n  private bgColor = '#FFFFFF'\n  private hoverColor = '#477DE9'\n  private attrFocusStyle = {\n    color: '#fff',\n    backgroundColor: '#0000ff',\n  }\n\n  private quotePrimaryKey = false\n  private physicalTables = false\n  private manualChange = false\n\n  constructor(ctx: CanvasRenderingContext2D, input: NodeInput) {\n    super()\n    this.ctx = ctx\n    this.updateOptions(input)\n  }\n\n  private analysisOptions(input: NodeInput) {\n    if (!input) return\n\n    const {\n      x,\n      y,\n      width,\n      height,\n      id,\n      enName,\n      cnName,\n      type,\n      attributes,\n      bgC, bdC,\n      quotePrimaryKey,\n      physicalTables,\n      manualChange,\n    } = input\n\n    if (isNumber(x)) this.x = x\n    if (isNumber(y)) this.y = y\n    if (id) this.id = id\n    if (enName) this.enName = enName\n    if (cnName) this.cnName = cnName\n    if (isNumber(width)) this.width = width\n    if (isNumber(height)) this.height = height\n    if (type) this.type = type\n    if (attributes) {\n      this.attributes = attributes\n      this.attributesPartition()\n    }\n    if (bgC) this.bgColor = bgC\n    if (bdC) this.borderColor = bdC\n    if (isBoolean(quotePrimaryKey)) this.quotePrimaryKey = quotePrimaryKey\n    if (isBoolean(physicalTables)) this.physicalTables = physicalTables\n    if (isBoolean(manualChange)) this.manualChange = manualChange\n  }\n\n  public updateOptions(input: NodeInput) {\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  public containsPoint(e: CanvasEvent, trigger = false) {\n    const {\n      x: ex, y: ey,\n    } = e\n    const { x, y, width: w, height: h, attrHeight, titleHeight, attributes } = this\n\n    // 是否节点触发\n    const linesForNode = this.getImageLines({\n      tl: { x, y: y },\n      tr: { x: x + w, y: y },\n      bl: { x, y: y + h },\n      br: { x: x + w, y: y + h },\n    })\n    const xpointsNode = this.findCrossPoints(ex, ey, linesForNode)\n    const isContainsNode = Boolean(xpointsNode % 2)\n    if (!isContainsNode) return false\n\n    return true\n    // const relativeH = ey - y\n\n    // // 属性触发\n    // const attrIndex = Math.floor((relativeH - titleHeight) / attrHeight)\n    // return attributes[attrIndex]?.id\n  }\n\n  public draw(input?: NodeInput) {\n    this.updateOptions(input)\n\n    this.drawContainer()\n    this.drawTitle()\n    this.drawbody()\n  }\n\n  private drawContainer() {\n    const {\n      ctx,\n      x, y,\n      width: w, height: h,\n      enName, cnName, type,\n      attributes,\n      bgColor, borderColor, textColor,\n      quotePrimaryKey, physicalTables,\n    } = this\n\n    ctx.save()\n    ctx.strokeStyle = borderColor\n    ctx.fillStyle = bgColor\n    //分支节点\n    if (['exclusive', 'inclusive'].includes(type)) {\n      ctx.beginPath()\n      ctx.arc(x + w / 2, y + w / 2, w / 2, 0, Math.PI, true)\n      ctx.closePath()\n      ctx.fill()\n      ctx.stroke()\n\n      if (type === 'exclusive') {\n        ctx.moveTo(x + 12, y + 6)\n        ctx.lineTo(x + w - 12, y + h - 3)\n        ctx.moveTo(x + w - 12, y + 6)\n        ctx.lineTo(x + 12, y + h - 3)\n        ctx.stroke()\n      }\n    }\n    //圆角矩形\n    else {\n      const roundedDeg = quotePrimaryKey ? 4 : 0\n      ctx.drawRoundedRect(x, y, w, h, roundedDeg, roundedDeg, roundedDeg, roundedDeg, true, true, physicalTables, true)\n    }\n\n    // //绘制表体文字\n    // attributes && this._drawBody(item)\n\n    //绘制聚焦节点标识\n    // if (this.focusTarget.includes(item) && !['exclusive', 'inclusive'].includes(item.type)) this._drawFocus(x, y, w, h)\n\n    ctx.restore()\n  }\n\n  private drawDataType(datatype: DataTypeDate | DataTypeNumber | DataTypeString, x: number, y: number) {\n    const datatypeUpper = datatype?.toLocaleUpperCase()\n    let img\n    if (datatypeUpper in DataTypeDate) {\n      img = imageMap.get('date')\n    } else if (datatypeUpper in DataTypeNumber) {\n      0\n      img = imageMap.get('number')\n    } else if (datatypeUpper in DataTypeString) {\n      img = imageMap.get('string')\n    }\n    if (!img) return false\n    const { ctx } = this\n    ctx.drawImage(img, x - 6, y - 2)\n  }\n\n  private drawTitle() {\n    const {\n      ctx,\n      textColor,\n      enName,\n      width, x, y, titleHeight,\n      fontSize\n    } = this\n\n    ctx.save()\n    // 设置字体\n    ctx.font = `${fontSize}px`\n    // 设置颜色\n    ctx.fillStyle = textColor\n    // 设置水平对齐方式\n    ctx.textAlign = 'left'\n    // 设置垂直对齐方式\n    ctx.textBaseline = 'top'\n    ctx.fillText(ctx.fittingString(enName, width - 14), x, y - titleHeight)\n    ctx.restore()\n  }\n\n  private drawbody () {\n    const {\n      ctx,\n      x, y,\n      bgColor: bgC,\n      fontSize, padding, attrHeight,\n      attributesPrimary, attributesPrimaryNon,\n    } = this\n\n    ctx.save()\n    // 设置字体\n    ctx.font = `${fontSize}px`\n    // 设置字体颜色\n    ctx.fillStyle = isLightColor(bgC) ? '#000' : '#fff'\n    // 设置水平对齐方式\n    ctx.textAlign = 'left'\n    // 设置垂直对齐方式\n    ctx.textBaseline = 'top'\n\n    const curX = padding + x\n    let curY = y + padding - attrHeight\n\n    //绘制主键\n    for (let i = 0; i < attributesPrimary.length; i++) {\n      const item = attributesPrimary[i]\n      curY = this.drawAttrRow(item, curX, curY)\n    }\n\n    //绘制主键/非主键分割线\n    curY = this.drawSplitLine(curY)\n\n    //绘制非主键\n    for (let i = 0; i < attributesPrimaryNon.length; i++) {\n      const item = attributesPrimaryNon[i]\n      curY = this.drawAttrRow(item, curX, curY)\n    }\n\n    ctx.restore()\n  }\n\n  private drawAttrRow(attrItem, curX, curY) {\n    const {\n      ctx,\n      attrHeight, padding, fontSize,\n      x, y, width: w, height: h,\n    } = this\n\n    curY += attrHeight\n\n    // 判断是否超出实体框\n    if (curY + 16 > h + y) return\n\n    // 判断是否超出可视范围\n    // if (!this.canvas.isVisible([[curX, curY], [curX + w, curY + fontSize]])) return\n\n    // 绘制FK标识\n    const addText = attrItem.foreignKey ? '(FK)' : ''\n    const finalText = ctx.fittingString(attrItem.attrName + addText, w - (curX - x) - padding)\n    // 开始绘制主键\n    ctx.fillText(finalText, curX, curY)\n\n    // this.drawFocusAttr({\n    //   attrItem,\n    //   finalText,\n    //   curX,\n    //   curY,\n    //   fullWidth: w - (curX - x),\n    //   nodePadding: padding,\n    // })\n\n    // 绘制尾部icon\n    const textWidth = curX + ctx.measureText(finalText).width\n    this.drawIcons(attrItem.icons, textWidth, curY)\n\n      if (attrItem.children?.length) {\n        // 是否是展开状态\n        const isExpand = this.expandAttrs.includes(attrItem)\n\n        // 绘制树结构箭头\n        this.drawTreeExpandArrow.call(this, {\n          x: curX,\n          y: curY,\n          size: fontSize,\n          expand: isExpand,\n        })\n\n        // 绘制子节点\n        isExpand && attrItem.children.forEach(attrItem => {\n          curY = this.drawAttrRow(attrItem, curX + 10, curY)\n        })\n      }\n    \n    return curY\n  }\n\n  private drawIcons(icons = [], startX: number, startY: number) {\n    const { fontSize, x, width, padding } = this\n    for (let i = 0; i < icons.length; i++) {\n      const icon = icons[i]\n      const iconX = startX + fontSize * 0.7 + i * (fontSize * 1.2)\n\n      if (iconX + fontSize / 2 * 3 > x + width + padding) return\n      this.drawIcon(icon, iconX, startY)\n    }\n  }\n\n  private drawIcon(icon, startX: number, startY: number) {\n    const {\n      ctx,\n      attrHeight,\n      fontSize,\n    } = this\n\n    ctx.save()\n    /**\n     * 开始绘制背景圆圈\n     */\n    ctx.beginPath()\n    ctx.strokeStyle = icon.bdC || '#0C64EB'\n    ctx.fillStyle = icon.bgC || '#ECF5FF'\n    ctx.arc(startX, startY + Math.floor(attrHeight / 2) - 1, fontSize / 2, 0, 2 * Math.PI)\n    ctx.fill()\n    ctx.stroke()\n\n    /**\n     * 开始绘制文字\n     */\n    ctx.fillStyle = icon.color || '#0C64EB'\n    ctx.font = `${Math.ceil(fontSize / 1.2)}px Arial`\n    // 设置水平对齐方式\n    ctx.textAlign = 'center'\n    ctx.fillText(icon.text, startX, startY + (attrHeight - fontSize) / 2 + 1)\n    ctx.restore()\n  }\n\n  private drawSplitLine(curY) {\n    const {\n      ctx,\n      attributesPrimary,\n      attrHeight,\n      x, y, width: w, height: h,\n    } = this\n    curY += (attributesPrimary.length ? 1 : 2) * attrHeight\n\n    ctx.save()\n    if (curY < h + y) {\n      ctx.beginPath()\n      ctx.strokeStyle = '#000'\n      ctx.moveTo(x + 0.5, curY + attrHeight / 3 + 0.5)\n      ctx.lineTo(x + w + 0.5, curY + attrHeight / 3 + 0.5)\n      ctx.stroke()\n    }\n    ctx.restore()\n    return curY\n  }\n\n  private drawTreeExpandArrow ({ x, y, size, expand }) {\n    const {ctx} = this\n\n    ctx.save()\n    ctx.beginPath()\n    ctx.translate(x - 4, y + size / 2)\n    expand && ctx.rotate(90 * Math.PI / 180)\n    ctx.moveTo(-2, -4)\n    ctx.lineTo(-2, 4)\n    ctx.lineTo(2, 0)\n    ctx.fill()\n    ctx.restore()\n  }\n\n  private drawFocusAttr({ attrItem, finalText, curX, curY, fullWidth, nodePadding }) {\n    // if (this.focusAttr !== attrItem) return\n\n    const {\n      ctx,\n      attrFocusStyle,\n    } = this\n    const backgroundStartX = attrItem?.children?.length ? curX : curX - nodePadding / 2\n    const backgroundWidth = attrItem?.children?.length ? fullWidth - nodePadding / 2 : fullWidth\n\n    ctx.save()\n    ctx.fillStyle = attrFocusStyle.backgroundColor\n    ctx.fillRect(backgroundStartX, curY - 1, backgroundWidth, 16)\n\n    ctx.fillStyle = attrFocusStyle.color\n    ctx.fillText(finalText, curX, curY)\n\n    ctx.restore()\n  }\n\n  // 分裂主键非主键\n  private attributesPartition () {\n    this.attributesPrimary = []\n    this.attributesPrimaryNon = []\n\n    const { attributes, attributesPrimary, attributesPrimaryNon } = this\n    for (let i = 0; i < attributes.length; i++) {\n      const item = attributes[i]\n      item.primaryKey ? attributesPrimary.push(item) : attributesPrimaryNon.push(item)\n    }\n  }\n\n  private calcBoundingBox() {\n    const {\n      x, y,\n      width, height,\n    } = this\n\n    this.boundingBox = [\n      [x, y],\n      [x + width, y],\n      [x, y + height],\n      [x + width, y + height],\n    ]\n  }\n}\n","import { FabricObject } from '../../shared/fabric'\nimport { Table, Attribute, CanvasEvent, Id } from '../../../types'\nimport { DataTypeClassify, DataTypeDate, DataTypeNumber, DataTypeString } from '../../../types/enum'\nimport { imageMap } from '../../shared/image'\nimport { isBoolean, isNumber } from '../../utils/verify'\nimport { isLightColor } from '../../utils/color'\n\n/**\n * 待优化：\n * 1.属性超出画布无需渲染\n */\ninterface NodeInput extends Table {\n  x?: number\n  y?: number\n  width?: number\n  height?: number\n  bgC?: string\n  bdC?: string\n  quotePrimaryKey?: boolean\n  physicalTables?: boolean\n  manualChange?: boolean\n}\nexport class NodeRect extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  public width = 100\n  public height = 50\n  public titleHeight = 24\n  private fontSize = 16\n  private padding = 10\n\n  private attrHeight = 16\n  private borderWidth = 1\n  private datatypeIconWidth = 14\n\n  public x = 0\n  public y = 0\n  public id: Id\n  public enName: string\n  public cnName: string\n  public type: string\n  public attributes: Attribute[] = []\n  public attributesPrimary: Attribute[] = []\n  public attributesPrimaryNon: Attribute[] = []\n  private expandAttrs = []\n\n  private borderColor = '#000000'\n  private textColor = '#000000'\n  private bgColor: string\n  private hoverColor = '#477DE9'\n  private attrFocusStyle = {\n    color: '#fff',\n    backgroundColor: '#0000ff',\n  }\n\n  private quotePrimaryKey = false\n  private physicalTables = false\n  private manualChange = false\n\n  constructor(ctx: CanvasRenderingContext2D, input: NodeInput) {\n    super()\n    this.ctx = ctx\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  private analysisOptions(input: NodeInput) {\n    if (!input) return\n\n    const {\n      x,\n      y,\n      width,\n      height,\n      id,\n      enName,\n      cnName,\n      type,\n      attributes,\n      bgC, bdC,\n      quotePrimaryKey,\n      physicalTables,\n      manualChange,\n    } = input\n\n    if (isNumber(x)) this.x = x\n    if (isNumber(y)) this.y = y\n    if (id) this.id = id\n    if (enName) this.enName = enName\n    if (cnName) this.cnName = cnName\n    if (isNumber(width)) this.width = width\n    if (isNumber(height)) this.height = height\n    if (type) this.type = type\n    if (bgC) this.bgColor = bgC\n    if (bdC) this.borderColor = bdC\n    if (isBoolean(quotePrimaryKey)) this.quotePrimaryKey = quotePrimaryKey\n    if (isBoolean(physicalTables)) this.physicalTables = physicalTables\n    if (isBoolean(manualChange)) this.manualChange = manualChange\n  }\n\n  public updateOptions(input: NodeInput) {\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  public containsPoint(e: CanvasEvent, trigger = false) {\n    const {\n      x: ex, y: ey,\n    } = e\n    const { x, y, width: w, height: h, attrHeight, titleHeight, attributes } = this\n\n    // 是否节点触发\n    const linesForNode = this.getImageLines({\n      tl: { x, y: y },\n      tr: { x: x + w, y: y },\n      bl: { x, y: y + h },\n      br: { x: x + w, y: y + h },\n    })\n    const xpointsNode = this.findCrossPoints(ex, ey, linesForNode)\n    const isContainsNode = Boolean(xpointsNode % 2)\n    if (!isContainsNode) return false\n\n    return true\n    // const relativeH = ey - y\n\n    // // 属性触发\n    // const attrIndex = Math.floor((relativeH - titleHeight) / attrHeight)\n    // return attributes[attrIndex]?.id\n  }\n\n  public draw(input?: NodeInput) {\n    this.analysisOptions(input)\n    this.drawRect()\n  }\n\n  private drawRect() {\n    const {\n      ctx,\n      x, y,\n      width: w, height: h,\n      enName, cnName, type,\n      attributes,\n      bgColor, borderColor, textColor,\n      quotePrimaryKey, physicalTables,\n    } = this\n    // console.log(bgColor,\"bgColor\")\n    ctx.save()\n    ctx.lineWidth = 2.5\n    ctx.strokeStyle = borderColor || '#000000'\n    ctx.fillStyle = bgColor || '#ffffff'\n    ctx.drawRoundedRect(x, y, w, h, 0, 0, 0, 0, bgColor ? true : false, true, false, false)//绘制圆角矩形\n    ctx.restore()\n\n    //记录最大宽高\n    // if(x+w > this.maxWidth) this.maxWidth = x+w\n    // if(y+h > this.maxHeight) this.maxHeight = y+h\n    \n    // if(this.focusTarget.has(markInfo)) this._drawFocus(x, y, w, h)\n  }\n\n\n  private drawAttrRow(attrItem, curX, curY) {\n    const {\n      ctx,\n      attrHeight, padding, fontSize,\n      x, y, width: w, height: h,\n    } = this\n\n    curY += attrHeight\n\n    // 判断是否超出实体框\n    if (curY + 16 > h + y) return\n\n    // 判断是否超出可视范围\n    // if (!this.canvas.isVisible([[curX, curY], [curX + w, curY + fontSize]])) return\n\n\n    \n    return curY\n  }\n\n\n\n\n  private calcBoundingBox() {\n    const {\n      x, y,\n      width, height,\n    } = this\n\n    this.boundingBox = [\n      [x, y],\n      [x + width, y],\n      [x, y + height],\n      [x + width, y + height],\n    ]\n  }\n}\n","interface Point {\n  x: number;\n  y: number;\n}\n\n/**\n * 检测点是否在线段上\n * @param point 检测点\n * @param segments 端点集合\n * @param tolerance 容差\n * @returns \n */\nexport const isPointOnLineSegments = (\n  point: Point,\n  segments: Point[],\n  tolerance = 0\n): boolean | number => {\n  const { x, y } = point;\n  const xTolerance = tolerance || 0;\n  const yTolerance = tolerance || 0;\n  for (let i = 0; i < segments.length - 1; i++) {\n    const p1 = segments[i];\n    const p2 = segments[i + 1];\n    const a = p1.y - p2.y;\n    const b = p2.x - p1.x;\n    const c = p1.x * p2.y - p2.x * p1.y;\n    const distance = Math.abs(a * x + b * y + c) / Math.sqrt(a * a + b * b);\n    if (\n      distance <= xTolerance &&\n      (x >= Math.min(p1.x, p2.x) - xTolerance && x <= Math.max(p1.x, p2.x) + xTolerance) &&\n      (y >= Math.min(p1.y, p2.y) - yTolerance && y <= Math.max(p1.y, p2.y) + yTolerance)\n    ) {\n      return i;\n    }\n  }\n  return false;\n};\n","import { CanvasEvent, Id } from '../../../types'\nimport { FabricObject } from '../../shared/fabric'\nimport { isPointOnLineSegments } from '../../utils/fx'\nimport { isNumber } from '../../utils/verify'\n\nexport enum LineType {\n  foreignKey = 'foreignKey',\n}\nexport type NumLineTypes = 1 | 2 | 3 | 4\n\ninterface point {\n  x: number\n  y: number\n}\nexport type Points = point[]\n\ninterface LineInput {\n  id: Id,\n  pos: Points,\n  from: Id,\n  to: Id,\n  type?: LineType\n  numLineTypes?: NumLineTypes\n  lineWidth?: number\n  remark?: string\n  strokeStyle?: string\n}\n\nexport class LineErwin extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  public id: Id\n  public from: Id\n  public to: Id\n  public type: LineType\n  public numLineTypes: NumLineTypes\n  public pos: Points = []\n  public remark: string\n  public lineWidth = 1\n  private strokeStyle = '#000000'\n\n  constructor(ctx: CanvasRenderingContext2D, input: LineInput) {\n    super()\n    this.ctx = ctx\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  private analysisOptions(input) {\n    if (!input) return\n\n    const {\n      pos,\n      type,\n      from,\n      to,\n      id,\n      lineWidth,\n      numLineTypes,\n      strokeStyle,\n    } = input\n\n    if (id) this.id = id\n    if (from) this.from = from\n    if (to) this.to = to\n    if (pos) this.pos = pos\n    if (type) this.type = type\n    if (numLineTypes) this.numLineTypes = numLineTypes\n    if (lineWidth) this.lineWidth = lineWidth\n    if (strokeStyle) this.strokeStyle = strokeStyle\n  }\n\n  public updateOptions(input: LineInput) {\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  public draw(input?: LineInput) {\n    this.analysisOptions(input)\n\n    this.drawLine()\n    this.drawEnds()\n    this.drawNote()\n  }\n\n  public containsPoint(e: CanvasEvent, trigger: boolean) {\n    const {\n      pos,\n    } = this\n    \n    const isOnline = isNumber(isPointOnLineSegments(e, pos, 5))\n\n    return isOnline\n  }\n\n  public getIndexInPos (e) {\n    return isPointOnLineSegments(e, this.pos, 5)\n  }\n\n  private drawLine() {\n    const {\n      ctx,\n      strokeStyle, lineWidth,\n      type, pos,\n    } = this\n\n    ctx.save()\n\n    ctx.strokeStyle = strokeStyle\n    ctx.lineWidth = lineWidth\n\n    // 根据是否是外键判断是否需要绘制虚线\n    if (type === LineType.foreignKey) ctx.setLineDash([8, 5])\n\n    pos.forEach((pointItem, pointIdx) => {\n      if (pointIdx === 0) {\n        ctx.beginPath()\n        ctx.moveTo(pointItem.x, pointItem.y)\n      } else {\n        ctx.lineTo(pointItem.x, pointItem.y)\n      }\n    })\n\n    ctx.stroke()\n    ctx.restore()\n  }\n\n  private drawEnds() {\n    const {\n      ctx,\n      pos,\n      strokeStyle, lineWidth,\n      numLineTypes,\n    } = this\n    const w = 15, posLen = pos.length || 0\n\n    if (posLen < 2) return\n\n    ctx.save()\n    ctx.beginPath()\n    ctx.setLineDash([0, 0])\n    ctx.strokeStyle = strokeStyle\n    ctx.lineWidth = lineWidth\n\n    //绘制起点标志\n    //竖线\n    if (pos[0].x === pos[1].x) {\n      const dis = pos[1].y - pos[0].y\n      const y = Math.abs(dis) < 10 ? (dis < 0 ? pos[0].y - 1 : pos[0].y + 1) : dis < 0 ? pos[0].y - 10 : pos[0].y + 10\n      ctx.moveTo(pos[0].x - w / 2, y)\n      ctx.lineTo(pos[0].x + w / 2, y)\n    }\n    //横线\n    else {\n      const dis = pos[1].x - pos[0].x\n      const x = Math.abs(dis) < 10 ? (dis < 0 ? pos[0].x - 1 : pos[0].x + 1) : dis < 0 ? pos[0].x - 10 : pos[0].x + 10\n      ctx.moveTo(x, pos[0].y - w / 2)\n      ctx.lineTo(x, pos[0].y + w / 2)\n    }\n\n    //绘制终点标志\n    //竖线\n    if (pos[posLen - 2].x === pos[posLen - 1].x) {\n      const dis = pos[posLen - 1].y - pos[posLen - 2].y\n      const y = Math.abs(dis) < 10 ? (dis < 0 ? pos[posLen - 1].y + 1 : pos[posLen - 1].y - 1) : dis < 0 ? pos[posLen - 1].y + 10 : pos[posLen - 1].y - 10\n      ctx.moveTo(pos[posLen - 1].x - w / 2, y)\n      ctx.lineTo(pos[posLen - 1].x + w / 2, y)\n      ctx.stroke()\n      //绘制分叉\n      if ([1, 2].includes(numLineTypes)) {\n        ctx.moveTo(pos[posLen - 1].x - w / 2, pos[posLen - 1].y)\n        ctx.lineTo(pos[posLen - 1].x, y)\n        ctx.lineTo(pos[posLen - 1].x + w / 2, pos[posLen - 1].y)\n        ctx.stroke()\n      }\n      //绘制圆圈\n      if ([1, 4].includes(numLineTypes)) {\n        ctx.beginPath()\n        const arcX = pos[posLen - 1].x\n        const arcY = dis < 0 ? (y + w / 2) : (y - w / 2)\n        ctx.arc(arcX, arcY, (w - 2) / 2, 0, 360, false)\n        ctx.fillStyle = '#fff'\n        ctx.fill()\n        ctx.stroke()\n      }\n    }\n    //横线\n    else {\n      const dis = pos[posLen - 1].x - pos[posLen - 2].x\n      const x = Math.abs(dis) < 10 ? (dis < 0 ? pos[posLen - 1].x + 1 : pos[posLen - 1].x - 1) : dis < 0 ? pos[posLen - 1].x + 10 : pos[posLen - 1].x - 10\n      ctx.moveTo(x, pos[posLen - 1].y - w / 2)\n      ctx.lineTo(x, pos[posLen - 1].y + w / 2)\n      ctx.stroke()\n      //绘制分叉\n      if ([1, 2].includes(numLineTypes)) {\n        ctx.moveTo(pos[posLen - 1].x, pos[posLen - 1].y - w / 2)\n        ctx.lineTo(x, pos[posLen - 1].y)\n        ctx.lineTo(pos[posLen - 1].x, pos[posLen - 1].y + w / 2)\n        ctx.stroke()\n      }\n      //绘制圆圈\n      if ([1, 4].includes(numLineTypes)) {\n        ctx.beginPath()\n        const arcX = dis < 0 ? (x + w / 2) : (x - w / 2)\n        const arcY = pos[posLen - 1].y\n        ctx.arc(arcX, arcY, (w - 2) / 2, 0, 360, false)\n        ctx.fillStyle = '#fff'\n        ctx.fill()\n        ctx.stroke()\n      }\n    }\n\n    ctx.restore()\n  }\n\n  private drawNote() {\n    const {\n      ctx,\n      pos,\n      remark,\n    } = this\n\n    if (!remark) return\n\n    const middleIndex = Math.floor(pos.length / 2) - 1\n\n    let x, y, vertical\n    // 中间线是横线\n    if (pos[middleIndex].y === pos[middleIndex + 1].y) {\n      vertical = false\n      x = Math.abs(pos[middleIndex + 1].x - pos[middleIndex].x) / 2 + Math.min(pos[middleIndex + 1].x, pos[middleIndex].x)\n      y = pos[middleIndex].y - 10\n    }\n    // 中间线是竖线\n    else {\n      vertical = true\n      x = pos[middleIndex].x + 10\n      y = Math.abs(pos[middleIndex + 1].y - pos[middleIndex].y) / 2 + Math.min(pos[middleIndex + 1].y, pos[middleIndex].y) - ctx.measureText(remark).width / 2\n    }\n\n    // 绘制文字\n    ctx.textAlign = 'center'\n    // ctx.textBaseline = 'center'\n    vertical ? ctx.fillRowText(remark, x, y, 16, 16) : ctx.fillText(remark, x, y)\n  }\n\n  private calcBoundingBox() {\n    const {\n      pos,\n    } = this\n    const xPoints = [], yPoints = []\n    for (let i = 0; i < pos.length; i++) {\n      const it = pos[i]\n      xPoints.push(it.x)\n      yPoints.push(it.y)\n    }\n\n    this.boundingBox = [\n      [Math.min(...xPoints), Math.min(...yPoints)],\n      [Math.max(...xPoints), Math.max(...yPoints)],\n    ]\n  }\n}","/**\n * 解释下为什么这里存储的是reverse，而不是修改数据：\n *  在画布中一步操作一般会影响多个相关的数据，例如：节点坐标的改变会同步修改所有与之相关的连线。\n *  为了避免这种关联性带来的数据修改复杂性，不如直接缓存逆向执行的函数，避免了处理相关数据的繁琐。\n */\ntype Action = {\n  user?: string\n  time?: Date\n  targetId?: string\n  operationType?: string\n  reverse: () => any\n}\n\nexport class History {\n  private history: Action[]\n  private currentIndex: number\n  private maxSteps: number\n  private compressTime: number\n\n  constructor(maxSteps = 20) {\n    this.history = []\n    this.currentIndex = -1\n    this.maxSteps = maxSteps\n    // 可合并最大时差\n    this.compressTime = 200\n  }\n\n  public push(action: Action | Action[\"reverse\"]) {\n    // 格式化入参\n    if (typeof action === 'function') {\n      const reverse = action\n      action = {\n        reverse,\n      }\n    }\n    if (!action.time) action.time = new Date()\n\n    // 确保历史记录数组中只保留最新的操作记录\n    this.history.splice(this.currentIndex + 1)\n\n    // 压缩操作\n    // if (this.currentIndex >= 0) {\n    //   const prevAction = this.history[this.currentIndex]\n    //   if (this.canMerge(prevAction, action)) {\n    //     // 合并操作\n    //     prevAction.reverse = () => {\n    //       (action as Action).reverse()\n    //       // prevAction.reverse()\n    //     }\n    //     prevAction.time = action.time\n    //     return\n    //   }\n    // }\n\n    this.history.push(action)\n    this.currentIndex++\n\n    if (this.history.length > this.maxSteps) {\n      this.history.splice(0, 1)\n      this.currentIndex--\n    }\n  }\n\n  private canMerge(prevAction: Action, nextAction: Action) {\n    const timeDistance = Number(nextAction.time) - Number(prevAction.time)\n    const ifTimeLegal = timeDistance <= this.compressTime\n    const ifSameTarget = prevAction.targetId === nextAction.targetId\n    const ifSameOperation = prevAction.operationType === nextAction.operationType\n    return ifTimeLegal && ifSameTarget && ifSameOperation\n  }\n\n  private canUndo() {\n    return this.currentIndex >= 0\n  }\n\n  private canRedo() {\n    return this.currentIndex < this.history.length - 1\n  }\n\n  public undo() {\n    if (this.canUndo()) {\n      const action = this.history[this.currentIndex]\n      this.currentIndex--\n      return action\n    }\n    return null\n  }\n\n  public redo() {\n    if (this.canRedo()) {\n      this.currentIndex++\n      const action = this.history[this.currentIndex]\n      return action\n    }\n    return null\n  }\n\n  public clear() {\n    this.history = []\n    this.currentIndex = -1\n  }\n\n  public getHistory() {\n    return this.history\n  }\n\n  public getCurrentIndex() {\n    return this.currentIndex\n  }\n\n  public getMaxSteps() {\n    return this.maxSteps\n  }\n\n  public setMaxSteps(maxSteps: number) {\n    this.maxSteps = maxSteps\n    if (this.history.length > this.maxSteps) {\n      this.history.splice(0, this.history.length - this.maxSteps)\n      this.currentIndex -= this.history.length - this.maxSteps\n    }\n  }\n}\n","// 区间值\nexport const mathRange = (value: number, min = -Infinity, max = Infinity) => Math.max(Math.min(value, max), min)","import { FabricObject } from '../../shared/fabric'\nimport { Id, CanvasEvent, RectSprite } from '../../../types'\nimport { isNumber } from '../../utils/verify'\n\ninterface TextBaseInput {\n  id: Id\n  content: string\n  x: number\n  y: number\n  borderColor?: string\n  textColor?: string\n  bgColor?: string\n  borderWidth?: number\n}\n\nexport class TextBase extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  public x = 0\n  public y = 0\n  public width = 0\n  public height = 0\n  public borderColor = '#0C64EB'\n  public textColor = '#0C64EB'\n  public bgColor = '#D0E2FF'\n  public borderWidth = 1\n\n  public id: Id\n  public content: string\n\n  constructor(ctx: CanvasRenderingContext2D, input: TextBaseInput) {\n    super()\n    this.ctx = ctx\n    this.updateOptions(input)\n  }\n\n  private analysisOptions(input: TextBaseInput) {\n    if (!input) return\n\n    const {\n      x = 0,\n      y = 0,\n      id,\n      // width,\n      // height,\n      borderColor,\n      textColor,\n      bgColor,\n      borderWidth,\n      content,\n    } = input\n\n    if (isNumber(x)) this.x = x\n    if (isNumber(y)) this.y = y\n    // if (isNumber(width)) this.width = width\n    // if (isNumber(height)) this.height = height\n    if (id) this.id = id\n    if (borderColor) this.borderColor = borderColor\n    if (textColor) this.textColor = textColor\n    if (bgColor) this.bgColor = bgColor\n    if (isNumber(borderWidth)) this.borderWidth = borderWidth\n    if (content) this.content = content\n  }\n\n  public updateOptions(input: TextBaseInput) {\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  public containsPoint(e: CanvasEvent, trigger = false) {\n    const {\n      x: ex, y: ey,\n    } = e\n    const { x, y, width, height } = this\n    \n    return ex >= x && ex <= x + width && ey >= y && ey <= y + height\n  }\n\n  public draw(input?: TextBaseInput) {\n    this.updateOptions(input)\n\n    const {\n      ctx,\n      content,\n      x, y,\n      textColor,\n    } = this\n    ctx.save()\n    ctx.textBaseline = 'top'\n    ctx.fillStyle = textColor\n    ctx.fillText(content, x, y)\n    ctx.restore()\n  }\n\n  private calcBoundingBox() {\n    const {\n      x, y,\n      ctx,\n      content,\n    } = this\n    const textMetrics = ctx.measureText(content)\n    const width = this.width = textMetrics.width\n    const height = this.height = textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent\n    this.boundingBox = [\n      [x, y],\n      [x + width, y],\n      [x, y + height],\n      [x + width, y + height],\n    ]\n  }\n}\n","import { FabricObject } from '../../shared/fabric'\nimport { CanvasEvent } from '../../../types'\nimport { isBoolean } from '../../utils/verify'\nimport { isLightColor } from '../../utils/color'\n\n/**\n * 待优化：\n * 1.属性超出画布无需渲染\n */\ninterface NodeInput {\n  x?: number\n  y?: number\n  width?: number\n  height?: number\n  bdC?: string\n  targetWidth?: number\n  targetBgColor?: string\n  targetBdColor?: string\n  lineWidth?: number\n}\nexport class FrameResize extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  public width = 100\n  public height = 50\n  public x = 0\n  public y = 0\n  private lineWidth = 1\n  private borderColor = 'blue'\n\n  private targetWidth = 6\n  private targetBgColor = '#FFFFFF'\n  private targetBdColor = '#B4B4B4'\n\n  constructor(ctx: CanvasRenderingContext2D, input: NodeInput) {\n    super()\n    this.ctx = ctx\n    this.updateOptions(input)\n  }\n\n  private analysisOptions(input: NodeInput) {\n    if (!input) return\n\n    const {\n      x = 0,\n      y = 0,\n      width,\n      height,\n      targetBgColor, targetBdColor,\n      bdC,\n      lineWidth,\n    } = input\n\n    if (x) this.x = x\n    if (y) this.y = y\n    if (width) this.width = width\n    if (height) this.height = height\n    if (targetBgColor) this.targetBgColor = targetBgColor\n    if (targetBdColor) this.targetBdColor = targetBdColor\n    if (bdC) this.borderColor = bdC\n    if (lineWidth) this.lineWidth = lineWidth\n  }\n\n  public updateOptions(input: NodeInput) {\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  public containsPoint(e: CanvasEvent, trigger = false) {\n    return false\n  }\n\n  public draw(input?: NodeInput) {\n    this.updateOptions(input)\n\n    this.drawBorder()\n    this.drawTargets()\n  }\n\n  private drawBorder () {\n    const {\n      ctx,\n      borderColor, lineWidth,\n      x, y, width, height,\n    } = this\n\n    ctx.save()\n    ctx.lineWidth = lineWidth\n    ctx.strokeStyle = borderColor\n    ctx.strokeRect(x, y, width, height)\n    ctx.restore()\n  }\n\n  private drawTargets () {\n    const {\n      ctx,\n      targetBdColor, targetBgColor, targetWidth,\n      x, y, width, height,\n    } = this\n\n    const halfTargetWidth = targetWidth / 2\n    const fixX = x - halfTargetWidth\n    const fixY = y - halfTargetWidth\n\n    ctx.save()\n    ctx.strokeStyle = targetBdColor\n    ctx.fillStyle = targetBgColor\n\n    ctx.fillRect(fixX, fixY, targetWidth, targetWidth)\n    ctx.fillRect(fixX, fixY + height / 2, targetWidth, targetWidth)\n    ctx.fillRect(fixX, fixY + height, targetWidth, targetWidth)\n    ctx.fillRect(fixX + width / 2, fixY, targetWidth, targetWidth)\n    ctx.fillRect(fixX + width / 2, fixY + height, targetWidth, targetWidth)\n    ctx.fillRect(fixX + width, fixY, targetWidth, targetWidth)\n    ctx.fillRect(fixX + width, fixY + height / 2, targetWidth, targetWidth)\n    ctx.fillRect(fixX + width, fixY + height, targetWidth, targetWidth)\n\n    ctx.strokeRect(fixX, fixY, targetWidth, targetWidth)\n    ctx.strokeRect(fixX, fixY + height / 2, targetWidth, targetWidth)\n    ctx.strokeRect(fixX, fixY + height, targetWidth, targetWidth)\n    ctx.strokeRect(fixX + width / 2, fixY, targetWidth, targetWidth)\n    ctx.strokeRect(fixX + width / 2, fixY + height, targetWidth, targetWidth)\n    ctx.strokeRect(fixX + width, fixY, targetWidth, targetWidth)\n    ctx.strokeRect(fixX + width, fixY + height / 2, targetWidth, targetWidth)\n    ctx.strokeRect(fixX + width, fixY + height, targetWidth, targetWidth)\n\n\n\n    ctx.restore()\n  }\n\n  private calcBoundingBox() {\n    const {\n      x, y,\n      width, height,\n    } = this\n\n    this.boundingBox = [\n      [x, y],\n      [x + width, y],\n      [x, y + height],\n      [x + width, y + height],\n    ]\n  }\n}\n","import { FabricObject } from '../../shared/fabric'\nimport { CanvasEvent } from '../../../types'\n\n/**\n * 待优化：\n * 1.属性超出画布无需渲染\n */\ninterface NodeInput {\n  x?: number\n  y?: number\n  width?: number\n  height?: number\n  bdC?: string\n}\nexport class FrameHover extends FabricObject {\n  private ctx: CanvasRenderingContext2D\n  public width = 100\n  public height = 50\n  public x = 0\n  public y = 0\n  private borderColor = 'blue'\n\n  constructor(ctx: CanvasRenderingContext2D, input: NodeInput) {\n    super()\n    this.ctx = ctx\n    this.updateOptions(input)\n  }\n\n  private analysisOptions(input: NodeInput) {\n    if (!input) return\n\n    const {\n      x = 0,\n      y = 0,\n      width,\n      height,\n      bdC,\n    } = input\n\n    if (x) this.x = x\n    if (y) this.y = y\n    if (width) this.width = width\n    if (height) this.height = height\n    if (bdC) this.borderColor = bdC\n  }\n\n  public updateOptions(input: NodeInput) {\n    this.analysisOptions(input)\n    this.calcBoundingBox()\n  }\n\n  public containsPoint(e: CanvasEvent, trigger = false) {\n    return false\n  }\n\n  public draw(input?: NodeInput) {\n    this.updateOptions(input)\n\n    this.drawBorder()\n  }\n\n  private drawBorder() {\n    const {\n      ctx,\n      borderColor,\n      x, y, width, height,\n    } = this\n\n    ctx.save()\n    ctx.strokeStyle = borderColor\n    ctx.strokeRect(x, y, width, height)\n    ctx.restore()\n  }\n\n  private calcBoundingBox() {\n    const {\n      x, y,\n      width, height,\n    } = this\n\n    this.boundingBox = [\n      [x, y],\n      [x + width, y],\n      [x, y + height],\n      [x + width, y + height],\n    ]\n  }\n}\n","export enum EditType {\n  // 实体\n  addNode = 'addNode',\n  // 主键\n  primaryKey = 'primaryKey',\n  // 非主键\n  foreignKey = 'foreignKey',\n  // 分支\n  branchLine = 'branchLine',\n  // 框\n  addMark = 'addMark',\n  // 备注\n  addNote = 'addNote',\n  // 拷贝\n  copy = 'copy',\n}\n\nexport enum TargetDirection {\n  NONE = '',\n  LT = 'LT',\n  TM = 'TM',\n  RT = 'RT',\n  LM = 'LM',\n  RM = 'RM',\n  LB = 'LB',\n  BM = 'BM',\n  RB = 'RB',\n}\n\nexport enum Cursor {\n  default = 'default',\n  none = 'none',\n  \n  wait = 'wait',\n  progress = 'progress',\n\n  crosshair = 'crosshair',\n  cell = 'cell',\n  text = 'text',\n\n  move = 'move',\n  colResize = 'col-resize',\n  rowResize = 'row-resize',\n  ewResize = 'ew-resize',\n  nsResize = 'ns-resize',\n  neswResize = 'nesw-resize',\n  nwseResize = 'nwse-resize',\n\n  copy = 'copy',\n  help = 'help',\n\n  grab = 'grab',\n  grabbing = 'grabbing',\n  pointer = 'pointer',\n\n  notAllowed = 'not-allowed',\n  zoomIn = 'zoom-in',\n  zoomOut = 'zoom-out',\n  contextMenu = 'context-menu',\n}\n","import { EditType, Cursor, TargetDirection } from '../shared/enum'\nimport { NodeErwin } from '../../core/materials/node'\nimport { NodeRect } from '../../core/materials/node'\nimport { LineErwin } from '../../core/materials/line'\nimport { TextBase } from '../../core/materials/text'\nimport { isPointOnLineSegments } from '../../core/utils/fx'\nimport type { Erg } from '../index'\n\n/**\n   * 是否到达八点框\n   */\nconst ifAnchor = (target: NodeErwin, canvasEv) => {\n  // 是否八点框触发\n  const { x, y, width, height } = target\n  const middleX = x + width / 2\n  const middleY = y + height / 2\n  const fullX = x + width\n  const fullY = y + height\n  const tolerance = 5\n  let targetDirection = TargetDirection.NONE\n\n  if (Math.abs(x - canvasEv.x) <= tolerance && Math.abs(y - canvasEv.y) <= tolerance) targetDirection = TargetDirection.LT\n  else if (Math.abs(middleX - canvasEv.x) <= tolerance && Math.abs(y - canvasEv.y) <= tolerance) targetDirection = TargetDirection.TM\n  else if (Math.abs(fullX - canvasEv.x) <= tolerance && Math.abs(y - canvasEv.y) <= tolerance) targetDirection = TargetDirection.RT\n  else if (Math.abs(x - canvasEv.x) <= tolerance && Math.abs(middleY - canvasEv.y) <= tolerance) targetDirection = TargetDirection.LM\n  else if (Math.abs(fullX - canvasEv.x) <= tolerance && Math.abs(middleY - canvasEv.y) <= tolerance) targetDirection = TargetDirection.RM\n  else if (Math.abs(x - canvasEv.x) <= tolerance && Math.abs(fullY - canvasEv.y) <= tolerance) targetDirection = TargetDirection.LB\n  else if (Math.abs(middleX - canvasEv.x) <= tolerance && Math.abs(fullY - canvasEv.y) <= tolerance) targetDirection = TargetDirection.BM\n  else if (Math.abs(fullX - canvasEv.x) <= tolerance && Math.abs(fullY - canvasEv.y) <= tolerance) targetDirection = TargetDirection.RB\n\n  return targetDirection\n}\n\n\n\nexport const useMouseMove = function (this: Erg, e, canvasEv) {\n  /**\n   * 移动备注框\n   */\n  const moveMarkRect = () => {\n    const {\n      eventObj,\n    } = this\n    const offsetOfMove = {\n      x: canvasEv.x - eventObj.targetOffsetX - eventObj.target.x,\n      y: canvasEv.y - eventObj.targetOffsetY - eventObj.target.y,\n    }\n    const newLoc = {\n      x: eventObj.target.x + offsetOfMove.x,\n      y: eventObj.target.y + offsetOfMove.y,\n    }\n\n    this.markMap.get(eventObj.target.id).updateOptions(newLoc)\n    this.emit('mark:move', this.markMap.get(eventObj.target.id))\n    this.update()\n  }\n  \n\n  /**\n   * 移动备注文字\n   */\n  const moveMarkText = () => {\n    const {\n      eventObj,\n    } = this\n\n    const offsetOfMove = {\n      x: canvasEv.x - eventObj.targetOffsetX - eventObj.target.x,\n      y: canvasEv.y - eventObj.targetOffsetY - eventObj.target.y,\n    }\n\n    const newLoc = {\n      x: eventObj.target.x + offsetOfMove.x,\n      y: eventObj.target.y + offsetOfMove.y,\n    }\n    this.noteMap.get(eventObj.target.id).updateOptions(newLoc)\n\n    this.emit('note:move', eventObj.target)\n    this.update()\n  }\n\n  /**\n   * 修改实体尺寸\n   */\n  const resizeNode = () => {\n    const {\n      eventObj,\n    } = this\n    // eventObj.target.manualChange = true\n    const {x, y} = canvasEv\n    if(eventObj.target.type === 'mark'){\n      this.resizeNode(x, y, eventObj,null)\n    }else{\n      this.resizeNode(x, y, eventObj)\n    }\n    \n    this.update()\n  }\n\n  /**\n   * 移动实体\n   */\n  const moveNode = () => {\n    const {\n      focusTarget,\n      eventObj,\n      nodeRelatedLineMap,\n    } = this\n\n    const offsetOfMove = {\n      x: canvasEv.x - eventObj.targetOffsetX - eventObj.target.x,\n      y: canvasEv.y - eventObj.targetOffsetY - eventObj.target.y,\n    }\n\n    focusTarget.forEach(focusItem => {\n      const nodeNewLoc = {\n        x: focusItem.x + offsetOfMove.x,\n        y: focusItem.y + offsetOfMove.y,\n      }\n\n      // 节点相关线段移动\n      if (nodeRelatedLineMap.has(focusItem.id)) {\n        const involveLines = [...nodeRelatedLineMap.get(focusItem.id).from, ...nodeRelatedLineMap.get(focusItem.id).to]\n        involveLines.forEach(line => {\n          line.from === line.to\n            ? this.moveLineForSameNode(line, { target: focusItem })\n            : this.moveLineForNode(line, { target: focusItem }, nodeNewLoc)\n        })\n      }\n\n      this.nodeMap.get(focusItem.id).updateOptions(nodeNewLoc)\n      this.emit('node:move', focusItem)\n    })\n\n    this.update()\n  }\n\n  /**\n   * 移动连线\n   */\n  const moveLine = () => {\n    const {\n      eventObj,\n    } = this\n\n    const idx = eventObj.target.getIndexInPos(eventObj.lastEvLoc)\n    eventObj.targetLineStartPointIdx = idx\n    eventObj.lastEvLoc = canvasEv\n    if (idx === false) return\n    this.moveLineForLine(eventObj, canvasEv)\n    this.update()\n  }\n\n  /**\n   * 移动画布\n   */\n  const moveCanvas = () => {\n    this.canvas.setTranslate(e)\n    this.canvas.clearEventCanvas()\n    const graphTranslate = this.canvas.getTranslate()\n    this.emit('graph:move', graphTranslate)\n    this.update()\n  }\n\n  /**\n   * 改变指针样式\n   */\n  const changeMouseCursor = () => {\n    const {\n      editType,\n      renderElements,\n    } = this\n\n    const cursorMap = {\n      [EditType.addNode]: Cursor.cell,\n      [EditType.primaryKey]: Cursor.crosshair,\n      [EditType.foreignKey]: Cursor.crosshair,\n      [EditType.branchLine]: Cursor.crosshair,\n      [EditType.addMark]: Cursor.cell,\n      [EditType.addNote]: Cursor.text,\n      [EditType.copy]: Cursor.copy,\n    }\n\n    const cursorState = cursorMap[editType]\n    // 有指定操作：\n    if (cursorState) return this.canvas.eventEl.style.cursor = cursorState || Cursor.default\n\n    let hoverTarget = null, cursor = Cursor.default\n\n    // 无指定操作：到达热点位置变换鼠标状态\n    for (let i = renderElements.length - 1; i >= 0; i--) {\n      const el = renderElements[i]\n      const isTarget = el.containsPoint(canvasEv) || ifAnchor(el, canvasEv)\n      if (isTarget) {\n        hoverTarget = el\n        \n        cursor = isTarget === TargetDirection.LT ? Cursor.nwseResize\n          : isTarget === TargetDirection.TM ? Cursor.nsResize\n          : isTarget === TargetDirection.RT ? Cursor.neswResize\n          : isTarget === TargetDirection.LM ? Cursor.ewResize\n          : isTarget === TargetDirection.RM ? Cursor.ewResize\n          : isTarget === TargetDirection.LB ? Cursor.neswResize\n          : isTarget === TargetDirection.BM ? Cursor.nsResize\n          : isTarget === TargetDirection.RB ? Cursor.nwseResize\n          : Cursor.move\n        break\n      }\n    }\n\n    // 无指定操作：未到达热点位置\n    this.hoverTarget = hoverTarget\n    this.canvas.eventEl.style.cursor = cursor\n    this.updateEventCanvas()\n  }\n\n  /**\n   * 移动元素\n   */\n  const moveElement = () => {\n    const {\n      focusTarget,\n      eventObj,\n    } = this\n\n    const isResizeNode = !!eventObj.targetDirection\n    const isNodeMove = eventObj.target instanceof NodeErwin\n    const isLineMove = eventObj.target instanceof LineErwin\n    const isMarkMove = eventObj.target instanceof NodeRect\n    const isNoteMove = eventObj.target instanceof TextBase\n    if (isResizeNode) return resizeNode()\n    if (isNodeMove) return moveNode()\n    if (isLineMove) return moveLine()\n    if (isMarkMove) return moveMarkRect()\n    if (isNoteMove) return moveMarkText()\n  }\n  \n  return {\n    changeMouseCursor,\n    moveCanvas,\n    moveElement,\n  }\n}\n\nexport const useMouseDown = function (this: Erg, e, canvasEv) {\n  const { x: evX, y: evY } = canvasEv\n\n  const execTask = () => {\n    const {editType, defaultWidth, defaultHeight} = this\n    switch (editType) {\n      case EditType.copy:\n        const distanse = {\n          x: evX - this.copyTarget?.[0]?.x,\n          y: evY - this.copyTarget?.[0]?.y,\n        }\n\n        const fixLocNodes = this.copyTarget.filter(it => !!it.attributes).map(node => {\n          node.x = node.x + distanse.x\n          node.y = node.y + distanse.y\n          return node\n        })\n\n        this.externalFn?.handlePaste(fixLocNodes)\n        this.editType = ''\n        this.canvas.eventEl.style.cursor = Cursor.default\n        this.update()\n        break\n      case EditType.addNode:\n        const newNode = Object.assign(this.addNodeDefaultAttr, {\n          x: evX - defaultWidth / 2, y: evY - defaultHeight / 2,\n          width: defaultWidth,\n          height: defaultHeight,\n        })\n\n        this.externalFn.addNode(newNode)\n        this.addNodeDefaultAttr = {}\n        this.editType = ''\n        this.canvas.eventEl.style.cursor = Cursor.default\n        this.update()\n        break\n      case EditType.addMark:\n        const newMark = {\n          key: this.createKey(),\n          x: evX, y: evY,\n          width: defaultWidth,\n          height: defaultHeight,\n          type: 'mark',\n        }\n\n        this.externalFn.addMark(newMark)\n        this.editType = ''\n        this.canvas.eventEl.style.cursor = Cursor.default\n        this.update()\n        break\n      case EditType.addNote:\n        const newNote = {\n          key: this.createKey(),\n          x: evX, y: evY,\n          text: '',\n          type: 'note',\n        }\n\n        this.externalFn.addNote(newNote)\n        this.editType = ''\n        this.canvas.eventEl.style.cursor = Cursor.default\n        break\n      // case EditType.primaryKey:\n\n      //   break\n      // case EditType.foreignKey:\n\n      //   break\n      // case EditType.branchLine:\n\n      //   break\n    \n      default:\n        break\n    }\n  }\n\n  const setEventTarget = (e: MouseEvent) => {\n    const {\n      metaKey, shiftKey, ctrlKey,\n    } = e\n    const {\n      renderElements,\n      focusTarget,\n      eventObj,\n    } = this\n\n    if (!ctrlKey && !metaKey) focusTarget.clear()\n\n    this.canvas.eventEl.style.cursor = Cursor.grabbing\n    for (let i = 0; i < renderElements.length; i++) {\n      const el = renderElements[i]\n      const targetDirection = ifAnchor(el, canvasEv)\n      const isTarget = el.containsPoint(canvasEv, false) || !!targetDirection\n      if (!isTarget) continue\n\n      eventObj.target = el\n      if (el instanceof LineErwin) {\n        focusTarget.clear()\n        eventObj.lastEvLoc = canvasEv\n      }\n      else if (el instanceof NodeErwin || el instanceof TextBase || el instanceof NodeRect) {\n        eventObj.targetOffsetX = canvasEv.x - el.x\n        eventObj.targetOffsetY = canvasEv.y - el.y\n        eventObj.targetDirection = targetDirection\n      }\n      focusTarget.add(el)\n      break\n    }\n    \n    this.update()\n  }\n  \n  return {\n    execTask,\n    setEventTarget,\n  }\n}\n\nexport const useMouseUp = function (this: Erg, e, canvasEv) {\n\n  const resetMouseState = () => {\n    this.canvas.eventEl.style.cursor = Cursor.default\n    this.eventObj = {\n      target: null,\n      targetDirection: TargetDirection.NONE,\n      targetOffsetX: 0,\n      targetOffsetY: 0,\n    }\n  }\n  return {\n    resetMouseState,\n  }\n}","import { EventCenter } from '../core/shared/event'\nimport { LockIcon } from '../core/materials/icon/index'\nimport { Canvas, BackgroundType } from '../core/shared/canvas'\nimport { History } from '../core/shared/history'\nimport { mathRange } from '../core/utils/math'\nimport { nextTick } from '../core/utils/dom'\nimport type { CanvasEvent, Id } from '../types/index'\n\nimport { NodeErwin as Node, NodeErwin } from '../core/materials/node'\nimport { NodeRect  } from '../core/materials/node'\nimport { LineErwin } from '../core/materials/line/line-erwin'\nimport { TextBase } from '../core/materials/text'\nimport { FrameResize, FrameHover } from '../core/materials/frame'\nimport { useMouseMove, useMouseDown, useMouseUp } from './hooks/event'\n\nimport { EditType, TargetDirection, Cursor } from './shared/enum'\nimport { Plugins, PluginsEnum } from '../plugins'\n\nimport { cloneDeep } from 'lodash-es'\n\nenum Color {\n  primary = 'blue',\n  border = '#000000', \n}\n\ninterface RelatedLineItem {\n  from: Set<LineErwin>,\n  to: Set<LineErwin>,\n}\nexport class Erg extends EventCenter {\n  private el: HTMLElement\n  private canvas: Canvas\n  private ctx: CanvasRenderingContext2D\n  private cacheCtx: CanvasRenderingContext2D\n\n  public _data = {\n    nodeDataArray: [],\n    linkDataArray: [],\n    markDataArray: [],\n    noteDataArray: [],\n  }\n  public nodeMap: Map<Id, Node>\n  public lineMap: Map<Id, LineErwin>\n  public noteMap: Map<Id, TextBase>\n  public markMap: Map<Id, NodeRect>\n  private nodeRelatedLineMap: Map<Node['id'], RelatedLineItem>\n\n  // 优化：缓存页面渲染元素，避免在交互时循环全部数据\n\n  private renderElements: Array<Node | LineErwin | TextBase  | NodeRect>\n\n\n  public eventFn: Record<string, string>\n  public externalFn: Record<string, () => any>\n  public editType: EditType\n  public copyTarget: any\n\n  // 缓存事件对象\n  public eventObj = {\n    target: null,\n    // 节点\n    targetDirection: TargetDirection.NONE,\n    targetOffsetX: 0,\n    targetOffsetY: 0,\n    // 连线\n    targetLineStartPointIdx: 0,\n    lastEvLoc: {x: 0, y: 0},\n  }\n\n  private plugins: Plugins\n  private useThumbnail: boolean\n  private useRightMenu = false\n  private rightMenuConfig = []\n\n  private fontFamily: string\n  private bufferWidth = 40\n  private chooseTargets = []\n  private imgList = {}\n  private editable = 1 // 1可编辑/2只读(可移动缩放等)/3只读(不可任何操作)\n  // private thumbnailWidth = 150\n  private showLockIcon = true\n\n  // 节点默认配置\n  private defaultWidth = 100\n  private defaultHeight = 50\n\n  private focusTarget = new Set<Node | LineErwin | NodeRect>()\n  private hoverTarget: Node | LineErwin | NodeRect\n  \n  private useAttrFocus = false\n  private expandAttrs = []\n\n  private _bindEventMousedown: () => any\n  private _bindEventMousemove: () => any\n  private _bindEventMouseup: () => any\n  private _bindEventResize: () => any\n  private _bindEventWheel: () => any\n  private _bindEventContextmenu: () => any\n  private _bindEventUndo: () => any\n  private _bindEventRedo: () => any\n\n  private history: History\n\n  constructor(options) {\n    super()\n    this.analysisOptions(options)\n    this.mountCanvas()\n    this.mountCanvasEvents()\n    this.mountPlugins()\n    this.update()\n  }\n\n\n  //初始化数据方法\n  private analysisOptions(options) {\n    const { el, data, externalFn, editable, fontFamily, rightMenu, useRightMenu = false, useAttrFocus = false, useThumbnail = false } = options\n    this.el = el\n    this.editable = editable || 1\n    this.fontFamily = fontFamily\n    this.rightMenuConfig = rightMenu\n    // 是否使用右键菜单\n    this.useRightMenu = useRightMenu\n    // 属性是否可点击\n    this.useAttrFocus = useAttrFocus\n    this.useThumbnail = useThumbnail\n\n    //拷贝外部方法指针\n    /**\n     * options[addNode]: 创建实体通知方法\n     *  @param val {Object}, 完整的信息\n     * \n     * options[delNode]: 删除实体通知方法\n     *  @param id {Id}, 实体的id\n     * \n     * options[addLine]: 创建线通知方法\n     *  @param val {Object}, 完整的信息\n     * \n     * options[delLine]: 删除线通知方法\n     *  @param from {Id}, to {Id}, 线的唯一标识(from, to)\n     * \n     * options[addFilter]: 创建过滤器通知方法\n     *  @param val {Object}, 完整的信息\n     * \n     * options[delFilter]: 删除过滤器通知方法\n     *  @param id {Id}, 过滤器的id\n     * \n     * options[$message]: 删除过滤器通知方法\n     *  @param val {Object}, 同el-message参数\n     * \n     * options[handleCopy]: 拷贝通知方法\n     *  @param val {Object}, 拷贝的对象\n     *  @param prev {Object}, 上一个拷贝对象\n     * \n     * options[handlePaste]: 粘贴通知方法\n     *  @param val {Object}, 拷贝的对象\n     */\n    this.externalFn = externalFn\n  }\n\n  public destroy() {\n    this.unmountPlugins()\n    this.unmountCanvasEvents()\n    this.canvas.destroy()\n  }\n\n  private mountCanvas() {\n    this.canvas = new Canvas({\n      mountEl: this.el,\n      backgroundType: BackgroundType.Checker\n    })\n    this.cacheCtx = this.canvas.cacheCtx\n  }\n\n  private mountPlugins () {\n    // 初始化历史队列\n    this.history = new History()\n  \n    this.plugins = new Plugins()\n\n    if (this.useThumbnail) {\n      // 初始化全景缩略图\n      this.plugins.use(PluginsEnum.Thumbnail, {\n        mountEl: this.el,\n        mainCanvas: this.canvas,\n      })\n    }\n\n    if (this.useRightMenu) {\n      // 初始化右键菜单\n      this.plugins.use(PluginsEnum.RightMenu, this.el, this.rightMenuConfig)\n    }\n  }\n\n  private unmountPlugins () {\n    this.plugins.destroy()\n  }\n\n  private mountCanvasEvents() {\n    this._bindEventMousedown = this.onMouseDown.bind(this)\n    this._bindEventMousemove = this.onMouseMove.bind(this)\n    this._bindEventMouseup = this.onMouseUp.bind(this)\n    this._bindEventResize = this.onResize.bind(this)\n    this._bindEventWheel = this.onWheel.bind(this)\n    this._bindEventContextmenu = this.onContextmenu.bind(this)\n    this._bindEventUndo = this.onUndo.bind(this)\n    this._bindEventRedo = this.onRedo.bind(this)\n\n    this.canvas.on('canvas:resize', this._bindEventResize)\n    this.canvas.on('canvas:wheel', this._bindEventWheel)\n    this.canvas.on('canvas:mouseup', this._bindEventMouseup)\n    this.canvas.on('canvas:mousedown', this._bindEventMousedown)\n    this.canvas.on('canvas:mousemove', this._bindEventMousemove)\n    this.canvas.on('canvas:contextmenu', this._bindEventContextmenu)\n    this.canvas.on('canvas:undo', this._bindEventUndo)\n    this.canvas.on('canvas:redo', this._bindEventRedo)\n  }\n\n  private unmountCanvasEvents() {\n    this.canvas.off('canvas:resize', this._bindEventResize)\n    this.canvas.off('canvas:wheel', this._bindEventWheel)\n    this.canvas.off('canvas:mouseup', this._bindEventMouseup)\n    this.canvas.off('canvas:mousedown', this._bindEventMousedown)\n    this.canvas.off('canvas:mousemove', this._bindEventMousemove)\n    this.canvas.off('canvas:contextmenu', this._bindEventContextmenu)\n    this.canvas.off('canvas:undo', this._bindEventUndo)\n    this.canvas.off('canvas:redo', this._bindEventRedo)\n  }\n\n  private onUndo(e: KeyboardEvent) {\n    const action = this.history.undo()\n    action?.reverse()\n    if (!action) console.warn('撤无可撤')\n  }\n\n  private onRedo(e: KeyboardEvent) {\n    const action = this.history.redo()\n    action?.reverse()\n    if (!action) console.warn('恢无可恢')\n  }\n\n  private onMouseUp(e: MouseEvent, canvasEv: CanvasEvent) {\n    const { resetMouseState } = useMouseUp.call(this, e, canvasEv)\n    resetMouseState()\n  }\n\n  private onMouseDown(e: MouseEvent, canvasEv: CanvasEvent) {\n    const { editType } = this\n    const { execTask, setEventTarget } = useMouseDown.call(this, e, canvasEv)\n\n\n    // 有指定的操作任务：执行任务（添加节点/添加连线/....）\n    if (editType) return execTask()\n    \n    // 无指定的操作任务：查找事件触发对象\n    setEventTarget(e)\n  }\n\n  private onMouseMove(e: MouseEvent, canvasEv: CanvasEvent) {\n    const {\n      canvas,\n      eventObj,\n    } = this\n    const { changeMouseCursor, moveCanvas, moveElement } = useMouseMove.call(this, e, canvasEv)\n\n    const isJustMove = !canvas.isMouseDown\n    const isMoveCanvas = canvas.isMouseDown && !eventObj.target\n    const isMoveElement = canvas.isMouseDown && eventObj.target\n    \n    if (isJustMove) return changeMouseCursor()\n    if (isMoveCanvas) return moveCanvas()\n    if (isMoveElement) {\n      // 加入历史堆栈\n      const copyFocusTarget = [...this.focusTarget].map(it => {\n        const originObject = {\n          target: it,\n          originValue: {}\n        }\n        if (it.x) originObject.originValue.x = it.x\n        if (it.y) originObject.originValue.y = it.y\n        if (it.width) originObject.originValue.width = it.width\n        if (it.height) originObject.originValue.height = it.height\n        if (it.pos) originObject.originValue.pos = cloneDeep(it.pos)\n        return originObject\n      })\n        this.history.push(() => {\n        // 缓存move事件\n        // const target = this.nodeMap.get(eventObj.target.id) || this.lineMap.get(eventObj.target.id)\n        // Object.assign(this.eventObj, {\n        //   target,\n        //   targetDirection: eventObj.targetDirection,\n        //   targetLineStartPointIdx: eventObj.targetLineStartPointIdx,\n        //   lastEvLoc: eventObj.lastEvLoc,\n        //   targetOffsetX: eventObj.targetOffsetX,\n        //   targetOffsetY: eventObj.targetOffsetY,\n        // })\n\n        // this.focusTarget.clear()\n        // copyFocusTarget.map(i => this.focusTarget.add(i))\n        // moveElement()\n\n        // 设置聚焦\n          this.focusTarget.clear()\n        copyFocusTarget.map(i => this.focusTarget.add(i.target))\n        // 逆向操作数据\n        for (let i = 0; i < copyFocusTarget.length; i++) {\n          const {target, originValue} = copyFocusTarget[i]\n          target.updateOptions(originValue)\n          if (target instanceof NodeErwin) this.emit('node:move', target)\n          if (target instanceof LineErwin) this.emit('line:move', target)\n        }\n        this.update()\n        })\n\n      return moveElement()\n    }\n  }\n\n  private onContextmenu(e: MouseEvent) {\n    if (!this.useRightMenu) return\n    const { clientX, clientY, view: { innerWidth, innerHeight } } = e\n    this.plugins.get(PluginsEnum.RightMenu).show({\n      top: clientY,\n      left: clientX,\n      innerWidth: innerWidth,\n      innerHeight: innerHeight,\n    })\n\n    this.emit('graph:contextmenu', e)\n  }\n\n  private onWheel(e: WheelEvent) {\n    const {\n      deltaY,\n      deltaX,\n      ctrlKey,\n      shiftKey,\n    } = e\n    // console.log(deltaY);\n    const wheelConfirm = Math.abs(deltaY) > 2 || Math.abs(deltaX) > 2\n\n    if (!wheelConfirm) return\n    \n    // 缩放\n    if (ctrlKey) {\n      const zoomRate = this.canvas.zoomRate\n      // const step = deltaY > 0 ? 10 : -10\n      const calcRatio = Math.floor(mathRange(zoomRate * 100 + deltaY, 10, 200))\n      this.zoom(calcRatio)\n    }\n    // 平移\n    else {\n      const translate = this.canvas.getTranslate()\n      this.canvas.setTranslate({\n        x: translate.x - deltaX,\n        y: translate.y - deltaY,\n      } as MouseEvent)\n      this.update()\n    }\n  }\n\n  private onResize() {\n    this.update()\n  }\n\n  /**\n   * 实例化节点信息\n   * @description 该方法调用后：nodeMap/attrMap可访问\n   * @returns \n   */\n  private initNodes() {\n    const {\n      _data: {\n        nodeDataArray: nodes\n      },\n      nodeRelatedLineMap,\n    } = this\n    if (!nodes?.length) return\n    for (let i = 0; i < nodes.length; i++) {\n      const it = nodes[i]\n      let node = this.nodeMap.get(it.key)\n      if (!node) {\n        node = new Node(this.canvas.cacheCtx, {\n          id: it.key,\n          enName: it.tableName,\n          cnName: it.cnName,\n          type: it.type,\n          x: it.x,\n          y: it.y,\n          width: it.width,\n          height: it.height,\n          attributes: it.attributes,\n          bdC: it.bdC,\n          bgC: it.bgC,\n          quotePrimaryKey: it.quotePrimaryKey,\n          physicalTables: it.physicalTables,\n        })\n        this.nodeMap.set(it.key, node)\n        if (!nodeRelatedLineMap.has(it.key)) nodeRelatedLineMap.set(it.key, { from: new Set(), to: new Set() })\n\n        // for (let j = 0; j < node.attributes.length; j++) {\n        //   const attr = node.attributes[j]\n        //   this.attrMap.set(attr.id, node)\n        // }\n      }\n    }\n  }\n\n  private renderNodes() {\n    const {\n      nodeMap,\n      _data,\n      renderElements,\n    } = this\n    const nodes = _data.nodeDataArray\n    for (let i = 0; i < nodes.length; i++) {\n      const it = nodes[i]\n      const node = nodeMap.get(it.key)\n      node.updateOptions(it)\n      const isVisible = this.canvas.isVisible(node.boundingBox)\n      if (isVisible) {\n        renderElements.push(node)\n        node.draw()\n      }\n    }\n  }\n\n  private renderLines() {\n    const {\n      lineMap,\n      _data,\n      renderElements,\n      nodeRelatedLineMap,\n    } = this\n    const lines = _data.linkDataArray\n    for (let i = 0; i < lines.length; i++) {\n      const it = lines[i]\n      let line = lineMap.get(it.key)\n\n      if (!line) {\n        line = new LineErwin(this.canvas.cacheCtx, {\n          pos: it.pos,\n          type: it.type,\n          from: it.from,\n          to: it.to,\n          id: it.key,\n          numLineTypes: it.numLineTypes,\n        })\n        this.lineMap.set(it.key, line)\n      } else {\n        line.updateOptions(it)\n      }\n\n      // 缓存节点与连线的关系map\n      if (!nodeRelatedLineMap.has(line.from)) nodeRelatedLineMap.set(line.from, { from: new Set(), to: new Set() })\n      if (!nodeRelatedLineMap.has(line.to)) nodeRelatedLineMap.set(line.to, { from: new Set(), to: new Set() })\n      nodeRelatedLineMap.get(line.from).from.add(line)\n      nodeRelatedLineMap.get(line.to).to.add(line)\n\n      const isVisible = this.canvas.isVisible(line.boundingBox)\n      if (isVisible) {\n        renderElements.push(line)\n        line.draw()\n      }\n    }\n  }\n\n  private renderNote () {\n    const {\n      _data: {\n        noteDataArray,\n      },\n      noteMap,\n      renderElements,\n    } = this\n\n    for (let i = 0; i < noteDataArray.length; i++) {\n      const it = noteDataArray[i]\n      let note = noteMap.get(it.key)\n\n      if (!note) {\n        note = new TextBase(this.canvas.cacheCtx, {\n          id: it.key,\n          content: it.text,\n          textColor: it.color,\n          x: it.x,\n          y: it.y,\n        })\n        this.noteMap.set(it.key, note)\n      } else {\n        note.updateOptions(it)\n      }\n      \n      const isVisible = this.canvas.isVisible(note.boundingBox)\n      if (isVisible) {\n        renderElements.push(note)\n        note.draw()\n      }\n    }\n    \n  }\n\n  //根据数据更新视图\n  update(newData?) {\n    this.renderElements = []\n    //外部可能会改变data指向，当改变data指向时，调用该方法传入新的data\n    //并且清空聚焦节点\n    if (newData) {\n      this._data = newData\n      this.lineMap = new Map()\n      this.markMap = new Map()\n      this.noteMap = new Map()\n      this.nodeMap = new Map()\n      this.nodeRelatedLineMap = new Map()\n      this.focusTarget.clear()\n\n      this.initNodes()\n    }\n\n    this.canvas.clearCacheCanvas()\n    const cacheCtx = this.cacheCtx\n    cacheCtx.font = '15px ' + this.fontFamily\n\n    //开始缓存canvas绘制\n    cacheCtx.save()\n\n    //绘制j矩形框\n    this._drawMarks()\n    //绘制连线\n    this.renderLines()\n    //绘制实体\n    this.renderNodes()\n    //绘制文本备注信息\n    this.renderNote()\n    // this._drawNote()\n    // 绘制聚焦节点\n    cacheCtx.restore()\n\n\n    //绘制缩略图canvas\n    // drawThumbnail.call(this)\n\n    //绘制锁定图标\n    this.editable === 2 && this.showLockIcon && this._drawLock()\n\n    this.canvas.update()\n    this.updateEventCanvas()\n    this.updateThumbnail()\n  }\n\n  public async updateThumbnail () {\n    const {\n      _data: {\n        nodeDataArray,\n      },\n    } = this\n    \n    const thumbnail = this.plugins.get(PluginsEnum.Thumbnail)\n    if (!thumbnail) return false\n    \n    await nextTick()\n\n    const { width: viewW, height: viewH } = this.canvas.getRenderSize()\n    let minX = 0, minY = 0, maxX = viewW, maxY = viewH\n    for (let i = 0; i < nodeDataArray.length; i++) {\n      const node = nodeDataArray[i]\n      const { x, y, width, height } = node\n\n      if (x < minX) minX = x\n      if (y < minY) minY = y\n      if (x + width > maxX) maxX = x + width\n      if (y + height > maxY) maxY = y + height\n    }\n\n    thumbnail.draw(minX, minY, maxX, maxY, (ctx) => {\n      for (let i = 0; i < nodeDataArray.length; i++) {\n        const node = nodeDataArray[i]\n        const { x, y, width, height, bgC, bdC } = node\n        ctx.save()\n        \n        ctx.fillStyle = bgC || '#fff'\n        ctx.fillRect(x, y, width, height)\n        ctx.strokeStyle = bdC || '#000'\n        ctx.strokeRect(x, y, width, height)\n        ctx.restore()\n      }\n    })\n  }\n\n  private updateEventCanvas() {\n    this.canvas.clearEventCanvas()\n    this.drawFocusElement()\n    this.drawHoverElement()\n  }\n\n  private drawFocusElement() {\n    const {\n      canvas,\n      focusTarget,\n    } = this\n\n    focusTarget.forEach((el) => {\n      if (el instanceof Node) {\n        new FrameResize(canvas.eventCtx, {\n          x: el.x,\n          y: el.y,\n          width: el.width,\n          height: el.height,\n        }).draw()\n      }\n      else if (el instanceof LineErwin) {\n        new LineErwin(canvas.eventCtx, {\n          ...el,\n          lineWidth: 3,\n          strokeStyle: Color.primary,\n        }).draw()\n      }\n      else if (el instanceof NodeRect) {\n        new NodeRect(canvas.eventCtx, {\n          ...el,\n        }).draw()\n      }\n    })\n  }\n\n  private drawHoverElement() {\n    const {\n      canvas,\n      hoverTarget,\n      focusTarget,\n    } = this\n\n    const isFocusTarget = focusTarget.has(hoverTarget)\n\n    if (!hoverTarget || isFocusTarget) return\n\n    if (hoverTarget instanceof Node) {\n      new FrameHover(canvas.eventCtx, {\n        x: hoverTarget.x,\n        y: hoverTarget.y,\n        width: hoverTarget.width,\n        height: hoverTarget.height,\n      }).draw()\n    }\n    else if (hoverTarget instanceof LineErwin) {\n      new LineErwin(canvas.eventCtx, {\n        ...hoverTarget,\n        lineWidth: 2,\n        strokeStyle: Color.primary,\n      }).draw()\n    }\n  }\n    \n\n\n  copy() {\n    if (!this.focusTarget.size) return\n    const copyTarget = JSON.parse(JSON.stringify([...this.focusTarget]))\n    const { handleCopy } = this.externalFn\n    // 触发外部函数，通知要执行拷贝操作，并且记录是否允许拷贝当前项\n    const allowCopy = handleCopy?.(copyTarget, this.copyTarget) !== false\n    if (!allowCopy) return false\n\n    this.copyTarget = copyTarget\n    this.editType = EditType.copy\n    this.el.style.cursor = Cursor.copy\n  }\n\n  //修改可编辑状态\n  setEditable(val) {\n    this.editable = val\n    this.update()\n  }\n\n  //绘制锁\n  _drawLock() {\n    new LockIcon(this.canvas.cacheCtx, {\n      x: this.canvas.width - 40,\n      y: 25,\n    }).draw()\n  }\n\n  /**\n   * 验证线坐标是否合法\n   *    场景：当种种原因造成线坐标混乱时，使用该方法在绘制前把错误数据恢复很有必要，例如：协同操作时\n   * @param lineInfo \n   * @returns \n   */\n  _checkLinePos (lineInfo) {\n    // 坐标数量不正确时 -> 重新生成连线\n    const nonPos = lineInfo.pos?.length < 2 || lineInfo.pos?.length > 4\n    if (nonPos) return this.mergeLines([lineInfo])\n\n    const fromNode = this.nodeMap.get(lineInfo.from)\n    const toNode = this.nodeMap.get(lineInfo.to)\n    const fromNodeBord = this.getPointBelongBord(fromNode, lineInfo.pos[0])\n    const toNodeBord = this.getPointBelongBord(toNode, lineInfo.pos[lineInfo.pos.length - 1])\n\n    // 验证通过\n    if (fromNodeBord && toNodeBord) return true\n    \n    /**\n     * 验证不通过时 -> 重新生成连线\n     *    实现细节可优化：例如找到当前坐标矩阵的最新距离等\n     */\n    this.mergeLines([lineInfo])\n  }\n\n  //绘制聚焦标识\n  _drawFocus(x, y, w, h) {\n    const ctx = this.cacheCtx\n    ctx.save()\n    ctx.fillStyle = '#fff'\n    ctx.strokeStyle = '#B4B4B4'\n    ctx.shadowColor = '#DADADA'\n    ctx.shadowBlur = 5\n    ctx.fillRect(x - 3, y - 3, 6, 6)\n    ctx.fillRect(x + w / 2 - 3, y - 3, 6, 6)\n    ctx.fillRect(x + w - 3, y - 3, 6, 6)\n    ctx.fillRect(x - 3, y + h / 2 - 3, 6, 6)\n    ctx.fillRect(x + w - 3, y + h / 2 - 3, 6, 6)\n    ctx.fillRect(x - 3, y + h - 3, 6, 6)\n    ctx.fillRect(x + w / 2 - 3, y + h - 3, 6, 6)\n    ctx.fillRect(x + w - 3, y + h - 3, 6, 6)\n\n    ctx.strokeRect(x - 3, y - 3, 6, 6)\n    ctx.strokeRect(x + w / 2 - 3, y - 3, 6, 6)\n    ctx.strokeRect(x + w - 3, y - 3, 6, 6)\n    ctx.strokeRect(x - 3, y + h / 2 - 3, 6, 6)\n    ctx.strokeRect(x + w - 3, y + h / 2 - 3, 6, 6)\n    ctx.strokeRect(x - 3, y + h - 3, 6, 6)\n    ctx.strokeRect(x + w / 2 - 3, y + h - 3, 6, 6)\n    ctx.strokeRect(x + w - 3, y + h - 3, 6, 6)\n\n    ctx.restore()\n  }\n\n  //绘制表名\n  _drawTitle(tableName, w, x, y) {\n    const ctx = this.cacheCtx\n\n    ctx.save()\n    // 设置字体\n    ctx.font = '15px ' + this.fontFamily\n    // 设置颜色\n    ctx.fillStyle = '#000'\n    // 设置水平对齐方式\n    ctx.textAlign = 'left'\n    // 设置垂直对齐方式\n    ctx.textBaseline = 'top'\n    ctx.fillText(ctx.fittingString(tableName, w - 14), x, y - 24)\n    ctx.restore()\n  }\n\n  //缓存图片元素\n  _loadImg(item) {\n    const _this = this\n\n    //开始图片预加载\n    const img = new Image()\n    img.src = item.checkoutInfo.imgUrl\n    img.onload = function () {\n      _this.imgList[item.key] = img\n      _this.update()\n    }\n  }\n\n  //绘制检出标志\n  _drawIcon(img, w, x, y, bdC) {\n    const ctx = this.cacheCtx\n\n    ctx.save()\n    ctx.beginPath()\n    ctx.strokeStyle = bdC\n    ctx.lineWidth = 3\n    ctx.arc(x + w - 6, y - 18, 9, 0, 2 * Math.PI)\n    ctx.clip()\n    ctx.drawImage(img, x + w - 15, y - 27, 18, 18)\n    ctx.stroke()\n    ctx.restore()\n  }\n\n  //绘制矩形框\n  _drawMarks() {\n    const _this = this, data = this._data\n    data?.markDataArray?.forEach(item => {\n      // console.log(_this.focusTarget,\"focusTarget=====\")\n      let w = item.width\n      let h = item.height\n      let x = Number(item.x)\n      let y = Number(item.y)\n      // const mark = new NodeRect(this.cacheCtx,item)\n\n      const it = item\n      let mark = this.markMap.get(it.key)\n\n      if (!mark) {\n        mark = new NodeRect(this.canvas.cacheCtx, {\n          id: it.key,\n          x: x,\n          y: y,\n          width: w,\n          height: h,\n        })\n        this.markMap.set(it.key, mark)\n      } else {\n        mark.updateOptions(it)\n      }\n\n      const isVisible = this.canvas.isVisible(mark.boundingBox)\n      if (isVisible) {\n        this.renderElements.push(mark)\n        mark.draw()\n      }\n     \n      if (_this.focusTarget.has(mark)) _this._drawFocus(x, y, w, h)\n    })\n    \n  }\n\n  //绘制备注文本信息\n  _drawNote() {\n    const ctx = this.cacheCtx, _this = this, data = this._data\n\n    data?.noteDataArray?.forEach(item => {\n      let w = ctx.measureText(item.text).width\n      let h = 16\n      let x = Number(item.x)\n      let y = Number(item.y)\n\n      ctx.save()\n      // 设置字体\n      ctx.font = '15px ' + this.fontFamily\n      // 设置颜色\n      ctx.fillStyle = item.color || '#000'\n      // 设置水平对齐方式\n      ctx.textAlign = 'left'\n      // 设置垂直对齐方式\n      ctx.textBaseline = 'top'\n      ctx.fillText(item.text, x, y)\n      ctx.restore()\n\n      if (_this.focusTarget.has(item)) _this._drawFocus(x, y - 2, w, h)\n    })\n  }\n\n\n  /**\n   * 放大&缩小视图\n   * 参数：scale - 原始大小：100；2倍大小200...\n   */\n  public zoom (rate) {\n    const fixRate = rate / 100\n    this.canvas.zoom(fixRate)\n    this.update()\n    this.emit('graph:zoom', this.canvas.zoomRate)\n  }\n\n  //找到连线点在节点的哪条边上\n  getPointBelongBord(nodeInfo, pointInfo) {\n    if (pointInfo.x === nodeInfo.x) {\n      return 'L'\n    } else if (pointInfo.x === nodeInfo.x + nodeInfo.width) {\n      return 'R'\n    } else if (pointInfo.y === nodeInfo.y) {\n      return 'T'\n    } else if (pointInfo.y === nodeInfo.y + nodeInfo.height) {\n      return 'B'\n    } else {\n      console.error(\n        'getPointBelongBord未找到匹配边，detail:',\n        nodeInfo, \n        JSON.parse(JSON.stringify(nodeInfo)),\n        JSON.parse(JSON.stringify(pointInfo))\n      )\n    }\n  }\n\n  //修改节点尺寸\n  resizeNode(evX, evY, eventObj, minWidth = 50) {\n    //分支不允许修改尺寸\n    if (['exclusive', 'inclusive'].includes(eventObj.target.type)) return\n\n    //开始修改尺寸逻辑\n    const _this = this\n    const copyEventObjTarget = {\n      x: eventObj.target.x,\n      y: eventObj.target.y,\n      width: eventObj.target.width,\n      height: eventObj.target.height,\n    }\n\n    //左上\n    if (eventObj.targetDirection === 'LT') {\n      const newWidth = eventObj.target.width + eventObj.target.x - evX\n      const newHeight = eventObj.target.height + eventObj.target.y - evY\n\n      eventObj.target.updateOptions({\n        x: newWidth < minWidth ? eventObj.target.x : evX,\n        y: newHeight < minWidth ? eventObj.target.y : evY,\n        width: newWidth < minWidth ? eventObj.target.width : newWidth,\n        height: newHeight < minWidth ? eventObj.target.height : newHeight,\n      })\n      moveKeyPoint()\n    }\n    //上中\n    else if (eventObj.targetDirection === 'TM') {\n      const newHeight = eventObj.target.height + eventObj.target.y - evY\n\n      eventObj.target.updateOptions({\n        y: newHeight < minWidth ? eventObj.target.y : evY,\n        height: newHeight < minWidth ? eventObj.target.height : newHeight,\n      })\n      moveKeyPoint()\n    }\n    //右上\n    else if (eventObj.targetDirection === 'RT') {\n      const newWidth = evX - eventObj.target.x\n      const newHeight = eventObj.target.height + eventObj.target.y - evY\n\n      eventObj.target.updateOptions({\n        y: newHeight < minWidth ? eventObj.target.y : evY,\n        width: newWidth < minWidth ? eventObj.target.width : newWidth,\n        height: newHeight < minWidth ? eventObj.target.height : newHeight,\n      })\n      moveKeyPoint()\n    }\n    //左中\n    else if (eventObj.targetDirection === 'LM') {\n      const newWidth = eventObj.target.width + eventObj.target.x - evX\n\n      eventObj.target.updateOptions({\n        x: newWidth < minWidth ? eventObj.target.x : evX,\n        width: newWidth < minWidth ? eventObj.target.width : newWidth,\n      })\n      moveKeyPoint()\n    }\n    //右中\n    else if (eventObj.targetDirection === 'RM') {\n      const newWidth = evX - eventObj.target.x\n\n      eventObj.target.updateOptions({\n        width: newWidth < minWidth ? eventObj.target.width : newWidth,\n      })\n      moveKeyPoint()\n    }\n    //左下\n    else if (eventObj.targetDirection === 'LB') {\n      const newWidth = eventObj.target.width + eventObj.target.x - evX\n      const newHeight = evY - eventObj.target.y\n\n      eventObj.target.updateOptions({\n        x: newWidth < minWidth ? eventObj.target.x : evX,\n        width: newWidth < minWidth ? eventObj.target.width : newWidth,\n        height: newHeight < minWidth ? eventObj.target.height : newHeight,\n      })\n      moveKeyPoint()\n    }\n    //下中\n    else if (eventObj.targetDirection === 'BM') {\n      const newHeight = evY - eventObj.target.y\n\n      eventObj.target.updateOptions({\n        height: newHeight < minWidth ? eventObj.target.height : newHeight,\n      })\n      moveKeyPoint()\n    }\n    //右下\n    else if (eventObj.targetDirection === 'RB') {\n      const newWidth = evX - eventObj.target.x\n      const newHeight = evY - eventObj.target.y\n\n      eventObj.target.updateOptions({\n        width: newWidth < minWidth ? eventObj.target.width : newWidth,\n        height: newHeight < minWidth ? eventObj.target.height : newHeight,\n      })\n      \n      moveKeyPoint()\n    }\n    if(eventObj.target.type === \"mark\"){\n      this.emit('mark:resize', eventObj.target)\n    }else{\n      this.emit('node:resize', eventObj.target)\n    }\n    \n\n    //根据节点最新位置更新该节点上的连线关键点函数\n    function moveKeyPoint() {\n      //如果方块没有最小宽度限度证明是备注框，无需判断连线\n      if (!minWidth) return\n      _this.nodeMap.get(eventObj.target.id).updateOptions(eventObj.target)\n\n      const lineSet = _this.nodeRelatedLineMap.get(eventObj.target.id) as RelatedLineItem\n      \n        [...lineSet.from, ...lineSet.to].forEach((item) => {\n          //判断该条线的起始节点和终结节点是不同的实体：如果不同走实体影响线的函数；如果相同代表是自己连自己的情况，走单独的函数\n          const diffFlag = item.from !== item.to\n          const idx = lineSet.from.has(item) ? 0 : item.pos.length - 1\n          diffFlag && updateKeyPoint(item, idx)\n          diffFlag ? _this.moveLineForNode(item, eventObj, eventObj.target) : _this.moveLineForSameNode(item, eventObj)\n        })\n\n\n      //更新关键点函数\n      function updateKeyPoint(item, idx) {\n        //左边\n        if (item.pos[idx].x === copyEventObjTarget.x) {\n          item.pos[idx].x = eventObj.target.x\n          item.pos[idx].y = item.pos[idx].y < eventObj.target.y ? eventObj.target.y + 1 : item.pos[idx].y > eventObj.target.y + eventObj.target.height ? eventObj.target.y + eventObj.target.height - 1 : item.pos[idx].y\n        }\n        //右边\n        else if (item.pos[idx].x === copyEventObjTarget.x + copyEventObjTarget.width) {\n          item.pos[idx].x = eventObj.target.x + eventObj.target.width\n          item.pos[idx].y = item.pos[idx].y < eventObj.target.y ? eventObj.target.y + 1 : item.pos[idx].y > eventObj.target.y + eventObj.target.height ? eventObj.target.y + eventObj.target.height - 1 : item.pos[idx].y\n        }\n        //上边\n        else if (item.pos[idx].y === copyEventObjTarget.y) {\n          item.pos[idx].x = item.pos[idx].x <= eventObj.target.x ? eventObj.target.x + 1 : item.pos[idx].x >= eventObj.target.x + eventObj.target.width ? eventObj.target.x + eventObj.target.width - 1 : item.pos[idx].x\n          item.pos[idx].y = eventObj.target.y\n        }\n        //下边\n        else if (item.pos[idx].y === copyEventObjTarget.y + copyEventObjTarget.height) {\n          item.pos[idx].x = item.pos[idx].x <= eventObj.target.x ? eventObj.target.x + 1 : item.pos[idx].x >= eventObj.target.x + eventObj.target.width ? eventObj.target.x + eventObj.target.width - 1 : item.pos[idx].x\n          item.pos[idx].y = eventObj.target.y + eventObj.target.height\n        }\n      }\n    }\n  }\n\n  //根据四个边获取坐标点\n  getNodePosFromBoreder(targetNode, direction) {\n    let pos = {}\n    switch (direction) {\n      case 'T':\n        pos = {\n          start: {\n            x: targetNode.x,\n            y: targetNode.y,\n          },\n          end: {\n            x: targetNode.x + targetNode.width,\n            y: targetNode.y,\n          },\n        }\n        break\n      case 'B':\n        pos = {\n          start: {\n            x: targetNode.x,\n            y: targetNode.y + targetNode.height,\n          },\n          end: {\n            x: targetNode.x + targetNode.width,\n            y: targetNode.y + targetNode.height,\n          },\n        }\n        break\n      case 'L':\n        pos = {\n          start: {\n            x: targetNode.x,\n            y: targetNode.y,\n          },\n          end: {\n            x: targetNode.x,\n            y: targetNode.y + targetNode.height,\n          },\n        }\n        break\n      case 'R':\n        pos = {\n          start: {\n            x: targetNode.x + targetNode.width,\n            y: targetNode.y,\n          },\n          end: {\n            x: targetNode.x + targetNode.width,\n            y: targetNode.y + targetNode.height,\n          },\n        }\n        break\n    }\n    return pos\n  }\n\n  //更新 节点移动 触发的更改线条路径\n  moveLineForNode(linkInfo, eventObj, nodeNewLoc) {\n    const posMaxIdx = linkInfo.pos.length - 1\n    const distance = { x: nodeNewLoc.x - eventObj.target.x, y: nodeNewLoc.y - eventObj.target.y }\n\n    const fromNode = this.nodeMap.get(linkInfo.from)\n    const toNode = this.nodeMap.get(linkInfo.to)\n    const fromNodeBord = this.getPointBelongBord(fromNode, linkInfo.pos[0])\n    const toNodeBord = this.getPointBelongBord(toNode, linkInfo.pos[posMaxIdx])\n\n    // 连线错乱时 -> 重新生成连线坐标\n    if (!fromNodeBord || !toNodeBord) this.mergeLines([linkInfo])\n\n    const moveTargetIsFrom = eventObj.target.id === fromNode.id\n\n    //拖动节点是from节点\n    if (moveTargetIsFrom) {\n      //更新首点定位\n      linkInfo.pos[0].x = nodeNewLoc.x + (linkInfo.pos[0].x - eventObj.target.x)\n      linkInfo.pos[0].y = nodeNewLoc.y + (linkInfo.pos[0].y - eventObj.target.y)\n    }\n    //拖动节点是to节点\n    else {\n      //更新末点定位\n      linkInfo.pos[posMaxIdx].x = nodeNewLoc.x + (linkInfo.pos[posMaxIdx].x - eventObj.target.x)\n      linkInfo.pos[posMaxIdx].y = nodeNewLoc.y + (linkInfo.pos[posMaxIdx].y - eventObj.target.y)\n    }\n\n    //根据最新的定位点更新连线点坐标\n    //直线情况\n    if (posMaxIdx === 1) {\n      linkInfo.pos.splice(1, 0, { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y }, { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y })\n    }\n    //二折情况\n    else if (posMaxIdx === 2) {\n      if (fromNodeBord === 'R' && toNodeBord === 'B') {\n        //正常向下\n        if (this.getNodePosFromBoreder(toNode, 'B').start.y < linkInfo.pos[0].y) {\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[0].y }\n        }\n        //变横向一折\n        else {\n          const idx1X = this.getNodePosFromBoreder(fromNode, 'R').start.x < this.getNodePosFromBoreder(toNode, 'L').start.x ? this.getNodePosFromBoreder(toNode, 'L').start.x : this.getNodePosFromBoreder(toNode, 'R').start.x\n          linkInfo.pos[1] = { x: idx1X + (moveTargetIsFrom ? 0 : distance.x), y: linkInfo.pos[0].y + distance.y }\n          linkInfo.pos.splice(2)\n        }\n\n        //向右变竖向一折\n        if (linkInfo.pos[2] && linkInfo.pos[2].x <= linkInfo.pos[0].x) {\n          linkInfo.pos[0] = { x: linkInfo.pos[0].x - 1, y: fromNode.y + (moveTargetIsFrom ? distance.y : 0) }\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[2].y }\n          linkInfo.pos.splice(2)\n        }\n      }\n      else if (fromNodeBord === 'B' && toNodeBord === 'R') {\n        if (fromNode.y + fromNode.height < linkInfo.pos[1].y) {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[2].y }\n        }\n        //变一折\n        else {\n          if (['exclusive', 'inclusive'].includes(fromNode.type)) {\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: Math.max(this.getNodePosFromBoreder(fromNode, 'B').start.y, this.getNodePosFromBoreder(toNode, 'B').start.y) + 20 }\n            linkInfo.pos[2] = { x: toNode.x + Math.floor(toNode.width / 2) + (moveTargetIsFrom ? 0 : distance.x), y: linkInfo.pos[1].y }\n            linkInfo.pos[3] = { x: linkInfo.pos[2].x, y: this.getNodePosFromBoreder(toNode, 'B').start.y + (moveTargetIsFrom ? 0 : distance.y) }\n          } else {\n            linkInfo.pos[0] = { x: fromNode.x + (eventObj.target.id === fromNode.id ? distance.x : 0), y: linkInfo.pos[1].y }\n            linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[2].y }\n            linkInfo.pos.splice(2)\n          }\n        }\n\n        if (linkInfo.pos[1].x < toNode.x + toNode.width) {\n          linkInfo.pos[1].y = toNode.y + (eventObj.target.id === toNode.id ? distance.y : 0)\n          linkInfo.pos.splice(2)\n        }\n      }\n      else if (fromNodeBord === 'L' && toNodeBord === 'B') {\n        //正常向下\n        if (this.getNodePosFromBoreder(toNode, 'B').start.y < linkInfo.pos[0].y) {\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[0].y }\n        }\n        //变横向一折\n        else {\n          linkInfo.pos[1] = { x: toNode.x + toNode.width + (eventObj.target.id === toNode.id ? distance.x : 0), y: linkInfo.pos[0].y }\n          linkInfo.pos.splice(2)\n        }\n        //变竖向一折\n        if (linkInfo.pos[1].x >= eventObj.target.x && this.getNodePosFromBoreder(toNode, 'B').start.y < this.getNodePosFromBoreder(fromNode, 'T').start.y) {\n          linkInfo.pos[0] = { x: linkInfo.pos[0].x + (moveTargetIsFrom ? distance.x : 0) - 1, y: fromNode.y + (moveTargetIsFrom ? distance.y : 0) }\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[2].y }\n          linkInfo.pos.splice(2)\n        }\n      }\n      else if (fromNodeBord === 'B' && toNodeBord === 'L') {\n        linkInfo.pos[1].x = linkInfo.pos[0].x\n        linkInfo.pos[1].y = linkInfo.pos[2].y\n        if (linkInfo.pos[1].x > toNode.x) {\n          linkInfo.pos[1].y = toNode.y + (eventObj.target.id === toNode.id ? distance.y : 0)\n          linkInfo.pos.splice(2)\n        }\n        if (linkInfo.pos[1].y < linkInfo.pos[0].y) {\n          if (['exclusive', 'inclusive'].includes(fromNode.type)) {\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: Math.max(this.getNodePosFromBoreder(fromNode, 'B').start.y, this.getNodePosFromBoreder(toNode, 'B').start.y) + 20 }\n            linkInfo.pos[2] = { x: toNode.x + Math.floor(toNode.width / 2) + (moveTargetIsFrom ? 0 : distance.x), y: linkInfo.pos[1].y }\n            linkInfo.pos[3] = { x: linkInfo.pos[2].x, y: this.getNodePosFromBoreder(toNode, 'B').start.y + (moveTargetIsFrom ? 0 : distance.y) }\n          } else {\n            linkInfo.pos[1].x = this.getNodePosFromBoreder(fromNode, 'R').start.x + (eventObj.target.id === fromNode.id ? distance.x : 0)\n            linkInfo.pos[1].y = this.getNodePosFromBoreder(fromNode, 'B').start.y + (eventObj.target.id === fromNode.id ? distance.y : 0)\n            linkInfo.pos.splice(0, 1)\n          }\n        }\n      }\n      else if (fromNodeBord === 'R' && toNodeBord === 'T') {\n        linkInfo.pos[1].x = linkInfo.pos[2].x\n        linkInfo.pos[1].y = linkInfo.pos[0].y\n        if (linkInfo.pos[1].x < linkInfo.pos[0].x) {\n          linkInfo.pos[1].y = this.getNodePosFromBoreder(fromNode, 'B').start.y + (eventObj.target.id === fromNode.id ? distance.y : 0)\n          linkInfo.pos.splice(0, 1)\n        }\n        if (linkInfo.pos[2] && linkInfo.pos[1].y > linkInfo.pos[2].y) {\n          if (['exclusive', 'inclusive'].includes(toNode.type)) {\n            linkInfo.pos[0] = { x: fromNode.x + Math.floor(fromNode.width / 2), y: fromNode.y + (moveTargetIsFrom ? distance.y : 0) }\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y - 20 }\n            linkInfo.pos[2] = { x: linkInfo.pos[2].x, y: linkInfo.pos[1].y }\n            linkInfo.pos[3] = { x: linkInfo.pos[2].x, y: toNode.y + (moveTargetIsFrom ? 0 : distance.y) }\n          } else {\n            linkInfo.pos[1].x = toNode.x + (moveTargetIsFrom ? 0 : distance.x)\n            linkInfo.pos[1].y = toNode.y + (moveTargetIsFrom ? 0 : distance.y)\n            linkInfo.pos.splice(2)\n          }\n        }\n      }\n      else if (fromNodeBord === 'T' && toNodeBord === 'R') {\n        linkInfo.pos[1].x = linkInfo.pos[0].x\n        linkInfo.pos[1].y = linkInfo.pos[2].y\n        if (linkInfo.pos[1].x < linkInfo.pos[2].x) {\n          linkInfo.pos[1].y = this.getNodePosFromBoreder(toNode, 'B').start.y + (eventObj.target.id === toNode.id ? distance.y : 0)\n          linkInfo.pos.splice(2)\n        }\n        if (linkInfo.pos[0].y < linkInfo.pos[1].y) {\n          linkInfo.pos[1].x = fromNode.x + (eventObj.target.id === fromNode.id ? distance.x : 0)\n          linkInfo.pos[1].y = fromNode.y + (eventObj.target.id === fromNode.id ? distance.y : 0)\n          linkInfo.pos.splice(0, 1)\n        }\n      }\n      else if (fromNodeBord === 'T' && toNodeBord === 'L') {\n        linkInfo.pos[1].x = linkInfo.pos[0].x\n        linkInfo.pos[1].y = linkInfo.pos[2].y\n        if (linkInfo.pos[1].x > linkInfo.pos[2].x) {\n          linkInfo.pos[1].y = this.getNodePosFromBoreder(toNode, 'B').start.y + (eventObj.target.id === toNode.id ? distance.y : 0)\n          linkInfo.pos.splice(2)\n        }\n        if (linkInfo.pos[1].y > linkInfo.pos[0].y) {\n          linkInfo.pos[1].x = this.getNodePosFromBoreder(fromNode, 'R').start.x + (eventObj.target.id === fromNode.id ? distance.x : 0)\n          linkInfo.pos.splice(0, 1)\n        }\n      }\n      else if (fromNodeBord === 'L' && toNodeBord === 'T') {\n        linkInfo.pos[1].x = linkInfo.pos[2].x\n        linkInfo.pos[1].y = linkInfo.pos[0].y\n        if (linkInfo.pos[1].y > linkInfo.pos[2].y) {\n          if (['exclusive', 'inclusive'].includes(toNode.type)) {\n            linkInfo.pos[0] = { x: fromNode.x + Math.floor(fromNode.width / 2), y: fromNode.y + (moveTargetIsFrom ? distance.y : 0) }\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y - 20 }\n            linkInfo.pos[2] = { x: linkInfo.pos[2].x, y: linkInfo.pos[1].y }\n            linkInfo.pos[3] = { x: linkInfo.pos[2].x, y: toNode.y + (moveTargetIsFrom ? 0 : distance.y) }\n          } else {\n            linkInfo.pos[1].x = this.getNodePosFromBoreder(toNode, 'R').start.x + (eventObj.target.id === toNode.id ? distance.x : 0)\n            linkInfo.pos.splice(2)\n          }\n        }\n        if (linkInfo.pos[1].x > linkInfo.pos[0].x) {\n          linkInfo.pos[1].y = this.getNodePosFromBoreder(fromNode, 'B').start.y + (eventObj.target.id === fromNode.id ? distance.y : 0)\n          linkInfo.pos.splice(0, 1)\n        }\n      }\n    }\n    //三折情况\n    else if (posMaxIdx === 3) {\n      const middleX = Math.floor(Math.abs(linkInfo.pos[0].x - linkInfo.pos[posMaxIdx].x) / 2)\n      const middleY = Math.floor(Math.abs(linkInfo.pos[0].y - linkInfo.pos[posMaxIdx].y) / 2)\n\n      if (fromNodeBord === 'B' && toNodeBord === 'B') {\n        \n        // 正常向下移动\n        if (this.getNodePosFromBoreder(fromNode, 'T').start.y < this.getNodePosFromBoreder(toNode, 'B').start.y) {\n          //正常向下\n          if (this.getNodePosFromBoreder(fromNode, 'B').start.y < linkInfo.pos[1].y) {\n            const idx1and2Y = linkInfo.pos[2].y - toNode.y - toNode.height + linkInfo.pos[3].y\n            // linkInfo.pos[0] = { x: linkInfo.pos[0].x, y: fromNode.y }\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: idx1and2Y }\n            linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: idx1and2Y }\n            // linkInfo.pos[3] = {x: linkInfo.pos[3].x, y: linkInfo.pos[3].y}\n          }\n          //二折\n          else {\n            const idx0X = fromNode.x + fromNode.width > linkInfo.pos[3].x ? fromNode.x : fromNode.x + fromNode.width\n            const idx1and2Y = linkInfo.pos[2].y - toNode.y - toNode.height + linkInfo.pos[3].y\n            linkInfo.pos[0] = { x: idx0X + (eventObj.target.id === fromNode.id ? distance.x : 0), y: idx1and2Y }\n            linkInfo.pos[1] = { x: linkInfo.pos[3].x, y: idx1and2Y }\n            linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[3].y }\n            // 删除最后一位\n            linkInfo.pos.splice(3)\n          }\n        }\n        // from和to重合点 -> 变成T to B\n        else {\n          if (['exclusive', 'inclusive'].includes(fromNode.type)) {\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: fromNode.y + fromNode.height + 20 }\n            linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[1].y }\n          } else {\n            // console.log('T->B')\n            linkInfo.pos[0] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y - fromNode.height }\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y + Math.floor((fromNode.y - toNode.y - toNode.height) / 2) }\n            linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[0].y + Math.floor((fromNode.y - toNode.y - toNode.height) / 2) }\n          }\n        }\n      } else if (fromNodeBord === 'B' && toNodeBord === 'T') {\n        // from高 to低\n        if (fromNode.y + fromNode.height < toNode.y) {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y + middleY }\n          linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[0].y + middleY }\n        }\n        // from和to重合点 -> 变成B to B\n        else if (fromNode.y + fromNode.height >= toNode.y) {\n          if (['exclusive', 'inclusive'].includes(toNode.type)) {\n            linkInfo.pos[0] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y - fromNode.height }\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y - 20 }\n            linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[1].y }\n          } else {\n            // console.log('B->B')\n            linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: toNode.y + toNode.height + 20 }\n            linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: toNode.y + toNode.height + 20 }\n            linkInfo.pos[3] = { x: linkInfo.pos[3].x, y: linkInfo.pos[3].y + toNode.height }\n          }\n        }\n      } else if (fromNodeBord === 'T' && toNodeBord === 'T') {\n        if (['exclusive', 'inclusive'].includes(fromNode.type) || ['exclusive', 'inclusive'].includes(toNode.type)) {\n          let y = linkInfo.pos[1].y + distance.y > Math.min(fromNode.y, toNode.y) - 20 ? Math.min(fromNode.y, toNode.y) - 20 : linkInfo.pos[1].y + distance.y\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: y }\n          linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: y }\n        }\n        else if (linkInfo.pos[1].y < eventObj.target.y) {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[1].y }\n          linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[2].y }\n        } else {\n          // console.log('B->B')\n          linkInfo.pos[0] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y + fromNode.height }\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: Math.max(fromNode.y + fromNode.height, toNode.y + toNode.height) + 20 }\n          linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: Math.max(fromNode.y + fromNode.height, toNode.y + toNode.height) + 20 }\n          linkInfo.pos[3] = { x: linkInfo.pos[3].x, y: linkInfo.pos[3].y + toNode.height }\n        }\n      } else if (fromNodeBord === 'T' && toNodeBord === 'B') {\n        if (fromNode.y > toNode.y + toNode.height) {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y - middleY }\n          linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[3].y + middleY }\n        }\n        // from和to重合点 -> 变成B to B\n        else if (fromNode.y <= toNode.y + toNode.height) {\n          console.log('B->B')\n          linkInfo.pos[0] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y + fromNode.height }\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x, y: linkInfo.pos[0].y + 20 }\n          linkInfo.pos[2] = { x: linkInfo.pos[3].x, y: linkInfo.pos[0].y + 20 }\n        }\n      } else if (fromNodeBord === 'L' && toNodeBord === 'L') {\n        //拖动的是to节点\n        if (eventObj.target.id === toNode.id) {\n          linkInfo.pos[2] = { x: nodeNewLoc.x - (toNode.x - linkInfo.pos[2].x), y: linkInfo.pos[3].y }\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[0].y }\n        }\n        //拖动的是from节点\n        else {\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[0].y }\n        }\n        //变成二折\n        if (linkInfo.pos[1].x > fromNode.x && linkInfo.pos[1].x < fromNode.x + fromNode.width) {\n          // console.log('变成二折')\n          linkInfo.pos.splice(0, 1)\n          ++linkInfo.pos[0].x\n          linkInfo.pos[0].y = (linkInfo.pos[1].y < this.getNodePosFromBoreder(fromNode, 'T').start.y ? this.getNodePosFromBoreder(fromNode, 'T').start.y : this.getNodePosFromBoreder(fromNode, 'B').start.y) + (eventObj.target.id === fromNode.id ? distance.y : 0)\n        }\n\n\n      } else if (fromNodeBord === 'L' && toNodeBord === 'R') {\n        if (fromNode.x > toNode.x + toNode.width) {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x - middleX, y: linkInfo.pos[0].y }\n          linkInfo.pos[2] = { x: linkInfo.pos[1].x, y: linkInfo.pos[3].y }\n        }\n        // from和to重合 -> 变成R to R\n        else {\n          linkInfo.pos[0] = { x: linkInfo.pos[0].x + fromNode.width, y: linkInfo.pos[0].y }\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x + 20, y: linkInfo.pos[0].y }\n          linkInfo.pos[2] = { x: linkInfo.pos[0].x + 20, y: linkInfo.pos[3].y }\n        }\n      } else if (fromNodeBord === 'R' && toNodeBord === 'L') {\n        //from在to左边\n        if (fromNode.x + fromNode.width < toNode.x) {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x + middleX, y: linkInfo.pos[0].y }\n          linkInfo.pos[2] = { x: linkInfo.pos[0].x + middleX, y: linkInfo.pos[3].y }\n        } else {\n          linkInfo.pos[1] = { x: linkInfo.pos[0].x + toNode.width + 20, y: linkInfo.pos[0].y }\n          linkInfo.pos[2] = { x: linkInfo.pos[0].x + toNode.width + 20, y: linkInfo.pos[3].y }\n          linkInfo.pos[3] = { x: linkInfo.pos[3].x + toNode.width, y: linkInfo.pos[3].y }\n        }\n      } else if (fromNodeBord === 'R' && toNodeBord === 'R') {\n        //拖动的是to节点\n        if (eventObj.target.id === toNode.id) {\n          linkInfo.pos[2] = { x: nodeNewLoc.x - (toNode.x - linkInfo.pos[2].x), y: linkInfo.pos[3].y }\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[0].y }\n        }\n        //拖动的是from节点\n        else {\n          linkInfo.pos[1] = { x: linkInfo.pos[2].x, y: linkInfo.pos[0].y }\n        }\n        //变成二折\n        if (linkInfo.pos[1].x > fromNode.x && linkInfo.pos[1].x < fromNode.x + fromNode.width) {\n          // console.log('变成二折')\n          linkInfo.pos.splice(0, 1)\n          --linkInfo.pos[0].x\n          linkInfo.pos[0].y = (linkInfo.pos[1].y < this.getNodePosFromBoreder(fromNode, 'T').start.y ? this.getNodePosFromBoreder(fromNode, 'T').start.y : this.getNodePosFromBoreder(fromNode, 'B').start.y) + (eventObj.target.id === fromNode.id ? distance.y : 0)\n        }\n      }\n    }\n\n    this.emit('line:move', linkInfo)\n  }\n\n  //更新 节点移动 触发的更改线条路径(自己连自己的情况)\n  moveLineForSameNode(linkInfo, eventObj) {\n    // const disY = copyEventObjTarget.y+copyEventObjTarget.height-linkInfo.pos[0].y\n    // const disX = copyEventObjTarget.x+copyEventObjTarget.width-linkInfo.pos[4].x\n    const disY = 20\n    const disX = 20\n    // console.log(disX, disY)\n    const dis0to1 = linkInfo.pos[1].x - linkInfo.pos[0].x\n    const dis1to2 = linkInfo.pos[2].y - linkInfo.pos[1].y\n\n    linkInfo.pos[0] = { x: eventObj.target.x + eventObj.target.width, y: eventObj.target.y + eventObj.target.height - disY }\n    linkInfo.pos[4] = { x: eventObj.target.x + eventObj.target.width - disX, y: eventObj.target.y + eventObj.target.height }\n    linkInfo.pos[1] = { x: linkInfo.pos[0].x + dis0to1, y: linkInfo.pos[0].y }\n    linkInfo.pos[2] = { x: linkInfo.pos[1].x, y: linkInfo.pos[1].y + dis1to2 }\n    linkInfo.pos[3] = { x: linkInfo.pos[4].x, y: linkInfo.pos[2].y }\n\n    this.emit('line:move', linkInfo)\n  }\n\n  //更新 路径移动 触发的更改线条路径\n  moveLineForLine(eventObj, mouseLoc) {\n    let fromNode, toNode, total = 0, eventPos = eventObj.target.pos, posMaxIdx = eventPos.length - 1\n\n    this._data.nodeDataArray?.forEach(item => {\n      if (item.key === eventObj.target.from) {\n        fromNode = item\n        total++\n      }\n      if (item.key === eventObj.target.to) {\n        toNode = item\n        total++\n      }\n      if (total === 2) return\n    })\n\n    //分支节点位置限制: from\n    if (['exclusive', 'inclusive'].includes(fromNode.type)) {\n      //挨着from的竖线\n      if (eventObj.targetLineStartPointIdx === 0 && (eventPos[eventObj.targetLineStartPointIdx].x === eventPos[eventObj.targetLineStartPointIdx + 1].x) && (this.getNodePosFromBoreder(fromNode, 'L').start.x >= mouseLoc.x || this.getNodePosFromBoreder(fromNode, 'R').start.x <= mouseLoc.x)) return\n      //中间横线\n      if (eventObj.targetLineStartPointIdx === 1 && (eventPos[eventObj.targetLineStartPointIdx].y === eventPos[eventObj.targetLineStartPointIdx + 1].y) && (this.getNodePosFromBoreder(fromNode, 'B').start.y >= mouseLoc.y)) return\n      //挨着to的竖线\n      if (eventObj.targetLineStartPointIdx === 2 && (eventPos[eventObj.targetLineStartPointIdx].x === eventPos[eventObj.targetLineStartPointIdx + 1].x) && (this.getNodePosFromBoreder(toNode, 'L').start.x >= mouseLoc.x || this.getNodePosFromBoreder(toNode, 'R').start.x <= mouseLoc.x)) return\n    }\n    //分支节点位置限制: to\n    else if (['exclusive', 'inclusive'].includes(toNode.type)) {\n      //一折线不能移动\n      if (posMaxIdx === 1) return\n      //二折线竖线不能动\n      if (posMaxIdx === 2 && eventObj.targetLineStartPointIdx === 1) return\n      //二折线横线限制\n      if (posMaxIdx === 2 && eventObj.targetLineStartPointIdx === 0 && this.getNodePosFromBoreder(toNode, 'T').start.y < mouseLoc.y) return\n      //三折最后的线不能动\n      if (posMaxIdx === 3 && eventObj.targetLineStartPointIdx === 2) return\n      //三折中间横线位置限制\n      if (posMaxIdx === 3 && eventObj.targetLineStartPointIdx === 1 && this.getNodePosFromBoreder(toNode, 'T').start.y < mouseLoc.y) return\n      //三折第一条线位置限制\n      if (posMaxIdx === 3 && eventObj.targetLineStartPointIdx === 0 && (this.getNodePosFromBoreder(fromNode, 'L').start.x >= mouseLoc.x || this.getNodePosFromBoreder(fromNode, 'R').start.x <= mouseLoc.x)) return\n    }\n\n    //一折情况\n    if (posMaxIdx === 1) {\n      //横线\n      if (eventPos[0].y === eventPos[1].y) {\n        //更新y坐标\n        eventPos[0].y = mouseLoc.y\n        eventPos[1].y = mouseLoc.y\n        //更新x坐标\n        if (this.getNodePosFromBoreder(fromNode, 'T').start.y > mouseLoc.y || this.getNodePosFromBoreder(fromNode, 'B').start.y < mouseLoc.y) {\n          eventPos[0].x = fromNode.x + fromNode.width / 2\n          eventPos.unshift({ x: fromNode.x + fromNode.width / 2, y: this.getNodePosFromBoreder(fromNode, 'T').start.y > mouseLoc.y ? fromNode.y : fromNode.y + fromNode.height })\n        }\n        if (this.getNodePosFromBoreder(toNode, 'T').start.y > mouseLoc.y || this.getNodePosFromBoreder(toNode, 'B').start.y < mouseLoc.y) {\n          eventPos[eventPos.length - 1].x = toNode.x + toNode.width / 2\n          eventPos.push({ x: toNode.x + toNode.width / 2, y: this.getNodePosFromBoreder(toNode, 'T').start.y > mouseLoc.y ? toNode.y : toNode.y + toNode.height })\n        }\n      }\n      //竖线\n      else {\n        //更新x坐标\n        eventPos[0].x = mouseLoc.x\n        eventPos[1].x = mouseLoc.x\n        //更新y坐标\n        if ((this.getNodePosFromBoreder(fromNode, 'L').start.x > mouseLoc.x || this.getNodePosFromBoreder(fromNode, 'R').start.x < mouseLoc.x)) {\n          eventPos[0].y = fromNode.y + fromNode.height / 2\n          eventPos.unshift({ x: this.getNodePosFromBoreder(fromNode, 'R').start.x < mouseLoc.x ? fromNode.x + fromNode.width : fromNode.x, y: fromNode.y + fromNode.height / 2 })\n        }\n        if (this.getNodePosFromBoreder(toNode, 'L').start.x > mouseLoc.x || this.getNodePosFromBoreder(toNode, 'R').start.x < mouseLoc.x) {\n          eventPos[eventPos.length - 1].y = toNode.y + toNode.height / 2\n          eventPos.push({ x: this.getNodePosFromBoreder(toNode, 'R').start.x < mouseLoc.x ? toNode.x + toNode.width : toNode.x, y: toNode.y + toNode.height / 2 })\n        }\n      }\n\n    }\n    //二折情况\n    else if (posMaxIdx === 2) {\n      //横线\n      if (eventPos[eventObj.targetLineStartPointIdx].y === eventPos[eventObj.targetLineStartPointIdx + 1].y) {\n        eventPos[eventObj.targetLineStartPointIdx].y = mouseLoc.y\n        eventPos[eventObj.targetLineStartPointIdx + 1].y = mouseLoc.y\n        //超出from节点边界\n        if ((this.getNodePosFromBoreder(fromNode, 'B').start.y < mouseLoc.y || this.getNodePosFromBoreder(fromNode, 'T').start.y > mouseLoc.y) && eventObj.targetLineStartPointIdx === 0) {\n          eventPos[eventObj.targetLineStartPointIdx].x = fromNode.x + fromNode.width / 2\n          eventPos.unshift({ x: fromNode.x + fromNode.width / 2, y: this.getNodePosFromBoreder(fromNode, 'T').start.y > mouseLoc.y ? fromNode.y : fromNode.y + fromNode.height })\n        }\n        //超出to节点边界\n        if ((this.getNodePosFromBoreder(toNode, 'B').start.y < mouseLoc.y || this.getNodePosFromBoreder(toNode, 'T').start.y > mouseLoc.y) && eventObj.targetLineStartPointIdx === 1) {\n          eventPos[eventObj.targetLineStartPointIdx + 1].x = toNode.x + toNode.width / 2\n          eventPos.push({ x: toNode.x + toNode.width / 2, y: this.getNodePosFromBoreder(toNode, 'T').start.y > mouseLoc.y ? toNode.y : toNode.y + toNode.height })\n        }\n        //进入from内\n        if (eventObj.targetLineStartPointIdx === 1 && this.getNodePosFromBoreder(fromNode, 'B').start.y > mouseLoc.y && this.getNodePosFromBoreder(fromNode, 'T').start.y < mouseLoc.y) {\n          // console.log('from内')\n          eventPos.splice(0, 1)\n          eventPos[0].x = toNode.x > fromNode.x ? fromNode.x + fromNode.width : fromNode.x\n        }\n        //进入to内\n        if (eventObj.targetLineStartPointIdx === 0 && this.getNodePosFromBoreder(toNode, 'B').start.y > mouseLoc.y && this.getNodePosFromBoreder(toNode, 'T').start.y < mouseLoc.y) {\n          // console.log('to内')\n          eventPos.splice(eventPos.length - 1, 1)\n          eventPos[eventPos.length - 1].x = fromNode.x > toNode.x ? toNode.x + toNode.width : toNode.x\n        }\n      }\n      //竖线\n      else {\n        eventPos[eventObj.targetLineStartPointIdx].x = mouseLoc.x\n        eventPos[eventObj.targetLineStartPointIdx + 1].x = mouseLoc.x\n        //超出from节点边界\n        if ((this.getNodePosFromBoreder(fromNode, 'L').start.x > mouseLoc.x || this.getNodePosFromBoreder(fromNode, 'R').start.x < mouseLoc.x) && eventObj.targetLineStartPointIdx === 0) {\n          // console.log('超出from')\n          eventPos[eventObj.targetLineStartPointIdx].y = fromNode.y + fromNode.height / 2\n          eventPos.unshift({ x: this.getNodePosFromBoreder(fromNode, 'L').start.x > mouseLoc.x ? fromNode.x : fromNode.x + fromNode.width, y: fromNode.y + fromNode.height / 2 })\n        }\n        //超出to节点边界\n        if ((this.getNodePosFromBoreder(toNode, 'L').start.x > mouseLoc.x || this.getNodePosFromBoreder(toNode, 'R').start.x < mouseLoc.x) && eventObj.targetLineStartPointIdx === 1) {\n          // console.log('超出to')\n          eventPos[eventObj.targetLineStartPointIdx + 1].y = toNode.y + toNode.height / 2\n          eventPos.push({ x: this.getNodePosFromBoreder(toNode, 'L').start.x > mouseLoc.x ? toNode.x : toNode.x + toNode.width, y: toNode.y + toNode.height / 2 })\n        }\n        //进入from内\n        if (eventObj.targetLineStartPointIdx === 1 && this.getNodePosFromBoreder(fromNode, 'L').start.x < mouseLoc.x && this.getNodePosFromBoreder(fromNode, 'R').start.x > mouseLoc.x) {\n          // console.log('from内')\n          eventPos.splice(0, 1)\n          eventPos[0].y = toNode.y > fromNode.y ? fromNode.y + fromNode.height : fromNode.y\n        }\n        //进入to内\n        if (eventObj.targetLineStartPointIdx === 0 && this.getNodePosFromBoreder(toNode, 'L').start.x < mouseLoc.x && this.getNodePosFromBoreder(toNode, 'R').start.x > mouseLoc.x) {\n          // console.log('to内')\n          eventPos.splice(eventPos.length - 1, 1)\n          eventPos[eventPos.length - 1].y = fromNode.y > toNode.y ? toNode.y + toNode.height : toNode.y\n        }\n      }\n    }\n    //三折情况\n    else if (posMaxIdx === 3) {\n      //横线\n      if (eventPos[eventObj.targetLineStartPointIdx].y === eventPos[eventObj.targetLineStartPointIdx + 1].y) {\n        eventPos[eventObj.targetLineStartPointIdx].y = mouseLoc.y\n        eventPos[eventObj.targetLineStartPointIdx + 1].y = mouseLoc.y\n        //触发线段是挨着from节点\n        if (eventObj.targetLineStartPointIdx === 0) {\n          //Z形状\n          if (judgeLineShapeIsZ(eventPos)) {\n            //超出最高点\n            if (eventPos[0].y < this.getNodePosFromBoreder(fromNode, 'T').start.y) {\n              eventPos[0] = { x: this.getNodePosFromBoreder(fromNode, 'T').start.x + fromNode.width / 2, y: fromNode.y }\n              eventPos[1] = { x: eventPos[0].x, y: mouseLoc.y }\n              if (mouseLoc.y < this.getNodePosFromBoreder(toNode, 'T').start.y || mouseLoc.y > this.getNodePosFromBoreder(toNode, 'B').start.y) {\n                eventPos[2] = { x: this.getNodePosFromBoreder(toNode, 'L').start.x + toNode.width / 2, y: mouseLoc.y }\n                eventPos[3] = { x: eventPos[2].x, y: mouseLoc.y < this.getNodePosFromBoreder(toNode, 'T').start.y ? this.getNodePosFromBoreder(toNode, 'T').start.y : this.getNodePosFromBoreder(toNode, 'B').start.y }\n              } else {\n                eventPos[2] = { x: eventPos[1].x < this.getNodePosFromBoreder(toNode, 'R').start.x ? this.getNodePosFromBoreder(toNode, 'L').start.x : this.getNodePosFromBoreder(toNode, 'R').start.x, y: mouseLoc.y }\n                eventPos.splice(3)\n              }\n            }\n            //超出最低点\n            else if (eventPos[0].y > this.getNodePosFromBoreder(fromNode, 'B').start.y) {\n              eventPos[0] = { x: this.getNodePosFromBoreder(fromNode, 'T').start.x + fromNode.width / 2, y: this.getNodePosFromBoreder(fromNode, 'B').start.y }\n              eventPos[1] = { x: eventPos[0].x, y: mouseLoc.y }\n              if (mouseLoc.y < this.getNodePosFromBoreder(toNode, 'T').start.y || mouseLoc.y > this.getNodePosFromBoreder(toNode, 'B').start.y) {\n                eventPos[2] = { x: this.getNodePosFromBoreder(toNode, 'L').start.x + toNode.width / 2, y: mouseLoc.y }\n                eventPos[3] = { x: eventPos[2].x, y: mouseLoc.y < this.getNodePosFromBoreder(toNode, 'T').start.y ? this.getNodePosFromBoreder(toNode, 'T').start.y : this.getNodePosFromBoreder(toNode, 'B').start.y }\n              } else {\n                eventPos[2] = { x: eventPos[1].x < this.getNodePosFromBoreder(toNode, 'R').start.x ? this.getNodePosFromBoreder(toNode, 'L').start.x : this.getNodePosFromBoreder(toNode, 'R').start.x, y: mouseLoc.y }\n                eventPos.splice(3)\n              }\n            }\n          }\n          //C形状\n          else {\n            if (mouseLoc.y < this.getNodePosFromBoreder(fromNode, 'T').start.y) {\n              eventPos[0].y = this.getNodePosFromBoreder(fromNode, 'T').start.y\n              eventPos[1].y = this.getNodePosFromBoreder(fromNode, 'T').start.y\n            } else if (mouseLoc.y > this.getNodePosFromBoreder(fromNode, 'B').start.y) {\n              eventPos[0].y = this.getNodePosFromBoreder(fromNode, 'B').start.y\n              eventPos[1].y = this.getNodePosFromBoreder(fromNode, 'B').start.y\n            }\n          }\n        }\n        //触发线段是挨着to节点\n        else if (eventObj.targetLineStartPointIdx === eventPos.length - 2) {\n          //Z形状\n          if (judgeLineShapeIsZ(eventPos)) {\n            //超出最高点\n            if (eventPos[3].y < this.getNodePosFromBoreder(toNode, 'T').start.y) {\n              eventPos[3] = { x: this.getNodePosFromBoreder(toNode, 'T').start.x + toNode.width / 2, y: toNode.y }\n              eventPos[2] = { x: eventPos[3].x, y: mouseLoc.y }\n              if (mouseLoc.y < this.getNodePosFromBoreder(fromNode, 'T').start.y || mouseLoc.y > this.getNodePosFromBoreder(fromNode, 'B').start.y) {\n                eventPos[1] = { x: this.getNodePosFromBoreder(fromNode, 'L').start.x + fromNode.width / 2, y: mouseLoc.y }\n                eventPos[0] = { x: eventPos[1].x, y: mouseLoc.y < this.getNodePosFromBoreder(fromNode, 'T').start.y ? this.getNodePosFromBoreder(fromNode, 'T').start.y : this.getNodePosFromBoreder(fromNode, 'B').start.y }\n              } else {\n                eventPos[1] = { x: eventPos[2].x > this.getNodePosFromBoreder(fromNode, 'R').start.x ? this.getNodePosFromBoreder(fromNode, 'R').start.x : this.getNodePosFromBoreder(fromNode, 'L').start.x, y: mouseLoc.y }\n                eventPos.splice(0, 1)\n              }\n            }\n            //超出最低点\n            else if (eventPos[3].y > this.getNodePosFromBoreder(toNode, 'B').start.y) {\n              eventPos[3] = { x: this.getNodePosFromBoreder(toNode, 'L').start.x + toNode.width / 2, y: this.getNodePosFromBoreder(toNode, 'B').start.y }\n              eventPos[2] = { x: eventPos[3].x, y: mouseLoc.y }\n              if (mouseLoc.y < this.getNodePosFromBoreder(fromNode, 'T').start.y || mouseLoc.y > this.getNodePosFromBoreder(fromNode, 'B').start.y) {\n                eventPos[1] = { x: this.getNodePosFromBoreder(fromNode, 'L').start.x + fromNode.width / 2, y: mouseLoc.y }\n                eventPos[0] = { x: eventPos[1].x, y: mouseLoc.y < this.getNodePosFromBoreder(fromNode, 'T').start.y ? this.getNodePosFromBoreder(fromNode, 'T').start.y : this.getNodePosFromBoreder(fromNode, 'B').start.y }\n              } else {\n                eventPos[1] = { x: eventPos[2].x > this.getNodePosFromBoreder(fromNode, 'R').start.x ? this.getNodePosFromBoreder(fromNode, 'R').start.x : this.getNodePosFromBoreder(fromNode, 'L').start.x, y: mouseLoc.y }\n                eventPos.splice(0, 1)\n              }\n            }\n          }\n          //C形状\n          else {\n            if (mouseLoc.y < this.getNodePosFromBoreder(toNode, 'T').start.y) {\n              eventPos[2].y = this.getNodePosFromBoreder(toNode, 'T').start.y\n              eventPos[3].y = this.getNodePosFromBoreder(toNode, 'T').start.y\n            } else if (mouseLoc.y > this.getNodePosFromBoreder(toNode, 'B').start.y) {\n              eventPos[2].y = this.getNodePosFromBoreder(toNode, 'B').start.y\n              eventPos[3].y = this.getNodePosFromBoreder(toNode, 'B').start.y\n            }\n          }\n        }\n        //触发线段是中间部位\n        else {\n          //from变化\n          if (mouseLoc.y > this.getNodePosFromBoreder(fromNode, 'T').start.y && mouseLoc.y < this.getNodePosFromBoreder(fromNode, 'B').start.y) {\n            eventPos.splice(0, 1)\n            eventPos[0].x = eventPos[1].x < this.getNodePosFromBoreder(fromNode, 'L').start.x ? this.getNodePosFromBoreder(fromNode, 'L').start.x : this.getNodePosFromBoreder(fromNode, 'R').start.x\n          }\n          //to变化\n          if (mouseLoc.y > this.getNodePosFromBoreder(toNode, 'T').start.y && mouseLoc.y < this.getNodePosFromBoreder(toNode, 'B').start.y) {\n            eventPos[eventPos.length - 2].x = eventPos[eventPos.length - 3].x < this.getNodePosFromBoreder(toNode, 'L').start.x ? this.getNodePosFromBoreder(toNode, 'L').start.x : this.getNodePosFromBoreder(toNode, 'R').start.x\n            eventPos.splice(eventPos.length - 1)\n          }\n        }\n      }\n      //竖线\n      else {\n        eventPos[eventObj.targetLineStartPointIdx].x = mouseLoc.x\n        eventPos[eventObj.targetLineStartPointIdx + 1].x = mouseLoc.x\n\n        //触发线段是挨着from节点\n        if (eventObj.targetLineStartPointIdx === 0) {\n          // console.log('from节点')\n          // Z形状\n          if (judgeLineShapeIsN(eventPos)) {\n            //超出最左点\n            if (eventPos[0].x < this.getNodePosFromBoreder(fromNode, 'L').start.x) {\n              eventPos[0] = { x: this.getNodePosFromBoreder(fromNode, 'L').start.x, y: this.getNodePosFromBoreder(fromNode, 'L').start.y + fromNode.height / 2 }\n              eventPos[1] = { x: mouseLoc.x, y: eventPos[0].y }\n              if (mouseLoc.x < this.getNodePosFromBoreder(toNode, 'L').start.x || mouseLoc.x > this.getNodePosFromBoreder(toNode, 'R').start.x) {\n                eventPos[2] = { x: mouseLoc.x, y: this.getNodePosFromBoreder(toNode, 'T').start.y + toNode.height / 2 }\n                eventPos[3] = { x: mouseLoc.x < this.getNodePosFromBoreder(toNode, 'L').start.x ? this.getNodePosFromBoreder(toNode, 'L').start.x : this.getNodePosFromBoreder(toNode, 'R').start.x, y: eventPos[2].y }\n              } else {\n                eventPos[2] = { x: mouseLoc.x, y: eventPos[1].y < this.getNodePosFromBoreder(toNode, 'T').start.y ? this.getNodePosFromBoreder(toNode, 'T').start.y : this.getNodePosFromBoreder(toNode, 'B').start.y }\n                eventPos.splice(3)\n              }\n            }\n            //超出最右点\n            else if (eventPos[0].x > this.getNodePosFromBoreder(fromNode, 'R').start.x) {\n              eventPos[0] = { x: this.getNodePosFromBoreder(fromNode, 'R').start.x, y: this.getNodePosFromBoreder(fromNode, 'R').start.y + fromNode.height / 2 }\n              eventPos[1] = { x: mouseLoc.x, y: eventPos[0].y }\n              if (mouseLoc.x < this.getNodePosFromBoreder(toNode, 'L').start.x || mouseLoc.x > this.getNodePosFromBoreder(toNode, 'R').start.x) {\n                eventPos[2] = { x: mouseLoc.x, y: this.getNodePosFromBoreder(toNode, 'T').start.y + toNode.height / 2 }\n                eventPos[3] = { x: mouseLoc.x < this.getNodePosFromBoreder(toNode, 'L').start.x ? this.getNodePosFromBoreder(toNode, 'L').start.x : this.getNodePosFromBoreder(toNode, 'R').start.x, y: eventPos[2].y }\n              } else {\n                eventPos[2] = { x: mouseLoc.x, y: eventPos[1].y < this.getNodePosFromBoreder(toNode, 'T').start.y ? this.getNodePosFromBoreder(toNode, 'T').start.y : this.getNodePosFromBoreder(toNode, 'B').start.y }\n                eventPos.splice(3)\n              }\n            }\n          }\n          //C形状\n          else {\n            if (mouseLoc.x < this.getNodePosFromBoreder(fromNode, 'L').start.x) {\n              eventPos[0].x = this.getNodePosFromBoreder(fromNode, 'L').start.x + 1\n              eventPos[1].x = this.getNodePosFromBoreder(fromNode, 'L').start.x + 1\n            } else if (mouseLoc.x > this.getNodePosFromBoreder(fromNode, 'R').start.x) {\n              eventPos[0].x = this.getNodePosFromBoreder(fromNode, 'R').start.x - 1\n              eventPos[1].x = this.getNodePosFromBoreder(fromNode, 'R').start.x - 1\n            }\n          }\n        }\n        //触发线段是挨着to节点\n        else if (eventObj.targetLineStartPointIdx === eventPos.length - 2) {\n          // console.log('to节点')\n          //Z形状\n          if (judgeLineShapeIsN(eventPos)) {\n            //超出最左点\n            if (eventPos[3].x < this.getNodePosFromBoreder(toNode, 'L').start.x) {\n              eventPos[3] = { x: this.getNodePosFromBoreder(toNode, 'L').start.x, y: this.getNodePosFromBoreder(toNode, 'L').start.y + toNode.height / 2 }\n              eventPos[2] = { x: mouseLoc.x, y: eventPos[3].y }\n              //超出对面节点\n              if (mouseLoc.x < this.getNodePosFromBoreder(fromNode, 'L').start.x || mouseLoc.x > this.getNodePosFromBoreder(fromNode, 'R').start.x) {\n                eventPos[1] = { x: mouseLoc.x, y: this.getNodePosFromBoreder(fromNode, 'T').start.y + fromNode.height / 2 }\n                eventPos[0] = { x: mouseLoc.x < this.getNodePosFromBoreder(fromNode, 'L').start.x ? this.getNodePosFromBoreder(fromNode, 'L').start.x : this.getNodePosFromBoreder(fromNode, 'R').start.x, y: eventPos[1].y }\n              } else {\n                eventPos[1] = { x: mouseLoc.x, y: eventPos[2].y > this.getNodePosFromBoreder(fromNode, 'B').start.y ? this.getNodePosFromBoreder(fromNode, 'B').start.y : this.getNodePosFromBoreder(fromNode, 'T').start.y }\n                eventPos.splice(0, 1)\n              }\n            }\n            //超出最右点\n            else if (eventPos[3].x > this.getNodePosFromBoreder(toNode, 'R').start.x) {\n              eventPos[3] = { x: this.getNodePosFromBoreder(toNode, 'R').start.x, y: this.getNodePosFromBoreder(toNode, 'R').start.y + toNode.height / 2 }\n              eventPos[2] = { x: mouseLoc.x, y: eventPos[3].y }\n              //超出对面节点\n              if (mouseLoc.x < this.getNodePosFromBoreder(fromNode, 'L').start.x || mouseLoc.x > this.getNodePosFromBoreder(fromNode, 'R').start.x) {\n                eventPos[1] = { x: mouseLoc.x, y: this.getNodePosFromBoreder(fromNode, 'T').start.y + fromNode.height / 2 }\n                eventPos[0] = { x: mouseLoc.x < this.getNodePosFromBoreder(fromNode, 'L').start.x ? this.getNodePosFromBoreder(fromNode, 'L').start.x : this.getNodePosFromBoreder(fromNode, 'R').start.x, y: eventPos[1].y }\n              } else {\n                eventPos[1] = { x: mouseLoc.x, y: eventPos[2].y > this.getNodePosFromBoreder(fromNode, 'B').start.y ? this.getNodePosFromBoreder(fromNode, 'B').start.y : this.getNodePosFromBoreder(fromNode, 'T').start.y }\n                eventPos.splice(0, 1)\n              }\n            }\n          }\n          //C形状\n          else {\n            if (mouseLoc.x < this.getNodePosFromBoreder(toNode, 'L').start.x) {\n              eventPos[2].x = this.getNodePosFromBoreder(toNode, 'L').start.x + 1\n              eventPos[3].x = this.getNodePosFromBoreder(toNode, 'L').start.x + 1\n            } else if (mouseLoc.x > this.getNodePosFromBoreder(toNode, 'R').start.x) {\n              eventPos[2].x = this.getNodePosFromBoreder(toNode, 'R').start.x - 1\n              eventPos[3].x = this.getNodePosFromBoreder(toNode, 'R').start.x - 1\n            }\n          }\n        }\n        //触发线段是中间部位\n        else {\n          // console.log('中间')\n          //from变化\n          if (mouseLoc.x > this.getNodePosFromBoreder(fromNode, 'L').start.x && mouseLoc.x < this.getNodePosFromBoreder(fromNode, 'R').start.x) {\n            eventPos.splice(0, 1)\n            eventPos[0].y = eventPos[1].y < this.getNodePosFromBoreder(fromNode, 'T').start.y ? this.getNodePosFromBoreder(fromNode, 'T').start.y : this.getNodePosFromBoreder(fromNode, 'B').start.y\n          }\n          //to变化\n          if (mouseLoc.x > this.getNodePosFromBoreder(toNode, 'L').start.x && mouseLoc.x < this.getNodePosFromBoreder(toNode, 'R').start.x) {\n            eventPos[eventPos.length - 2].y = eventPos[eventPos.length - 3].y < this.getNodePosFromBoreder(toNode, 'T').start.y ? this.getNodePosFromBoreder(toNode, 'T').start.y : this.getNodePosFromBoreder(toNode, 'B').start.y\n            eventPos.splice(eventPos.length - 1)\n          }\n        }\n      }\n\n      //判断是否需要三折合并一折\n      if (eventPos.length === 4 && eventPos[1].x === eventPos[2].x && eventPos[1].y === eventPos[2].y) {\n        eventPos.splice(1, 2)\n      }\n\n    }\n\n    //判断连线形状是不是Z形状（false为C）\n    function judgeLineShapeIsZ(eventPos) {\n      let judgeWidth = 0\n      for (let i = 0, len = eventPos.length - 1; i < len; i++) {\n        judgeWidth += Math.abs(eventPos[i].x - eventPos[i + 1].x)\n      }\n\n      return judgeWidth === Math.abs(eventPos[0].x - eventPos[eventPos.length - 1].x)\n    }\n    //判断连线形状是不是N形状（false为|__|）\n    function judgeLineShapeIsN(eventPos) {\n      let judgeHeight = 0\n      for (let i = 0, len = eventPos.length - 1; i < len; i++) {\n        judgeHeight += Math.abs(eventPos[i].y - eventPos[i + 1].y)\n      }\n\n      return judgeHeight === Math.abs(eventPos[0].y - eventPos[eventPos.length - 1].y)\n    }\n\n    this.emit('line:move', eventObj.target)\n  }\n\n  //新增结点\n  addNode(defaultAttr) {\n    this.addNodeDefaultAttr = defaultAttr\n    this.editType = 'addNode'\n  }\n\n  /**\n   * 包装结点信息方法\n   * @param {Object} addNodeDefaultAttr 默认信息\n   * @param {Object} mouseLoc 当前鼠标位置\n   */\n  packNodeInfo(addNodeDefaultAttr, mouseLoc) {\n    const { x, y } = this.transLoc(mouseLoc)\n\n    const newNode = Object.assign(addNodeDefaultAttr, {\n      x, y: y + 24 ,\n      width: 50,\n      height: 50,\n    })\n\n    return newNode\n  }\n\n  /**\n   * 获取与鼠标位置重合的实体\n   * @param {*} mouseLoc \n   */\n  getOverlapNode(mouseLoc) {\n    const data = this._data, loc = this.transLoc(mouseLoc)\n\n    //查看是否节点触发\n    for (let i = 0, len = data.nodeDataArray.length; i < len; i++) {\n      const w = Number(data.nodeDataArray[i].width) || 100\n      const h = Number(data.nodeDataArray[i].height) || 50\n      const x = Number(data.nodeDataArray[i].x)\n      const y = Number(data.nodeDataArray[i].y)\n\n      if (x > x && x < w + x && y > y && y < h + y) {\n        return data.nodeDataArray[i]\n      }\n    }\n  }\n\n  /**\n   * 根据鼠标所在位置，换算出相对于完整绘图区的坐标\n   * @param {object} mouseLoc 鼠标在canvas上的位置\n   */\n  transLoc(mouseLoc) {\n    const translatePos = this.canvas.getTranslate()\n    const zoomRate = this.canvas.zoomRate\n    const evX = Math.floor((mouseLoc.x + translatePos.x) / zoomRate), evY = Math.floor((mouseLoc.y + translatePos.y) / zoomRate)\n\n    return {\n      x: evX,\n      y: evY,\n    }\n  }\n\n  //新增连线\n  addLine(lineType) {\n    this.editType = lineType\n  }\n\n  //新增框\n  addMark() {\n    this.editType = 'addMark'\n  }\n\n  //新增备注\n  addNote() {\n    this.editType = 'addNote'\n  }\n\n  // 新增标注信息\n  addRemark(remarkStr = '') {\n    this.focusTarget?.forEach(focusItem => {\n      focusItem.remark = remarkStr\n    })\n\n    this.update()\n  }\n\n  //改变颜色\n  changeColor(value, type) {\n    this.focusTarget?.forEach(focusItem => {\n      //实体\n      if (focusItem.attributes) {\n        if (type !== 'color') {\n          focusItem[type] = value\n        } else {\n          console.log('修改的是属性文字颜色, 逻辑待完善.')\n        }\n      }\n      //框\n      else if (focusItem.type === 'mark') {\n        focusItem[type] = value\n      }\n      //备注文本\n      else if (focusItem.type === 'note') {\n        focusItem.color = value\n      }\n    })\n    this.update()\n  }\n\n  /**\n   * 根据chooseTargets数据创建新的连线信息数据\n   * @param {String} lineType     必选，创建的线型\n   * @param {Object} defaultData  可选，带有默认数据的线，当该参数有值证明是批量建线\n   */\n  createLineInfo(lineType, defaultData) {\n    let chooseTargets = this.chooseTargets,\n      chooseTargets0Loc = this.getNodePosFromBoreder(chooseTargets[0], 'L'),\n      chooseTargets1Loc = this.getNodePosFromBoreder(chooseTargets[1], 'L')\n\n    let pos = []\n    //起始节点和终止节点是同一个\n    if (chooseTargets[0].key === chooseTargets[1].key) {\n      pos[0] = { x: chooseTargets[0].x + chooseTargets[0].width, y: chooseTargets[0].y + chooseTargets[0].height - 20 }\n      pos[1] = { x: chooseTargets[0].x + chooseTargets[0].width + 20, y: chooseTargets[0].y + chooseTargets[0].height - 20 }\n      pos[2] = { x: chooseTargets[0].x + chooseTargets[0].width + 20, y: chooseTargets[0].y + chooseTargets[0].height + 20 }\n      pos[3] = { x: chooseTargets[0].x + chooseTargets[0].width - 20, y: chooseTargets[0].y + chooseTargets[0].height + 20 }\n      pos[4] = { x: chooseTargets[0].x + chooseTargets[0].width - 20, y: chooseTargets[0].y + chooseTargets[0].height }\n    }\n    //起始节点是分支节点\n    else if (['exclusive', 'inclusive'].includes(chooseTargets[0].type)) {\n      //分支上 to下 -> N形状\n      if (chooseTargets0Loc.end.y < chooseTargets1Loc.start.y) {\n        pos[0] = { x: chooseTargets0Loc.end.x + Math.floor((chooseTargets[0].width / 2)), y: chooseTargets0Loc.end.y }\n        pos[1] = { x: pos[0].x, y: pos[0].y + Math.floor((chooseTargets1Loc.start.y - chooseTargets0Loc.end.y) / 2) }\n        pos[2] = { x: chooseTargets1Loc.start.x + Math.floor((chooseTargets[1].width / 2)), y: pos[1].y }\n        pos[3] = { x: pos[2].x, y: chooseTargets1Loc.start.y }\n      }\n      //分支下 to上 -> U形状\n      else {\n        pos[0] = { x: chooseTargets0Loc.end.x + Math.floor((chooseTargets[0].width / 2)), y: chooseTargets0Loc.end.y }\n        pos[1] = { x: pos[0].x, y: Math.max(chooseTargets0Loc.end.y, chooseTargets1Loc.start.y) + 20 }\n        pos[2] = { x: chooseTargets1Loc.start.x + Math.floor((chooseTargets[1].width / 2)), y: pos[1].y }\n        pos[3] = { x: pos[2].x, y: chooseTargets1Loc.end.y }\n      }\n    }\n    //终止节点是分支节点\n    else if (['exclusive', 'inclusive'].includes(chooseTargets[1].type)) {\n      //from上 分支下\n      if (chooseTargets0Loc.end.y < chooseTargets1Loc.start.y) {\n        pos[0] = { x: chooseTargets0Loc.end.x + Math.floor((chooseTargets[0].width / 2)), y: chooseTargets0Loc.end.y }\n        pos[1] = { x: pos[0].x, y: pos[0].y + Math.floor((chooseTargets1Loc.start.y - chooseTargets0Loc.end.y) / 2) }\n        pos[2] = { x: chooseTargets1Loc.start.x + Math.floor((chooseTargets[1].width / 2)), y: pos[1].y }\n        pos[3] = { x: pos[2].x, y: chooseTargets1Loc.start.y }\n      }\n      //from下分支上\n      else {\n        pos[0] = { x: chooseTargets0Loc.end.x + Math.floor((chooseTargets[0].width / 2)), y: chooseTargets0Loc.start.y }\n        pos[1] = { x: pos[0].x, y: Math.min(chooseTargets0Loc.end.y, chooseTargets1Loc.start.y) - 20 }\n        pos[2] = { x: chooseTargets1Loc.start.x + Math.floor((chooseTargets[1].width / 2)), y: pos[1].y }\n        pos[3] = { x: pos[2].x, y: chooseTargets1Loc.start.y }\n      }\n\n    }\n    //起始节点是普通节点\n    else {\n      //from左  to右\n      if (this.getNodePosFromBoreder(chooseTargets[0], 'R').start.x < this.getNodePosFromBoreder(chooseTargets[1], 'L').start.x) {\n        //有重合 -> 直线\n        if ((chooseTargets1Loc.start.y - chooseTargets0Loc.end.y) * (chooseTargets1Loc.end.y - chooseTargets0Loc.start.y) < 0) {\n          // console.log('有重合')\n          let y = Math.max(chooseTargets0Loc.start.y, chooseTargets1Loc.start.y) + Math.abs(Math.floor((Math.min(chooseTargets0Loc.end.y, chooseTargets1Loc.end.y) - Math.max(chooseTargets0Loc.start.y, chooseTargets1Loc.start.y)) / 2))\n          pos[0] = { x: this.getNodePosFromBoreder(chooseTargets[0], 'R').start.x, y: y }\n          pos[1] = { x: this.getNodePosFromBoreder(chooseTargets[1], 'L').start.x, y: y }\n        }\n        //无重合 -> 二折\n        else {\n          // console.log('无重合')\n          //from下  to上\n          if (chooseTargets0Loc.start.y > chooseTargets1Loc.end.y) {\n            pos[0] = { x: chooseTargets0Loc.start.x + Math.floor(chooseTargets[0].width / 2), y: chooseTargets0Loc.start.y }\n            pos[1] = { x: pos[0].x, y: chooseTargets1Loc.start.y + Math.floor(chooseTargets[1].height / 2) }\n            pos[2] = { x: chooseTargets1Loc.start.x, y: pos[1].y }\n          }\n          //from上  to下\n          else {\n            pos[0] = { x: this.getNodePosFromBoreder(chooseTargets[0], 'R').start.x, y: chooseTargets0Loc.start.y + Math.floor(chooseTargets[0].height / 2) }\n            pos[1] = { x: this.getNodePosFromBoreder(chooseTargets[1], 'L').start.x + Math.floor(chooseTargets[1].width / 2), y: pos[0].y }\n            pos[2] = { x: pos[1].x, y: this.getNodePosFromBoreder(chooseTargets[1], 'L').start.y }\n          }\n        }\n      }\n      //from右  to左\n      else if (this.getNodePosFromBoreder(chooseTargets[0], 'L').start.x > this.getNodePosFromBoreder(chooseTargets[1], 'R').start.x) {\n        //有重合 -> 直线\n        if ((chooseTargets1Loc.start.y - chooseTargets0Loc.end.y) * (chooseTargets1Loc.end.y - chooseTargets0Loc.start.y) < 0) {\n          // console.log('有重合')\n          let y = Math.max(chooseTargets0Loc.start.y, chooseTargets1Loc.start.y) + Math.abs(Math.floor((Math.min(chooseTargets0Loc.end.y, chooseTargets1Loc.end.y) - Math.max(chooseTargets0Loc.start.y, chooseTargets1Loc.start.y)) / 2))\n          pos[0] = { x: this.getNodePosFromBoreder(chooseTargets[0], 'L').start.x, y: y }\n          pos[1] = { x: this.getNodePosFromBoreder(chooseTargets[1], 'R').start.x, y: y }\n        }\n        //无重合 -> 二折\n        else {\n          // console.log('无重合')\n          //from下  to上\n          if (chooseTargets0Loc.start.y > chooseTargets1Loc.end.y) {\n            pos[0] = { x: chooseTargets0Loc.start.x + Math.floor(chooseTargets[0].width / 2), y: chooseTargets0Loc.start.y }\n            pos[1] = { x: pos[0].x, y: chooseTargets1Loc.start.y + Math.floor(chooseTargets[1].height / 2) }\n            pos[2] = { x: this.getNodePosFromBoreder(chooseTargets[1], 'R').start.x, y: pos[1].y }\n          }\n          //from上  to下\n          else {\n            pos[0] = { x: this.getNodePosFromBoreder(chooseTargets[0], 'L').start.x, y: chooseTargets0Loc.start.y + Math.floor(chooseTargets[0].height / 2) }\n            pos[1] = { x: this.getNodePosFromBoreder(chooseTargets[1], 'L').start.x + Math.floor(chooseTargets[1].width / 2), y: pos[0].y }\n            pos[2] = { x: pos[1].x, y: this.getNodePosFromBoreder(chooseTargets[1], 'L').start.y }\n          }\n        }\n      }\n      //from下 to上 上下非重叠重合 -> 直线\n      else if (chooseTargets0Loc.start.y > chooseTargets1Loc.end.y) {\n        let startX = Math.max(chooseTargets0Loc.start.x, chooseTargets1Loc.start.x)\n        let endX = Math.min(this.getNodePosFromBoreder(chooseTargets[0], 'R').start.x, this.getNodePosFromBoreder(chooseTargets[1], 'R').start.x)\n        let x = startX + Math.floor((endX - startX) / 2)\n\n        pos[0] = { x: x, y: chooseTargets0Loc.start.y }\n        pos[1] = { x: x, y: chooseTargets1Loc.end.y }\n      }\n      //from上 to下&重叠在一起\n      else {\n        let startX = Math.max(chooseTargets0Loc.start.x, chooseTargets1Loc.start.x)\n        let endX = Math.min(this.getNodePosFromBoreder(chooseTargets[0], 'R').start.x, this.getNodePosFromBoreder(chooseTargets[1], 'R').start.x)\n        let x = startX + Math.floor((endX - startX) / 2)\n\n        pos[0] = { x: x, y: chooseTargets0Loc.end.y }\n        pos[1] = { x: x, y: chooseTargets1Loc.start.y }\n      }\n    }\n\n    //生成完整的线信息，通知外部更新数据\n    if (pos.length) {\n      const newLine = {}\n\n      //没有线的默认数据 -> 创建单根线情况\n      if (!defaultData) {\n        Object.assign(newLine, {\n          key: this.createKey(),\n          from: chooseTargets[0].key,\n          to: chooseTargets[1].key,\n          pos: pos,\n          type: lineType,\n        })\n      }\n      //有线的默认数据 -> 批量创建线的情况\n      else {\n        defaultData.pos = pos\n        Object.assign(newLine, defaultData)\n      }\n\n      return newLine\n    }\n    //线信息生成失败\n    else {\n      console.error('createLine方法错误：未生成对应关键点坐标')\n    }\n  }\n\n  /**\n   * 根据chooseTargets数据创建新的连线\n   * @param {String} lineType     必选，创建的线型\n   * @param {Object} defaultData  可选，带有默认数据的线，当该参数有值证明是批量建线\n   */\n  createLine(lineType, defaultData) {\n    const newLineInfo = this.createLineInfo(lineType, defaultData)\n\n    // 过滤器连线不调用外部接口\n    if (['primaryKey', 'foreignKey'].includes(lineType)) this.externalFn.addLine(newLineInfo)\n  }\n\n  mergeLine(lineType, defaultData) {\n    const newLineInfo = this.createLineInfo(lineType, defaultData)\n\n    return Object.assign(defaultData, newLineInfo)\n  }\n\n  //根据chooseTargets数据创建新的节点连线\n  createBranchLine() {\n    let chooseTargets = [].concat(this.chooseTargets),\n      chooseTargets0Loc = this.getNodePosFromBoreder(chooseTargets[0], 'L'),\n      chooseTargets1Loc = this.getNodePosFromBoreder(chooseTargets[1], 'L')\n\n    // 终止节点是过滤器的: 不允许创建\n    if (['inclusive', 'exclusive'].includes(chooseTargets[1].type)) {\n      this.$message({\n        message: '未将对象引用设置到对象的实例。',\n        type: 'error',\n        showClose: true,\n      })\n    }\n    // 开始节点是过滤器的: 只创建一条fromFilter线\n    else if (['inclusive', 'exclusive'].includes(chooseTargets[0].type)) {\n      // 来自于过滤器(下行线)\n      const fromFilter = this.createLine('fromFilterPrimaryKey') //目前没有fromFilterForeignKey的情况\n\n      this.externalFn.addFilter({\n        fromFilter,\n      })\n    }\n    // 开始节点不是过滤器的: 正常的创建逻辑->两根线,一个过滤器\n    else {\n\n      //from上 to下 且间距>50（因为branch分支块的高度是40）-> 取两块中点放置分支\n      const loc = chooseTargets0Loc.end.y + 50 < chooseTargets1Loc.start.y\n        ? { x: chooseTargets0Loc.start.x + Math.floor(chooseTargets[0].width / 2) - 20, y: chooseTargets0Loc.end.y + Math.floor((chooseTargets1Loc.start.y - chooseTargets0Loc.end.y) / 2) - 10 }\n        : { x: chooseTargets1Loc.start.x + Math.floor(chooseTargets[1].width / 2) - 20, y: Math.min(chooseTargets0Loc.start.y, chooseTargets1Loc.start.y) - 50 }\n      //生成过滤器节点\n      const newBranchFilter = {\n        key: this.createKey(),\n        x: loc.x,\n        y: loc.y,\n        width: 40,\n        height: 20,\n        type: 'exclusive',\n        fromKey: chooseTargets[0].key,\n      }\n\n      // 链接到过滤器(上行线)\n      this.chooseTargets = [chooseTargets[0], newBranchFilter]\n      const toFilter = this.createLine('toFilter')\n\n      // 来自于过滤器(下行线)\n      this.chooseTargets = [newBranchFilter, chooseTargets[1]]\n      const fromFilter = this.createLine('fromFilterPrimaryKey') //目前没有fromFilterForeignKey的情况\n\n      this.externalFn.addFilter({\n        filter: newBranchFilter,\n        toFilter,\n        fromFilter,\n      })\n\n      this.chooseTargets = []\n    }\n  }\n\n  //根据key找到对应的节点\n  getNodeWithKey(key) {\n    for (const item of this._data.nodeDataArray) {\n      if (item.key === key) {\n        return item\n      }\n    }\n  }\n\n  //批量创建连线\n  createLines(lineList) {\n    /**\n     * lineList = [{key: 1234, from: 1, to: 2}]\n     */\n    for (const item of lineList) {\n      const fromNode = this.getNodeWithKey(item.from)\n      const toNode = this.getNodeWithKey(item.to)\n      if (fromNode && toNode) {\n        //目前没考虑过滤器的情况\n        this.chooseTargets = [fromNode, toNode]\n        this.createLine(item.type, item)\n      }\n    }\n    this.chooseTargets = []\n    this.update()\n  }\n\n  //批量创建连线\n  mergeLines(lineList) {\n    /**\n     * lineList = [{key: 1234, from: 1, to: 2}]\n     */\n    const resultLines = []\n    for (const item of lineList) {\n      const fromNode = this.getNodeWithKey(item.from)\n      const toNode = this.getNodeWithKey(item.to)\n      if (fromNode && toNode) {\n        //目前没考虑过滤器的情况\n        this.chooseTargets = [fromNode, toNode]\n        resultLines.push(this.mergeLine(item.type, item))\n      }\n    }\n    this.chooseTargets = []\n\n    return resultLines\n  }\n\n  //生成最大key方法（目前未做重复性判断）\n  createKey() {\n    //格式：时间戳 + 随机数\n    return (+new Date()) + '' + Math.floor(Math.random() * 100000)\n  }\n\n  //封装提示信息\n  $message(val) {\n    this.externalFn.$message && this.externalFn.$message(val)\n  }\n}\n","const imgUrl = 'http://himg.bdimg.com/sys/portrait/item/2610e8b5b0e5a4b1e69ca8e69893fc0b.jpg'\n\nexport const defaultData = {\n  'nodeDataArray': [\n    {\n      'key': 'q000', x: 100, y: 100, 'width': 100, 'height': 100, bgC: '#FF8080', bdC: 'red', tableName: 'Entity1',\n      physicalTables: true, //物理表\n      quotePrimaryKey: true, //引用了别人的主键的标识\n      attributes: [\n        {\n          attrName: 'attr1', primaryKey: true, foreignKey: true, icons: [\n            {\n              bgC: '#FEFF80',\n              color: '#8080FF',\n              text: 'S',\n            },\n            {\n              text: 'L',\n              bdC: 'green',\n            },\n          ],\n        },\n        { attrName: 'attr2', primaryKey: true },\n        {\n          attrName: '属性名3', primaryKey: true, children: [\n            {\n              attrName: '属性名3-1', primaryKey: true, foreignKey: true, children: [\n                {\n                  attrName: '属性名3-1-1', primaryKey: true, foreignKey: true, children: [\n                    { attrName: '属性名3-1-1-1', primaryKey: true, foreignKey: true },\n                  ], icons: [\n                    {\n                      text: 'A',\n                      bdC: 'green',\n                    },\n                  ],\n                },\n              ],\n            },\n            { attrName: '属性名3-2', primaryKey: true, foreignKey: true },\n            { attrName: '属性名3-3', primaryKey: true, foreignKey: true },\n          ],\n        },\n        {\n          attrName: 'attr4', primaryKey: false, foreignKey: true, icons: [\n            {\n              bgC: '#FEFF80',\n              color: '#8080FF',\n              text: 'S',\n            },\n            {\n              text: '标',\n            },\n          ],\n        },\n        { attrName: 'attr5', primaryKey: false },\n        {\n          attrName: 'attr6', primaryKey: false, icons: [\n            {\n              text: 'A',\n              bdC: 'green',\n            },\n          ],\n        },\n      ],\n      checkoutInfo: {\n        //检出对象：1是被我检出；2是他人检出\n        operator: 1,\n        //检出对象的头像\n        imgUrl,\n      },\n      // 手动修改过尺寸\n      // manualChange: true,\n    },\n    {\n      'key': 'q111', x: 400, y: 100, 'width': 50, 'height': 100, bgC: '#8080FF', tableName: '表2',\n      attributes: [\n        { attrName: '属性名1', primaryKey: true, foreignKey: false },\n        { attrName: '属性名2', primaryKey: true },\n        { attrName: '属性名3', primaryKey: true },\n      ],\n      checkoutInfo: {\n        operator: 2,\n        imgUrl,\n      },\n    },\n    {\n      'key': 'q222', x: 100, y: 400, 'width': 50, 'height': 100, bgC: '#FFFF80', tableName: 'Entity3',\n      attributes: [\n        { attrName: '属性名1', primaryKey: false, foreignKey: false },\n        { attrName: '属性名2', primaryKey: false },\n      ],\n      checkoutInfo: {\n        operator: 2,\n        imgUrl,\n      },\n    },\n    // 过滤器节点\n    { 'key': 'q444', x: 100, y: 250, 'width': 40, 'height': 20, 'type': 'inclusive' },\n\n    // 企业模型 - 带解释节点\n    { 'key': 'q555', x: 705, y: 92, 'width': 260, 'height': 100, tableName: 'Entity inside', type: 'inside' },\n    {\n      'key': 'q666', x: 600, y: 280, 'width': 260, 'height': 100, tableName: 'Entity discribe', type: 'explain',\n      attributes: [\n        { label: '说明', content: '表示与银行有利害关系，以及银行希望保留其信息' },\n        { label: '示例', content: '个人 组织 客户' },\n        { label: '所属部门', content: '数据研究院' },\n        { label: '负责人', content: '杨中旭' },\n      ],\n    },\n    // 画布外实体\n    { 'key': 'test', x: 2999, y: 2999, 'width': 260, 'height': 100, tableName: 'Entity away', type: 'inside' },\n    // 画布外实体 - 负数\n    { 'key': 'test', x: -2999, y: -2999, 'width': 260, 'height': 100, tableName: 'Entity away', type: 'inside' },\n  ],\n  'linkDataArray': [\n    //主键实线\n    { key: 1, 'from': 'q000', 'to': 'q111', 'pos': [{ x: 200, y: 125 }, { x: 400, y: 125 }], type: 'primaryKey', numLineTypes: 1, remark: '主键' },\n    // { key: 2, 'from': 'q000', 'to': 'q111', 'pos': [{ x: 200, y: 125 }], type: 'primaryKey', numLineTypes: 1 },\n\n    //非主键虚线\n    { key: 3, 'from': 'q111', 'to': 'q222', 'pos': [{ x: 400, y: 150 }, { x: 300, y: 150 }, { x: 300, y: 450 }, { x: 150, y: 450 }], type: 'foreignKey', numLineTypes: 1 },\n\n    //分支\n    { key: 4, 'from': 'q000', 'to': 'q444', 'pos': [{ x: 120, y: 200 }, { x: 120, y: 250 }], type: 'toFilter', numLineTypes: 2 },\n    { key: 5, 'from': 'q444', 'to': 'q222', 'pos': [{ x: 120, y: 270 }, { x: 120, y: 400 }], type: 'fromFilter', numLineTypes: 4 },\n\n    //箭头线\n    { key: 6, 'from': 'q555', 'to': 'q666', 'pos': [{ x: 782, y: 192 }, { x: 782, y: 280 }], type: 'arrow', numLineTypes: 1, remark: '来自' },\n\n  ],\n  'markDataArray': [\n\n  ],\n  'noteDataArray': [\n    {\n      key: '157837643603536658',\n      x: 525, y: 408,\n      text: '啦啦啦啦啦111',\n      type: 'note',\n      color: '#0000ff',\n    },\n  ],\n}\n\n\nconst makeManyNodes = (nodeNumber = 10000) => {\n  for (let i = 0; i < nodeNumber; i++) {\n    defaultData.nodeDataArray.push({\n      key: 'q000' + i,\n      x: 100 + i * 100, y: 100 + i * 100,\n      width: 100,\n      height: 50,\n      bgC: '#FF8080',\n      bdC: 'red',\n      tableName: '测试' + i,\n      physicalTables: true, //物理表\n      quotePrimaryKey: true, //引用了别人的主键的标识\n      attributes: defaultData.nodeDataArray[0].attributes,\n      checkoutInfo: {},\n    })\n  }\n}\nconst makeManyNodeAttrs = (attrNumber = 500) => {\n  for (let i = 0; i < attrNumber; i++) {\n    defaultData.nodeDataArray[0].attributes.push({\n      attrName: `批量生成${i}`,\n      primaryKey: true,\n    })\n  }\n}\n// 性能测试\nexport const useBigData = () => {\n  makeManyNodes()\n  makeManyNodeAttrs()\n}\n// useBigData()","// export const rightMenu = [\n//   [\n//     {\n//       icon: '',\n//       value: 'edit',\n//       label: '编辑',\n//     },\n//     {\n//       icon: '',\n//       value: 'delete',\n//       label: '删除',\n//     },\n//   ],\n//   [\n//     {\n//       icon: '',\n//       value: 'checkin',\n//       label: '签入',\n//     },\n//     {\n//       icon: '',\n//       value: 'checkout',\n//       label: '签出',\n//     },\n//   ],\n//   [\n//     {\n//       icon: '',\n//       value: 'copy',\n//       label: '复制',\n//     },\n//     {\n//       icon: '',\n//       value: 'parse',\n//       label: '粘贴',\n//     },\n//   ],\n//   [\n//     {\n//       icon: '',\n//       value: 'remark',\n//       label: '添加标注',\n//     },\n//     {\n//       icon: '',\n//       value: 'auto-line',\n//       label: '重新规划连线',\n//       disabled: true,\n//     },\n//     {\n//       icon: '',\n//       value: 'auto-line',\n//       label: '自动适应大小',\n//     },\n//     {\n//       icon: '',\n//       value: 'more',\n//       label: '更多',\n//       children: [\n//         [\n//           {\n//             icon: '',\n//             value: 'more1',\n//             label: '更多1',\n//           },\n//         ]\n//       ]\n//     },\n//   ],\n// ]\n\nexport const rightMenu = [\n  [\n    {\n      icon: '',\n      value: 'copy',\n      label: '复制',\n    },\n    {\n      icon: '',\n      value: 'extend-copy',\n      label: '继承复制',\n    },\n    {\n      icon: '',\n      value: 'parse',\n      label: '粘贴',\n    },\n  ],\n  [\n    {\n      icon: '',\n      value: 'redo',\n      label: '撤销',\n    },\n  ],\n  [\n    {\n      icon: '',\n      value: 'parent',\n      label: '显示父级关联',\n      children: [\n        {\n          icon: '',\n          value: 'level-2',\n          label: '显示2级',\n        },\n        {\n          icon: '',\n          value: 'level-all',\n          label: '显示全部',\n        },\n        {\n          icon: '',\n          value: 'level-1',\n          label: '显示1级',\n        },\n      ]\n    },\n  ],\n  [\n    {\n      icon: '',\n      value: 'auto-size',\n      label: '自适应大小',\n    },\n    {\n      icon: '',\n      value: 'auto-layout',\n      label: '自动排布',\n    },\n  ],\n  [\n    {\n      icon: '',\n      value: 'style',\n      label: '展示风格',\n      children: [\n        {\n          icon: '',\n          value: 'brief',\n          label: '概要',\n        },\n        {\n          icon: '',\n          value: 'easy',\n          label: '简单',\n        },\n        {\n          icon: '',\n          value: 'normal',\n          label: '常规',\n        },\n        {\n          icon: '',\n          value: 'detail',\n          label: '详细',\n        },\n      ]\n    },\n  ],\n  {\n    icon: '',\n    value: 'delete',\n    label: '删除',\n  },\n]","export default \"__VITE_ASSET__386d2929__\"","<template>\n  <div class=\"erg\">\n    <div class=\"toobar\">\n      <el-button size=\"small\" circle title=\"新增实体\" @click=\"addNode\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#icon-tool-add`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"复制\" @click=\"copy\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#copy`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"新增主键\" @click=\"addLine('primaryKey')\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#icon-tool-primary`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"新增非主键\" @click=\"addLine('foreignKey')\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#icon-tool-foreign`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"新增过滤器\" @click=\"addLine('branchLine')\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#icon-tool-subtype`\"></use>\n          </svg>\n        </template>\n      </el-button>\n\n      <el-divider direction=\"vertical\" />\n\n      <el-button size=\"small\" circle title=\"新增框\" @click=\"addMark\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#icon-tool-square`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"新增备注\" @click=\"addNote\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#icon-tool-text`\"></use>\n          </svg>\n        </template>\n      </el-button>\n\n      <el-divider direction=\"vertical\" />\n\n      <el-button v-if=\"state.lock === 1\" size=\"small\" circle title=\"只读\" @click=\"setEditable\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#lock`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button v-else size=\"small\" circle title=\"编辑\" @click=\"setEditable\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#unlock`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"批量创建连线\" @click=\"createLines\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#copy`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"放大\" @click=\"changeCanvasScale(20)\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#plus-circle`\"></use>\n          </svg>\n        </template>\n      </el-button>\n      <el-button size=\"small\" circle title=\"缩小\" @click=\"changeCanvasScale(-20)\">\n        <template #icon>\n          <svg>\n            <use :xlink:href=\"`${Icons}#minus-circle`\"></use>\n          </svg>\n        </template>\n      </el-button>\n\n      <el-divider direction=\"vertical\" />\n      \n      <el-color-picker v-model=\"state.bgc\" size=\"small\" @change=\"(value) => changeColor(value, 'bgC')\" />\n      <el-color-picker v-model=\"state.bdC\" size=\"small\" @change=\"(value) => changeColor(value, 'bdC')\" />\n      <el-color-picker v-model=\"state.color\" size=\"small\" @change=\"(value) => changeColor(value, 'color')\" />\n    </div>\n    <div id=\"canvas\" class=\"canvas\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {reactive, onBeforeUnmount, onMounted, watch, onUnmounted} from 'vue'\nimport {ElButton, ElDivider, ElColorPicker} from 'element-plus'\nimport {Erg as Graph} from '@ej/erg-renderer/src'\nimport {defaultData as data} from './mock'\nimport {rightMenu} from './right-menu'\nimport Icons from './assets/icon/symbol-defs.svg'\n\nconst props = withDefaults(defineProps<{\n  useThumbnail: boolean,\n  useRightMenu: boolean,\n  useAttrFocus: boolean,\n  editable: number,\n}>(), {\n  useThumbnail: true,\n  useRightMenu: true,\n  useAttrFocus: true,\n  editable: 1,\n})\n\nlet graph\nconst nodeMap = new Map()\nconst lineMap = new Map()\nconst noteMap = new Map()\nconst markMap = new Map()\n\nconst state = reactive({\n  scale: 100,\n  bgC: '',\n  bdC: '',\n  color: '',\n  lock: 1,\n})\n\nconst initData = () => {\n  for (let i = 0; i < data.nodeDataArray.length; i++) {\n    const it = data.nodeDataArray[i]\n    nodeMap.set(it.key, it)\n  }\n  for (let i = 0; i < data.linkDataArray.length; i++) {\n    const it = data.linkDataArray[i]\n    lineMap.set(it.key, it)\n  }\n  for (let i = 0; i < data.noteDataArray.length; i++) {\n    const it = data.noteDataArray[i]\n    noteMap.set(it.key, it)\n  }\n  for (let i = 0; i < data.markDataArray.length; i++) {\n    const it = data.markDataArray[i]\n    markMap.set(it.key, it)\n  }\n  \n}\nconst mountGraph = () => {\n  // const el = document.getElementById('canvas')\n  graph = new Graph({\n    el: document.getElementById('canvas'),\n    fontFamily: '-apple-system, Noto Sans, Helvetica Neue, Helvetica, Nimbus Sans L, Arial, Liberation Sans, PingFang SC, Hiragino Sans GB, Noto Sans CJK SC, Source Han Sans SC, Source Han Sans CN, Microsoft YaHei, Wenquanyi Micro Hei, WenQuanYi Zen Hei, ST Heiti, SimHei, WenQuanYi Zen Hei Sharp, sans-serif',\n    editable: state.lock,\n    externalFn: {\n      addNode: function (obj) {\n        const str = prompt('请输入表名：')\n        if (!str) return\n        obj.tableName = str\n        data.nodeDataArray.push(obj)\n      },\n      delNode: function (key) {\n        console.log(key)\n      },\n      addLine: function (obj) {\n        console.log('添加线了')\n        obj.numLineTypes = 2\n        data.linkDataArray.push(obj)\n      },\n      delLine: function (key) {\n        console.log(key)\n      },\n      addFilter: function (obj) {\n        obj.filter && data.nodeDataArray.push(obj.filter)\n        obj.toFilter && data.linkDataArray.push(obj.toFilter)\n        data.linkDataArray.push(obj.fromFilter)\n      },\n      delFilter: function (key) {\n        console.log(key)\n      },\n      addMark: function (obj) {\n        data.markDataArray.push(obj)\n        markMap.set(obj.key, obj)\n      },\n      delMark: function (key) {\n        console.log(key)\n      },\n      addNote: function (obj) {\n        const str = prompt('请输入备注内容：')\n        if (!str) return\n        obj.text = str\n        data.noteDataArray.push(obj)\n      },\n      delNote: function (key) {\n        console.log(key)\n      },\n      $message: function (val) {\n        console.log(val.message)\n      },\n      handleCopy(ev1, ev2) {\n        console.log(ev1, ev2)\n        return true\n      },\n      handlePaste(nodes) {\n        data.nodeDataArray.push(...nodes)\n      },\n      handleContextMenu(ev, value) {\n        console.log('菜单点击触发：', ev, value)\n\n        switch (value) {\n          case 'remark':\n            const str = prompt('请输入备注内容：')\n            if (!str) return\n            graph.addRemark(str)\n            break\n\n          default:\n            break\n        }\n      },\n    },\n    useThumbnail: props.useThumbnail,\n    useAttrFocus: props.useAttrFocus,\n    useRightMenu: props.useRightMenu,\n    rightMenu,\n  })\n  graph.update(data)\n  graph.on('node:move', (node) => {\n    const it = nodeMap.get(node.id)\n    it.x = node.x\n    it.y = node.y\n    it.width = node.width\n    it.height = node.height\n  })\n  graph.on('node:resize', (node) => {\n    const it = nodeMap.get(node.id)\n    it.x = node.x\n    it.y = node.y\n    it.width = node.width\n    it.height = node.height\n  })\n  graph.on('line:move', (line) => {\n    const it = lineMap.get(line.id)\n    it.pos = line.pos\n  })\n  graph.on('note:move', (note) => {\n    const it = noteMap.get(note.id)\n    it.x = note.x\n    it.y = note.y\n  })\n  graph.on('mark:move', (node) => {\n    const it = markMap.get(node.id)\n    it.x = node.x\n    it.y = node.y\n    it.width = node.width\n    it.height = node.height\n  })\n  graph.on('mark:resize', (node) => {\n    const it = markMap.get(node.id)\n    it.x = node.x\n    it.y = node.y\n    it.width = node.width\n    it.height = node.height\n  })\n  // graph.on('line:click', (id) => console.log('line:click', id))\n  // graph.on('node:click', (id) => console.log('node:click', id))\n  // graph.on('node-attr:click', (id) => console.log('node-attr:click', id))\n}\nconst unmountGraph = () => {\n  graph.destroy()\n}\nconst handleFullscreen = () => {\n  graph.fullscreen()\n}\n\nconst changeCanvasScale = (scaleRatio) => {\n  if (state.scale > 20) state.scale += scaleRatio\n  graph.zoom(state.scale)\n}\n\nconst addNode = () => {\n  graph.addNode({\n    key: graph.createKey(),\n    attributes: []\n  })\n}\n\nconst addLine = (lineType) => {\n  graph.addLine(lineType)\n}\n\nconst addMark = () => {\n  graph.addMark()\n}\n\nconst addNote = () => {\n  graph.addNote()\n}\n\nconst changeColor = (value, tp) => {\n  graph.changeColor(value, tp)\n}\n\nconst setEditable = () => {\n  state.lock = state.lock === 1 ? 2 : 1\n  graph.setEditable(state.lock)\n}\n\nconst copy = () => {\n  graph.copy()\n}\n\nconst createLines = () => {\n  const list = [\n    { \"from\": 0, \"to\": 1, \"pos\": [{ x: 200, y: 125 }, { x: 400, y: 125 }], type: 'primaryKey', numLineTypes: 1 },\n  ]\n  graph.createLines(list)\n}\n\nonMounted(() => {\n  initData()\n  mountGraph()\n})\nonBeforeUnmount(unmountGraph)\n</script>\n\n<style lang=\"postcss\">\n.erg{\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.toobar {\n  background: #ccc;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  justify-between: center;\n  >.el-color-picker{\n    margin-right: 10px;\n  }\n}\n\n.canvas {\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n  /* border: 1px solid #000; */\n  margin: auto;\n  box-sizing: border-box;\n}\n</style>"],"names":["getClientXY","event","clientX","clientY","objectCreate","baseCreate","object","proto","isObject","result","baseCreate$1","copyArray","source","array","index","length","defineProperty","func","getNative","defineProperty$1","arrayEach","iteratee","baseAssignValue","key","value","objectProto","hasOwnProperty","assignValue","objValue","eq","copyObject","props","customizer","isNew","newValue","nativeKeysIn","baseKeysIn","isProto","isPrototype","keysIn","isArrayLike","arrayLikeKeys","getPrototype","overArg","getPrototype$1","baseAssign","keys","baseAssignIn","freeExports","freeModule","moduleExports","Buffer","root","allocUnsafe","cloneBuffer","buffer","isDeep","copySymbols","getSymbols","nativeGetSymbols","getSymbolsIn","arrayPush","stubArray","getSymbolsIn$1","copySymbolsIn","getAllKeysIn","baseGetAllKeys","initCloneArray","cloneArrayBuffer","arrayBuffer","Uint8Array","cloneDataView","dataView","reFlags","cloneRegExp","regexp","symbolProto","Symbol","symbolValueOf","cloneSymbol","symbol","cloneTypedArray","typedArray","boolTag","dateTag","mapTag","numberTag","regexpTag","setTag","stringTag","symbolTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","initCloneByTag","tag","Ctor","initCloneObject","baseIsMap","isObjectLike","getTag","nodeIsMap","nodeUtil","isMap","baseUnary","isMap$1","baseIsSet","nodeIsSet","isSet","isSet$1","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","argsTag","arrayTag","errorTag","funcTag","genTag","objectTag","weakMapTag","cloneableTags","baseClone","bitmask","stack","isFlat","isFull","isArr","isArray","isFunc","isBuffer","Stack","stacked","subValue","keysFunc","getAllKeys","cloneDeep","DEFAULT_EXCLUDE_KEYS","LISTENER_PREFIX","useAttrs","params","excludeListeners","excludeKeys","allExcludeKeys","computed","instance","getCurrentInstance","_a","fromPairs","useCursor","input","selectionRef","ref","recordCursor","selectionStart","selectionEnd","beforeTxt","afterTxt","setCursor","startPos","beforeLastChar","newIndex","hiddenTextarea","HIDDEN_STYLE","isFirefox","CONTEXT_STYLE","calculateNodeStyling","targetElement","style","boxSizing","paddingSize","borderSize","name","calcTextareaHeight","minRows","maxRows","contextStyle","height","singleRowHeight","isNumber","minHeight","maxHeight","inputProps","buildProps","useSizeProp","definePropType","iconPropType","mutable","inputEmits","UPDATE_MODEL_EVENT","isString","evt","_hoisted_1","_hoisted_2","_hoisted_3","__default__","defineComponent","_sfc_main","__props","expose","emit","rawAttrs","slots","useSlots","containerAttrs","comboBoxAttrs","containerKls","nsTextarea","nsInput","inputSize","inputDisabled","inputExceed","showClear","showPwdVisible","wrapperKls","focused","attrs","useAttrs$1","form","formItem","useFormItem","inputId","useFormItemInputId","useFormSize","useFormDisabled","useNamespace","shallowRef","textarea","hovering","isComposing","passwordVisible","countStyle","textareaCalcStyle","_ref","needStatusIcon","validateState","validateIcon","ValidateComponentsMap","passwordIcon","View","Hide","containerStyle","textareaStyle","nativeInputValue","isNil","isWordLimitVisible","textLength","suffixVisible","useResizeObserver","entries","onceInitSizeTextarea","entry","width","resizeTextarea","type","autosize","isClient","textareaStyle2","nextTick","resizeTextarea2","isInit","setNativeInputValue","input2","handleInput","handleChange","handleCompositionStart","handleCompositionUpdate","text","lastCharacter","isKorean","handleCompositionEnd","handlePasswordVisible","focus","blur","handleFocus","handleBlur","err","debugWarn","handleMouseLeave","handleMouseEnter","handleKeydown","select","clear","watch","onMounted","toRef","_ctx","_cache","withDirectives","openBlock","createElementBlock","mergeProps","unref","createCommentVNode","Fragment","normalizeClass","renderSlot","createElementVNode","createBlock","ElIcon","withCtx","resolveDynamicComponent","withModifiers","NOOP","createVNode","CircleClose","toDisplayString","normalizeStyle","vShow","Input","_export_sfc","ElInput","withInstall","alphaSliderProps","isDragging","draggable","element","options","moveFn","upFn","downFn","useAlphaSlider","thumb","bar","handleClick","handleDrag","rect","top","left","useAlphaSliderDOM","ns","thumbLeft","thumbTop","background","getThumbLeft","el","alpha","getThumbTop","getBackground","r","g","b","update","dragConfig","rootKls","barKls","thumbKls","barStyle","thumbStyle","addUnit","COMPONENT_NAME","args","AlphaSlider","hueValue","hue","_sfc_render","$props","$setup","$data","$options","HueSlider","colorPickerProps","colorPickerEmits","val","CHANGE_EVENT","colorPickerContextKey","hsv2hsl","sat","isOnePointZero","n","isPercentage","bound01","max","processPercent","INT_HEX_MAP","hexOne","high","low","toHex","HEX_INT_MAP","parseHexChannel","hex","hsl2hsv","light","smin","lmin","v","sv","rgb2hsv","min","h","d","s","hsv2rgb","i","f","p","q","t","mod","Color","option","hasOwn","prop","fromHSV","parts","color","_hue","_saturation","_value","_alpha","format","hsl","currentColor","inject","rgbaColors","parseColors","item","watchEffect","handleSelect","colors","renderList","$event","Predefine","cursorTop","cursorLeft","colorValue","saturation","SvPanel","useLocale","colorSize","colorDisabled","buttonId","isLabeledByFormItem","popper","shouldActiveChange","reactive","showPicker","showPanelColor","customInput","displayedColor","displayedRgb","buttonAriaLabel","buttonAriaLabelledby","btnKls","color2","showAlpha","setShowPicker","debounceSetShowPicker","debounce","show","hide","resetColor","handleTrigger","handleConfirm","confirmValue","newColor","newVal","_b","_c","provide","ElTooltip","withKeys","ElButton","createTextVNode","ClickOutside","ArrowDown","Close","ColorPicker","ElColorPicker","dividerProps","dividerStyle","Divider","ElDivider","LockIcon","FabricObject","ctx","x","y","w","fillStyle","strokeStyle","e","trigger","ex","ey","lines","isContains","hexToRgb","isLightColor","rgbArr","NodeErwin","id","enName","cnName","attributes","bgC","bdC","quotePrimaryKey","physicalTables","manualChange","isBoolean","attrHeight","titleHeight","linesForNode","bgColor","borderColor","textColor","roundedDeg","datatype","datatypeUpper","img","DataTypeDate","imageMap","DataTypeNumber","DataTypeString","fontSize","padding","attributesPrimary","attributesPrimaryNon","curX","curY","attrItem","addText","finalText","textWidth","isExpand","icons","startX","startY","icon","iconX","size","expand","fullWidth","nodePadding","attrFocusStyle","backgroundStartX","backgroundWidth","NodeRect","isPointOnLineSegments","point","segments","tolerance","xTolerance","yTolerance","p1","p2","a","c","LineErwin","pos","from","to","lineWidth","numLineTypes","pointItem","pointIdx","posLen","dis","arcX","arcY","remark","middleIndex","vertical","xPoints","yPoints","it","History","maxSteps","action","prevAction","nextAction","ifTimeLegal","ifSameTarget","ifSameOperation","mathRange","TextBase","borderWidth","content","textMetrics","FrameResize","targetBgColor","targetBdColor","targetWidth","halfTargetWidth","fixX","fixY","FrameHover","EditType","TargetDirection","Cursor","ifAnchor","target","canvasEv","middleX","middleY","fullX","fullY","targetDirection","useMouseMove","moveMarkRect","eventObj","offsetOfMove","newLoc","moveMarkText","resizeNode","moveNode","focusTarget","nodeRelatedLineMap","focusItem","nodeNewLoc","line","moveLine","idx","editType","renderElements","cursorState","hoverTarget","cursor","isTarget","graphTranslate","isResizeNode","isNodeMove","isLineMove","isMarkMove","isNoteMove","useMouseDown","evX","evY","defaultWidth","defaultHeight","distanse","_d","fixLocNodes","node","_e","newNode","newMark","newNote","metaKey","shiftKey","ctrlKey","useMouseUp","Erg","EventCenter","data","externalFn","editable","fontFamily","rightMenu","useRightMenu","useAttrFocus","useThumbnail","Canvas","BackgroundType","Plugins","PluginsEnum","resetMouseState","execTask","setEventTarget","canvas","changeMouseCursor","moveCanvas","moveElement","isJustMove","isMoveCanvas","isMoveElement","copyFocusTarget","originObject","originValue","innerWidth","innerHeight","deltaY","deltaX","zoomRate","calcRatio","translate","nodes","Node","nodeMap","_data","lineMap","noteDataArray","noteMap","note","newData","cacheCtx","nodeDataArray","thumbnail","viewW","viewH","minX","minY","maxX","maxY","isFocusTarget","copyTarget","handleCopy","lineInfo","fromNode","toNode","fromNodeBord","toNodeBord","tableName","_this","mark","rate","fixRate","nodeInfo","pointInfo","minWidth","copyEventObjTarget","newWidth","newHeight","moveKeyPoint","lineSet","diffFlag","updateKeyPoint","targetNode","direction","linkInfo","posMaxIdx","distance","moveTargetIsFrom","idx1X","idx1and2Y","idx0X","dis0to1","dis1to2","mouseLoc","total","eventPos","judgeLineShapeIsZ","judgeLineShapeIsN","judgeWidth","len","judgeHeight","defaultAttr","addNodeDefaultAttr","translatePos","lineType","remarkStr","defaultData","chooseTargets","chooseTargets0Loc","chooseTargets1Loc","endX","newLine","newLineInfo","fromFilter","loc","newBranchFilter","toFilter","lineList","resultLines","imgUrl","Icons","graph","markMap","state","initData","mountGraph","Graph","obj","str","ev1","ev2","ev","unmountGraph","changeCanvasScale","scaleRatio","addNode","addLine","addMark","addNote","changeColor","tp","setEditable","copy","createLines","list","onBeforeUnmount"],"mappings":"68BAgCA,MAAMA,GAAeC,GAAU,CAC7B,IAAIC,EACAC,EACJ,OAAIF,EAAM,OAAS,YACjBE,EAAUF,EAAM,eAAe,CAAC,EAAE,QAClCC,EAAUD,EAAM,eAAe,CAAC,EAAE,SACzBA,EAAM,KAAK,WAAW,OAAO,GACtCE,EAAUF,EAAM,QAAQ,CAAC,EAAE,QAC3BC,EAAUD,EAAM,QAAQ,CAAC,EAAE,UAE3BE,EAAUF,EAAM,QAChBC,EAAUD,EAAM,SAEX,CACL,QAAAC,EACA,QAAAC,CACJ,CACA,EC9CA,IAAIC,GAAe,OAAO,OAUtBC,GAAc,UAAW,CAC3B,SAASC,GAAS,CAAE,CACpB,OAAO,SAASC,EAAO,CACrB,GAAI,CAACC,GAASD,CAAK,EACjB,MAAO,GAET,GAAIH,GACF,OAAOA,GAAaG,CAAK,EAE3BD,EAAO,UAAYC,EACnB,IAAIE,EAAS,IAAIH,EACjB,OAAAA,EAAO,UAAY,OACZG,CACX,CACA,EAAC,EAED,MAAAC,GAAeL,GCrBf,SAASM,GAAUC,EAAQC,EAAO,CAChC,IAAIC,EAAQ,GACRC,EAASH,EAAO,OAGpB,IADAC,IAAUA,EAAQ,MAAME,CAAM,GACvB,EAAED,EAAQC,GACfF,EAAMC,CAAK,EAAIF,EAAOE,CAAK,EAE7B,OAAOD,CACT,CCfA,IAAIG,GAAkB,UAAW,CAC/B,GAAI,CACF,IAAIC,EAAOC,GAAU,OAAQ,gBAAgB,EAC7C,OAAAD,EAAK,CAAE,EAAE,GAAI,CAAA,CAAE,EACRA,CACX,MAAI,CAAY,CAChB,EAAC,EAED,MAAAE,GAAeH,GCDf,SAASI,GAAUP,EAAOQ,EAAU,CAIlC,QAHIP,EAAQ,GACRC,EAASF,GAAS,KAAO,EAAIA,EAAM,OAEhC,EAAEC,EAAQC,GACXM,EAASR,EAAMC,CAAK,EAAGA,EAAOD,CAAK,IAAM,IAA7C,CAIF,OAAOA,CACT,CCRA,SAASS,GAAgBhB,EAAQiB,EAAKC,EAAO,CACvCD,GAAO,aAAeP,GACxBA,GAAeV,EAAQiB,EAAK,CAC1B,aAAgB,GAChB,WAAc,GACd,MAASC,EACT,SAAY,EAClB,CAAK,EAEDlB,EAAOiB,CAAG,EAAIC,CAElB,CClBA,IAAIC,GAAc,OAAO,UAGrBC,GAAiBD,GAAY,eAYjC,SAASE,GAAYrB,EAAQiB,EAAKC,EAAO,CACvC,IAAII,EAAWtB,EAAOiB,CAAG,GACrB,EAAEG,GAAe,KAAKpB,EAAQiB,CAAG,GAAKM,GAAGD,EAAUJ,CAAK,IACvDA,IAAU,QAAa,EAAED,KAAOjB,KACnCgB,GAAgBhB,EAAQiB,EAAKC,CAAK,CAEtC,CCZA,SAASM,GAAWlB,EAAQmB,EAAOzB,EAAQ0B,EAAY,CACrD,IAAIC,EAAQ,CAAC3B,EACbA,IAAWA,EAAS,CAAA,GAKpB,QAHIQ,EAAQ,GACRC,EAASgB,EAAM,OAEZ,EAAEjB,EAAQC,GAAQ,CACvB,IAAIQ,EAAMQ,EAAMjB,CAAK,EAEjBoB,EAAWF,EACXA,EAAW1B,EAAOiB,CAAG,EAAGX,EAAOW,CAAG,EAAGA,EAAKjB,EAAQM,CAAM,EACxD,OAEAsB,IAAa,SACfA,EAAWtB,EAAOW,CAAG,GAEnBU,EACFX,GAAgBhB,EAAQiB,EAAKW,CAAQ,EAErCP,GAAYrB,EAAQiB,EAAKW,CAAQ,EAGrC,OAAO5B,CACT,CC5BA,SAAS6B,GAAa7B,EAAQ,CAC5B,IAAIG,EAAS,CAAA,EACb,GAAIH,GAAU,KACZ,QAASiB,KAAO,OAAOjB,CAAM,EAC3BG,EAAO,KAAKc,CAAG,EAGnB,OAAOd,CACT,CCZA,IAAIgB,GAAc,OAAO,UAGrBC,GAAiBD,GAAY,eASjC,SAASW,GAAW9B,EAAQ,CAC1B,GAAI,CAACE,GAASF,CAAM,EAClB,OAAO6B,GAAa7B,CAAM,EAE5B,IAAI+B,EAAUC,GAAYhC,CAAM,EAC5BG,EAAS,CAAA,EAEb,QAASc,KAAOjB,EACRiB,GAAO,gBAAkBc,GAAW,CAACX,GAAe,KAAKpB,EAAQiB,CAAG,IACxEd,EAAO,KAAKc,CAAG,EAGnB,OAAOd,CACT,CCHA,SAAS8B,GAAOjC,EAAQ,CACtB,OAAOkC,GAAYlC,CAAM,EAAImC,GAAcnC,EAAQ,EAAI,EAAI8B,GAAW9B,CAAM,CAC9E,CC1BA,IAAIoC,GAAeC,GAAQ,OAAO,eAAgB,MAAM,EAExD,MAAAC,GAAeF,GCOf,SAASG,GAAWvC,EAAQM,EAAQ,CAClC,OAAON,GAAUwB,GAAWlB,EAAQkC,GAAKlC,CAAM,EAAGN,CAAM,CAC1D,CCFA,SAASyC,GAAazC,EAAQM,EAAQ,CACpC,OAAON,GAAUwB,GAAWlB,EAAQ2B,GAAO3B,CAAM,EAAGN,CAAM,CAC5D,CCXA,IAAI0C,GAAc,OAAO,SAAW,UAAY,SAAW,CAAC,QAAQ,UAAY,QAG5EC,GAAaD,IAAe,OAAO,QAAU,UAAY,QAAU,CAAC,OAAO,UAAY,OAGvFE,GAAgBD,IAAcA,GAAW,UAAYD,GAGrDG,GAASD,GAAgBE,GAAK,OAAS,OACvCC,GAAcF,GAASA,GAAO,YAAc,OAUhD,SAASG,GAAYC,EAAQC,EAAQ,CACnC,GAAIA,EACF,OAAOD,EAAO,QAEhB,IAAIxC,EAASwC,EAAO,OAChB9C,EAAS4C,GAAcA,GAAYtC,CAAM,EAAI,IAAIwC,EAAO,YAAYxC,CAAM,EAE9E,OAAAwC,EAAO,KAAK9C,CAAM,EACXA,CACT,CCrBA,SAASgD,GAAY7C,EAAQN,EAAQ,CACnC,OAAOwB,GAAWlB,EAAQ8C,GAAW9C,CAAM,EAAGN,CAAM,CACtD,CCPA,IAAIqD,GAAmB,OAAO,sBAS1BC,GAAgBD,GAA+B,SAASrD,EAAQ,CAElE,QADIG,EAAS,CAAA,EACNH,GACLuD,GAAUpD,EAAQiD,GAAWpD,CAAM,CAAC,EACpCA,EAASoC,GAAapC,CAAM,EAE9B,OAAOG,CACT,EAPuCqD,GASvC,MAAAC,GAAeH,GCbf,SAASI,GAAcpD,EAAQN,EAAQ,CACrC,OAAOwB,GAAWlB,EAAQgD,GAAahD,CAAM,EAAGN,CAAM,CACxD,CCDA,SAAS2D,GAAa3D,EAAQ,CAC5B,OAAO4D,GAAe5D,EAAQiC,GAAQqB,EAAY,CACpD,CCbA,IAAInC,GAAc,OAAO,UAGrBC,GAAiBD,GAAY,eASjC,SAAS0C,GAAetD,EAAO,CAC7B,IAAIE,EAASF,EAAM,OACfJ,EAAS,IAAII,EAAM,YAAYE,CAAM,EAGzC,OAAIA,GAAU,OAAOF,EAAM,CAAC,GAAK,UAAYa,GAAe,KAAKb,EAAO,OAAO,IAC7EJ,EAAO,MAAQI,EAAM,MACrBJ,EAAO,MAAQI,EAAM,OAEhBJ,CACT,CCdA,SAAS2D,GAAiBC,EAAa,CACrC,IAAI5D,EAAS,IAAI4D,EAAY,YAAYA,EAAY,UAAU,EAC/D,WAAIC,GAAW7D,CAAM,EAAE,IAAI,IAAI6D,GAAWD,CAAW,CAAC,EAC/C5D,CACT,CCHA,SAAS8D,GAAcC,EAAUhB,EAAQ,CACvC,IAAID,EAASC,EAASY,GAAiBI,EAAS,MAAM,EAAIA,EAAS,OACnE,OAAO,IAAIA,EAAS,YAAYjB,EAAQiB,EAAS,WAAYA,EAAS,UAAU,CAClF,CCZA,IAAIC,GAAU,OASd,SAASC,GAAYC,EAAQ,CAC3B,IAAIlE,EAAS,IAAIkE,EAAO,YAAYA,EAAO,OAAQF,GAAQ,KAAKE,CAAM,CAAC,EACvE,OAAAlE,EAAO,UAAYkE,EAAO,UACnBlE,CACT,CCXA,IAAImE,GAAcC,GAASA,GAAO,UAAY,OAC1CC,GAAgBF,GAAcA,GAAY,QAAU,OASxD,SAASG,GAAYC,EAAQ,CAC3B,OAAOF,GAAgB,OAAOA,GAAc,KAAKE,CAAM,CAAC,EAAI,EAC9D,CCLA,SAASC,GAAgBC,EAAY1B,EAAQ,CAC3C,IAAID,EAASC,EAASY,GAAiBc,EAAW,MAAM,EAAIA,EAAW,OACvE,OAAO,IAAIA,EAAW,YAAY3B,EAAQ2B,EAAW,WAAYA,EAAW,MAAM,CACpF,CCNA,IAAIC,GAAU,mBACVC,GAAU,gBACVC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBACZC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBAEZC,GAAiB,uBACjBC,GAAc,oBACdC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAchB,SAASC,GAAehG,EAAQiG,EAAK/C,EAAQ,CAC3C,IAAIgD,EAAOlG,EAAO,YAClB,OAAQiG,EAAG,CACT,KAAKZ,GACH,OAAOvB,GAAiB9D,CAAM,EAEhC,KAAK6E,GACL,KAAKC,GACH,OAAO,IAAIoB,EAAK,CAAClG,CAAM,EAEzB,KAAKsF,GACH,OAAOrB,GAAcjE,EAAQkD,CAAM,EAErC,KAAKqC,GAAY,KAAKC,GACtB,KAAKC,GAAS,KAAKC,GAAU,KAAKC,GAClC,KAAKC,GAAU,KAAKC,GAAiB,KAAKC,GAAW,KAAKC,GACxD,OAAOpB,GAAgB3E,EAAQkD,CAAM,EAEvC,KAAK6B,GACH,OAAO,IAAImB,EAEb,KAAKlB,GACL,KAAKG,GACH,OAAO,IAAIe,EAAKlG,CAAM,EAExB,KAAKiF,GACH,OAAOb,GAAYpE,CAAM,EAE3B,KAAKkF,GACH,OAAO,IAAIgB,EAEb,KAAKd,GACH,OAAOX,GAAYzE,CAAM,CAC5B,CACH,CC/DA,SAASmG,GAAgBnG,EAAQ,CAC/B,OAAQ,OAAOA,EAAO,aAAe,YAAc,CAACgC,GAAYhC,CAAM,EAClED,GAAWqC,GAAapC,CAAM,CAAC,EAC/B,EACN,CCXA,IAAI+E,GAAS,eASb,SAASqB,GAAUlF,EAAO,CACxB,OAAOmF,GAAanF,CAAK,GAAKoF,GAAOpF,CAAK,GAAK6D,EACjD,CCVA,IAAIwB,GAAYC,IAAYA,GAAS,MAmBjCC,GAAQF,GAAYG,GAAUH,EAAS,EAAIH,GAE/C,MAAAO,GAAeF,GCtBf,IAAIvB,GAAS,eASb,SAAS0B,GAAU1F,EAAO,CACxB,OAAOmF,GAAanF,CAAK,GAAKoF,GAAOpF,CAAK,GAAKgE,EACjD,CCVA,IAAI2B,GAAYL,IAAYA,GAAS,MAmBjCM,GAAQD,GAAYH,GAAUG,EAAS,EAAID,GAE/C,MAAAG,GAAeD,GCFf,IAAIE,GAAkB,EAClBC,GAAkB,EAClBC,GAAqB,EAGrBC,GAAU,qBACVC,GAAW,iBACXvC,GAAU,mBACVC,GAAU,gBACVuC,GAAW,iBACXC,GAAU,oBACVC,GAAS,6BACTxC,GAAS,eACTC,GAAY,kBACZwC,GAAY,kBACZvC,GAAY,kBACZC,GAAS,eACTC,GAAY,kBACZC,GAAY,kBACZqC,GAAa,mBAEbpC,GAAiB,uBACjBC,GAAc,oBACdC,GAAa,wBACbC,GAAa,wBACbC,GAAU,qBACVC,GAAW,sBACXC,GAAW,sBACXC,GAAW,sBACXC,GAAkB,6BAClBC,GAAY,uBACZC,GAAY,uBAGZ2B,EAAgB,CAAA,EACpBA,EAAcP,EAAO,EAAIO,EAAcN,EAAQ,EAC/CM,EAAcrC,EAAc,EAAIqC,EAAcpC,EAAW,EACzDoC,EAAc7C,EAAO,EAAI6C,EAAc5C,EAAO,EAC9C4C,EAAcnC,EAAU,EAAImC,EAAclC,EAAU,EACpDkC,EAAcjC,EAAO,EAAIiC,EAAchC,EAAQ,EAC/CgC,EAAc/B,EAAQ,EAAI+B,EAAc3C,EAAM,EAC9C2C,EAAc1C,EAAS,EAAI0C,EAAcF,EAAS,EAClDE,EAAczC,EAAS,EAAIyC,EAAcxC,EAAM,EAC/CwC,EAAcvC,EAAS,EAAIuC,EAActC,EAAS,EAClDsC,EAAc9B,EAAQ,EAAI8B,EAAc7B,EAAe,EACvD6B,EAAc5B,EAAS,EAAI4B,EAAc3B,EAAS,EAAI,GACtD2B,EAAcL,EAAQ,EAAIK,EAAcJ,EAAO,EAC/CI,EAAcD,EAAU,EAAI,GAkB5B,SAASE,GAAUzG,EAAO0G,EAASlG,EAAYT,EAAKjB,EAAQ6H,EAAO,CACjE,IAAI1H,EACA+C,EAAS0E,EAAUZ,GACnBc,EAASF,EAAUX,GACnBc,EAASH,EAAUV,GAKvB,GAHIxF,IACFvB,EAASH,EAAS0B,EAAWR,EAAOD,EAAKjB,EAAQ6H,CAAK,EAAInG,EAAWR,CAAK,GAExEf,IAAW,OACb,OAAOA,EAET,GAAI,CAACD,GAASgB,CAAK,EACjB,OAAOA,EAET,IAAI8G,EAAQC,GAAQ/G,CAAK,EACzB,GAAI8G,GAEF,GADA7H,EAAS0D,GAAe3C,CAAK,EACzB,CAACgC,EACH,OAAO7C,GAAUa,EAAOf,CAAM,MAE3B,CACL,IAAI8F,EAAMK,GAAOpF,CAAK,EAClBgH,EAASjC,GAAOqB,IAAWrB,GAAOsB,GAEtC,GAAIY,GAASjH,CAAK,EAChB,OAAO8B,GAAY9B,EAAOgC,CAAM,EAElC,GAAI+C,GAAOuB,IAAavB,GAAOkB,IAAYe,GAAU,CAAClI,GAEpD,GADAG,EAAU2H,GAAUI,EAAU,CAAA,EAAK/B,GAAgBjF,CAAK,EACpD,CAACgC,EACH,OAAO4E,EACHpE,GAAcxC,EAAOuB,GAAatC,EAAQe,CAAK,CAAC,EAChDiC,GAAYjC,EAAOqB,GAAWpC,EAAQe,CAAK,CAAC,MAE7C,CACL,GAAI,CAACwG,EAAczB,CAAG,EACpB,OAAOjG,EAASkB,EAAQ,GAE1Bf,EAAS6F,GAAe9E,EAAO+E,EAAK/C,CAAM,GAI9C2E,IAAUA,EAAQ,IAAIO,IACtB,IAAIC,EAAUR,EAAM,IAAI3G,CAAK,EAC7B,GAAImH,EACF,OAAOA,EAETR,EAAM,IAAI3G,EAAOf,CAAM,EAEnB2G,GAAM5F,CAAK,EACbA,EAAM,QAAQ,SAASoH,EAAU,CAC/BnI,EAAO,IAAIwH,GAAUW,EAAUV,EAASlG,EAAY4G,EAAUpH,EAAO2G,CAAK,CAAC,CACjF,CAAK,EACQpB,GAAMvF,CAAK,GACpBA,EAAM,QAAQ,SAASoH,EAAUrH,EAAK,CACpCd,EAAO,IAAIc,EAAK0G,GAAUW,EAAUV,EAASlG,EAAYT,EAAKC,EAAO2G,CAAK,CAAC,CACjF,CAAK,EAGH,IAAIU,EAAWR,EACVD,EAASnE,GAAe6E,GACxBV,EAAS7F,GAASO,GAEnBf,EAAQuG,EAAQ,OAAYO,EAASrH,CAAK,EAC9C,OAAAJ,GAAUW,GAASP,EAAO,SAASoH,EAAUrH,EAAK,CAC5CQ,IACFR,EAAMqH,EACNA,EAAWpH,EAAMD,CAAG,GAGtBI,GAAYlB,EAAQc,EAAK0G,GAAUW,EAAUV,EAASlG,EAAYT,EAAKC,EAAO2G,CAAK,CAAC,CACxF,CAAG,EACM1H,CACT,CChKA,IAAI6G,GAAkB,EAClBE,GAAqB,EAoBzB,SAASuB,GAAUvH,EAAO,CACxB,OAAOyG,GAAUzG,EAAO8F,GAAkBE,EAAkB,CAC9D,CCrBA,MAAMwB,GAAuB,CAAC,QAAS,OAAO,EACxCC,GAAkB,WAClBC,GAAW,CAACC,EAAS,KAAO,CAChC,KAAM,CAAE,iBAAAC,EAAmB,GAAO,YAAAC,CAAW,EAAKF,EAC5CG,EAAiBC,EAAS,MACrBF,GAAe,KAAO,OAASA,EAAY,QAAU,CAAE,GAAE,OAAOL,EAAoB,CAC9F,EACKQ,EAAWC,KACjB,OAAKD,EAIED,EAAS,IAAM,CACpB,IAAIG,EACJ,OAAOC,GAAU,OAAO,SAASD,EAAKF,EAAS,QAAU,KAAO,OAASE,EAAG,MAAM,EAAE,OAAO,CAAC,CAACnI,CAAG,IAAM,CAAC+H,EAAe,MAAM,SAAS/H,CAAG,GAAK,EAAE6H,GAAoBH,GAAgB,KAAK1H,CAAG,EAAE,CAAC,CAClM,CAAG,EALQgI,EAAS,KAAO,CAAE,EAAC,CAM9B,ECnBA,SAASK,GAAUC,EAAO,CACxB,MAAMC,EAAeC,IACrB,SAASC,GAAe,CACtB,GAAIH,EAAM,OAAS,KACjB,OACF,KAAM,CAAE,eAAAI,EAAgB,aAAAC,EAAc,MAAA1I,CAAK,EAAKqI,EAAM,MACtD,GAAII,GAAkB,MAAQC,GAAgB,KAC5C,OACF,MAAMC,EAAY3I,EAAM,MAAM,EAAG,KAAK,IAAI,EAAGyI,CAAc,CAAC,EACtDG,EAAW5I,EAAM,MAAM,KAAK,IAAI,EAAG0I,CAAY,CAAC,EACtDJ,EAAa,MAAQ,CACnB,eAAAG,EACA,aAAAC,EACA,MAAA1I,EACA,UAAA2I,EACA,SAAAC,CACN,CACG,CACD,SAASC,GAAY,CACnB,GAAIR,EAAM,OAAS,MAAUC,EAAa,OAAS,KACjD,OACF,KAAM,CAAE,MAAAtI,CAAK,EAAKqI,EAAM,MAClB,CAAE,UAAAM,EAAW,SAAAC,EAAU,eAAAH,CAAc,EAAKH,EAAa,MAC7D,GAAIK,GAAa,MAAUC,GAAY,MAAUH,GAAkB,KACjE,OACF,IAAIK,EAAW9I,EAAM,OACrB,GAAIA,EAAM,SAAS4I,CAAQ,EACzBE,EAAW9I,EAAM,OAAS4I,EAAS,eAC1B5I,EAAM,WAAW2I,CAAS,EACnCG,EAAWH,EAAU,WAChB,CACL,MAAMI,EAAiBJ,EAAUF,EAAiB,CAAC,EAC7CO,EAAWhJ,EAAM,QAAQ+I,EAAgBN,EAAiB,CAAC,EAC7DO,IAAa,KACfF,EAAWE,EAAW,GAG1BX,EAAM,MAAM,kBAAkBS,EAAUA,CAAQ,CACjD,CACD,MAAO,CAACN,EAAcK,CAAS,CACjC,CCtCA,IAAII,EACJ,MAAMC,GAAe;AAAA;AAAA;AAAA,IAGjBC,GAAS,EAAK,GAAK;AAAA;AAAA;AAAA;AAAA;AAAA,EAMjBC,GAAgB,CACpB,iBACA,cACA,cACA,iBACA,cACA,cACA,YACA,iBACA,iBACA,QACA,cACA,eACA,gBACA,eACA,YACF,EACA,SAASC,GAAqBC,EAAe,CAC3C,MAAMC,EAAQ,OAAO,iBAAiBD,CAAa,EAC7CE,EAAYD,EAAM,iBAAiB,YAAY,EAC/CE,EAAc,OAAO,WAAWF,EAAM,iBAAiB,gBAAgB,CAAC,EAAI,OAAO,WAAWA,EAAM,iBAAiB,aAAa,CAAC,EACnIG,EAAa,OAAO,WAAWH,EAAM,iBAAiB,qBAAqB,CAAC,EAAI,OAAO,WAAWA,EAAM,iBAAiB,kBAAkB,CAAC,EAElJ,MAAO,CAAE,aADYH,GAAc,IAAKO,GAAS,GAAGA,KAAQJ,EAAM,iBAAiBI,CAAI,GAAG,EAAE,KAAK,GAAG,EAC7E,YAAAF,EAAa,WAAAC,EAAY,UAAAF,CAAS,CAC3D,CACA,SAASI,GAAmBN,EAAeO,EAAU,EAAGC,EAAS,CAC/D,IAAI5B,EACCe,IACHA,EAAiB,SAAS,cAAc,UAAU,EAClD,SAAS,KAAK,YAAYA,CAAc,GAE1C,KAAM,CAAE,YAAAQ,EAAa,WAAAC,EAAY,UAAAF,EAAW,aAAAO,GAAiBV,GAAqBC,CAAa,EAC/FL,EAAe,aAAa,QAAS,GAAGc,KAAgBb,IAAc,EACtED,EAAe,MAAQK,EAAc,OAASA,EAAc,aAAe,GAC3E,IAAIU,EAASf,EAAe,aAC5B,MAAMhK,EAAS,CAAA,EACXuK,IAAc,aAChBQ,EAASA,EAASN,EACTF,IAAc,gBACvBQ,EAASA,EAASP,GAEpBR,EAAe,MAAQ,GACvB,MAAMgB,EAAkBhB,EAAe,aAAeQ,EACtD,GAAIS,GAASL,CAAO,EAAG,CACrB,IAAIM,EAAYF,EAAkBJ,EAC9BL,IAAc,eAChBW,EAAYA,EAAYV,EAAcC,GAExCM,EAAS,KAAK,IAAIG,EAAWH,CAAM,EACnC/K,EAAO,UAAY,GAAGkL,MAExB,GAAID,GAASJ,CAAO,EAAG,CACrB,IAAIM,EAAYH,EAAkBH,EAC9BN,IAAc,eAChBY,EAAYA,EAAYX,EAAcC,GAExCM,EAAS,KAAK,IAAII,EAAWJ,CAAM,EAErC,OAAA/K,EAAO,OAAS,GAAG+K,OAClB9B,EAAKe,EAAe,aAAe,MAAgBf,EAAG,YAAYe,CAAc,EACjFA,EAAiB,OACVhK,CACT,CClEA,MAAMoL,GAAaC,GAAW,CAC5B,GAAI,CACF,KAAM,OACN,QAAS,MACV,EACD,KAAMC,GACN,SAAU,QACV,WAAY,CACV,KAAMC,GAAe,CACnB,OACA,OACA,MACN,CAAK,EACD,QAAS,EACV,EACD,KAAM,CACJ,KAAM,OACN,QAAS,MACV,EACD,OAAQ,CACN,KAAM,OACN,OAAQ,CAAC,OAAQ,OAAQ,aAAc,UAAU,CAClD,EACD,SAAU,CACR,KAAMA,GAAe,CAAC,QAAS,MAAM,CAAC,EACtC,QAAS,EACV,EACD,aAAc,CACZ,KAAM,OACN,QAAS,KACV,EACD,UAAW,CACT,KAAM,QACP,EACD,OAAQ,CACN,KAAM,QACP,EACD,YAAa,CACX,KAAM,MACP,EACD,KAAM,CACJ,KAAM,MACP,EACD,SAAU,CACR,KAAM,QACN,QAAS,EACV,EACD,UAAW,CACT,KAAM,QACN,QAAS,EACV,EACD,aAAc,CACZ,KAAM,QACN,QAAS,EACV,EACD,cAAe,CACb,KAAM,QACN,QAAS,EACV,EACD,WAAY,CACV,KAAMC,EACP,EACD,WAAY,CACV,KAAMA,EACP,EACD,cAAe,CACb,KAAM,OACN,QAAS,MACV,EACD,MAAO,CACL,KAAM,OACN,QAAS,MACV,EACD,SAAU,CACR,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,CACV,EACD,cAAe,CACb,KAAM,QACN,QAAS,EACV,EACD,WAAY,CACV,KAAMD,GAAe,CAAC,OAAQ,MAAO,MAAM,CAAC,EAC5C,QAAS,IAAME,GAAQ,EAAE,CAC1B,CACH,CAAC,EACKC,GAAa,CACjB,CAACC,EAAkB,EAAI5K,GAAU6K,GAAS7K,CAAK,EAC/C,MAAQA,GAAU6K,GAAS7K,CAAK,EAChC,OAASA,GAAU6K,GAAS7K,CAAK,EACjC,MAAQ8K,GAAQA,aAAe,WAC/B,KAAOA,GAAQA,aAAe,WAC9B,MAAO,IAAM,GACb,WAAaA,GAAQA,aAAe,WACpC,WAAaA,GAAQA,aAAe,WACpC,QAAUA,GAAQA,aAAe,MACjC,iBAAmBA,GAAQA,aAAe,iBAC1C,kBAAoBA,GAAQA,aAAe,iBAC3C,eAAiBA,GAAQA,aAAe,gBAC1C,ECtFMC,GAAa,CAAC,MAAM,EACpBC,GAAa,CAAC,KAAM,OAAQ,WAAY,YAAa,SAAU,WAAY,eAAgB,WAAY,aAAc,cAAe,MAAM,EAC1IC,GAAa,CAAC,KAAM,WAAY,WAAY,WAAY,eAAgB,aAAc,cAAe,MAAM,EAC3GC,GAAcC,EAAgB,CAClC,KAAM,UACN,aAAc,EAChB,CAAC,EACKC,GAA4BD,EAAgB,CAChD,GAAGD,GACH,MAAOb,GACP,MAAOM,GACP,MAAMU,EAAS,CAAE,OAAAC,EAAQ,KAAAC,CAAI,EAAI,CAC/B,MAAMhL,EAAQ8K,EACRG,EAAW9D,KACX+D,EAAQC,KACRC,EAAiB5D,EAAS,IAAM,CACpC,MAAM6D,EAAgB,CAAA,EACtB,OAAIrL,EAAM,gBAAkB,aAC1BqL,EAAc,eAAe,EAAIJ,EAAS,eAAe,EACzDI,EAAc,WAAW,EAAIJ,EAAS,WAAW,EACjDI,EAAc,eAAe,EAAIJ,EAAS,eAAe,GAEpDI,CACb,CAAK,EACKC,EAAe9D,EAAS,IAAM,CAClCxH,EAAM,OAAS,WAAauL,EAAW,EAAG,EAAGC,EAAQ,EAAG,EACxDA,EAAQ,EAAEC,EAAU,KAAK,EACzBD,EAAQ,GAAG,WAAYE,EAAc,KAAK,EAC1CF,EAAQ,GAAG,SAAUG,EAAY,KAAK,EACtC,CACE,CAACH,EAAQ,EAAE,OAAO,CAAC,EAAGN,EAAM,SAAWA,EAAM,OAC7C,CAACM,EAAQ,GAAG,QAAS,QAAQ,CAAC,EAAGN,EAAM,OACvC,CAACM,EAAQ,GAAG,QAAS,SAAS,CAAC,EAAGN,EAAM,QACxC,CAACM,EAAQ,EAAE,QAAQ,CAAC,EAAGN,EAAM,QAAUlL,EAAM,WAC7C,CAACwL,EAAQ,EAAE,QAAQ,CAAC,EAAGN,EAAM,QAAUlL,EAAM,YAAcA,EAAM,WAAaA,EAAM,aACpF,CAACwL,EAAQ,GAAG,SAAU,gBAAgB,CAAC,EAAGI,GAAU,OAASC,GAAe,KAC7E,EACDZ,EAAS,KACf,CAAK,EACKa,EAAatE,EAAS,IAAM,CAChCgE,EAAQ,EAAE,SAAS,EACnBA,EAAQ,GAAG,QAASO,EAAQ,KAAK,CACvC,CAAK,EACKC,EAAQC,GAAW,CACvB,YAAazE,EAAS,IACb,OAAO,KAAK4D,EAAe,KAAK,CACxC,CACP,CAAK,EACK,CAAE,KAAAc,EAAM,SAAAC,CAAU,EAAGC,GAAW,EAChC,CAAE,QAAAC,CAAO,EAAKC,GAAmBtM,EAAO,CAC5C,gBAAiBmM,CACvB,CAAK,EACKV,EAAYc,KACZb,EAAgBc,KAChBhB,EAAUiB,GAAa,OAAO,EAC9BlB,EAAakB,GAAa,UAAU,EACpC3E,EAAQ4E,KACRC,EAAWD,KACXX,EAAU/D,EAAI,EAAK,EACnB4E,EAAW5E,EAAI,EAAK,EACpB6E,EAAc7E,EAAI,EAAK,EACvB8E,EAAkB9E,EAAI,EAAK,EAC3B+E,GAAa/E,IACbgF,GAAoBN,GAAW1M,EAAM,UAAU,EAC/CiN,GAAOzF,EAAS,IAAMM,EAAM,OAAS6E,EAAS,KAAK,EACnDO,GAAiB1F,EAAS,IAAM,CACpC,IAAIG,EACJ,OAAQA,EAAKuE,GAAQ,KAAO,OAASA,EAAK,aAAe,KAAOvE,EAAK,EAC3E,CAAK,EACKwF,EAAgB3F,EAAS,KAAO2E,GAAY,KAAO,OAASA,EAAS,gBAAkB,EAAE,EACzFiB,GAAe5F,EAAS,IAAM2F,EAAc,OAASE,GAAsBF,EAAc,KAAK,CAAC,EAC/FG,GAAe9F,EAAS,IAAMsF,EAAgB,MAAQS,GAAOC,EAAI,EACjEC,GAAiBjG,EAAS,IAAM,CACpCyD,EAAS,MACTjL,EAAM,UACZ,CAAK,EACK0N,GAAgBlG,EAAS,IAAM,CACnCxH,EAAM,WACNgN,GAAkB,MAClB,CAAE,OAAQhN,EAAM,MAAQ,CAC9B,CAAK,EACK2N,EAAmBnG,EAAS,IAAMoG,GAAM5N,EAAM,UAAU,EAAI,GAAK,OAAOA,EAAM,UAAU,CAAC,EACzF4L,GAAYpE,EAAS,IAAMxH,EAAM,WAAa,CAAC0L,EAAc,OAAS,CAAC1L,EAAM,UAAY,CAAC,CAAC2N,EAAiB,QAAU5B,EAAQ,OAASa,EAAS,MAAM,EACtJf,GAAiBrE,EAAS,IAAMxH,EAAM,cAAgB,CAAC0L,EAAc,OAAS,CAAC1L,EAAM,UAAY,CAAC,CAAC2N,EAAiB,QAAU,CAAC,CAACA,EAAiB,OAAS5B,EAAQ,MAAM,EACxK8B,EAAqBrG,EAAS,IAAMxH,EAAM,eAAiB,CAAC,CAACgM,EAAM,MAAM,YAAchM,EAAM,OAAS,QAAUA,EAAM,OAAS,aAAe,CAAC0L,EAAc,OAAS,CAAC1L,EAAM,UAAY,CAACA,EAAM,YAAY,EAC5M8N,EAAatG,EAAS,IAAMmG,EAAiB,MAAM,MAAM,EACzDhC,EAAcnE,EAAS,IAAM,CAAC,CAACqG,EAAmB,OAASC,EAAW,MAAQ,OAAO9B,EAAM,MAAM,SAAS,CAAC,EAC3G+B,GAAgBvG,EAAS,IAAM,CAAC,CAAC0D,EAAM,QAAU,CAAC,CAAClL,EAAM,YAAc4L,GAAU,OAAS5L,EAAM,cAAgB6N,EAAmB,OAAS,CAAC,CAACV,EAAc,OAASD,GAAe,KAAK,EACzL,CAACjF,GAAcK,EAAS,EAAIT,GAAUC,CAAK,EACjDkG,GAAkBrB,EAAWsB,GAAY,CAEvC,GADAC,KACI,CAACL,EAAmB,OAAS7N,EAAM,SAAW,OAChD,OACF,MAAMmO,EAAQF,EAAQ,CAAC,EACjB,CAAE,MAAAG,CAAK,EAAKD,EAAM,YACxBpB,GAAW,MAAQ,CACjB,MAAO,eAAeqB,EAAQ,GAAK,MAC3C,CACA,CAAK,EACD,MAAMC,GAAiB,IAAM,CAC3B,KAAM,CAAE,KAAAC,EAAM,SAAAC,CAAU,EAAGvO,EAC3B,GAAI,GAACwO,IAAYF,IAAS,YAAc,CAAC3B,EAAS,OAElD,GAAI4B,EAAU,CACZ,MAAMjF,EAAU7K,GAAS8P,CAAQ,EAAIA,EAAS,QAAU,OAClDhF,GAAU9K,GAAS8P,CAAQ,EAAIA,EAAS,QAAU,OAClDE,GAAiBpF,GAAmBsD,EAAS,MAAOrD,EAASC,EAAO,EAC1EyD,GAAkB,MAAQ,CACxB,UAAW,SACX,GAAGyB,EACb,EACQC,EAAS,IAAM,CACb/B,EAAS,MAAM,aACfK,GAAkB,MAAQyB,EACpC,CAAS,OAEDzB,GAAkB,MAAQ,CACxB,UAAW3D,GAAmBsD,EAAS,KAAK,EAAE,SACxD,CAEA,EAcUuB,IAbwBS,GAAoB,CAChD,IAAIC,EAAS,GACb,MAAO,IAAM,CACX,IAAIjH,EACJ,GAAIiH,GAAU,CAAC5O,EAAM,SACnB,SACmB2H,EAAKgF,EAAS,QAAU,KAAO,OAAShF,EAAG,gBAAkB,OAEhFgH,IACAC,EAAS,GAEnB,CACA,GACsDP,EAAc,EAC1DQ,GAAsB,IAAM,CAChC,MAAMC,EAAS7B,GAAK,MAChB,CAAC6B,GAAUA,EAAO,QAAUnB,EAAiB,QAEjDmB,EAAO,MAAQnB,EAAiB,MACtC,EACUoB,GAAc,MAAO7Q,GAAU,CACnC+J,KACA,GAAI,CAAE,MAAAxI,CAAK,EAAKvB,EAAM,OAKtB,GAJI8B,EAAM,YACRP,EAAQO,EAAM,OAASA,EAAM,OAAOP,CAAK,EAAIA,EAC7CA,EAAQO,EAAM,UAAUP,CAAK,GAE3B,CAAAoN,EAAY,MAEhB,IAAIpN,IAAUkO,EAAiB,MAAO,CACpCkB,KACA,OAEF7D,EAAKX,GAAoB5K,CAAK,EAC9BuL,EAAK,QAASvL,CAAK,EACnB,MAAMiP,EAAQ,EACdG,KACAvG,KACN,EACU0G,GAAgB9Q,GAAU,CAC9B8M,EAAK,SAAU9M,EAAM,OAAO,KAAK,CACvC,EACU+Q,GAA0B/Q,GAAU,CACxC8M,EAAK,mBAAoB9M,CAAK,EAC9B2O,EAAY,MAAQ,EAC1B,EACUqC,GAA2BhR,GAAU,CACzC,IAAIyJ,EACJqD,EAAK,oBAAqB9M,CAAK,EAC/B,MAAMiR,GAAQxH,EAAKzJ,EAAM,SAAW,KAAO,OAASyJ,EAAG,MACjDyH,GAAgBD,EAAKA,EAAK,OAAS,CAAC,GAAK,GAC/CtC,EAAY,MAAQ,CAACwC,GAASD,EAAa,CACjD,EACUE,GAAwBpR,GAAU,CACtC8M,EAAK,iBAAkB9M,CAAK,EACxB2O,EAAY,QACdA,EAAY,MAAQ,GACpBkC,GAAY7Q,CAAK,EAEzB,EACUqR,GAAwB,IAAM,CAClCzC,EAAgB,MAAQ,CAACA,EAAgB,MACzC0C,IACN,EACUA,GAAQ,SAAY,CACxB,IAAI7H,EACJ,MAAM+G,EAAQ,GACb/G,EAAKsF,GAAK,QAAU,MAAgBtF,EAAG,OAC9C,EACU8H,GAAO,IAAM,CACjB,IAAI9H,EACJ,OAAQA,EAAKsF,GAAK,QAAU,KAAO,OAAStF,EAAG,MACrD,EACU+H,GAAexR,GAAU,CAC7B6N,EAAQ,MAAQ,GAChBf,EAAK,QAAS9M,CAAK,CACzB,EACUyR,GAAczR,GAAU,CAC5B,IAAIyJ,EACJoE,EAAQ,MAAQ,GAChBf,EAAK,OAAQ9M,CAAK,EACd8B,EAAM,iBACP2H,EAAKwE,GAAY,KAAO,OAASA,EAAS,WAAa,MAAgBxE,EAAG,KAAKwE,EAAU,MAAM,EAAE,MAAOyD,GAAQC,GAAa,CAAC,EAEvI,EACUC,GAAoBvF,GAAQ,CAChCqC,EAAS,MAAQ,GACjB5B,EAAK,aAAcT,CAAG,CAC5B,EACUwF,GAAoBxF,GAAQ,CAChCqC,EAAS,MAAQ,GACjB5B,EAAK,aAAcT,CAAG,CAC5B,EACUyF,GAAiBzF,GAAQ,CAC7BS,EAAK,UAAWT,CAAG,CACzB,EACU0F,GAAS,IAAM,CACnB,IAAItI,GACHA,EAAKsF,GAAK,QAAU,MAAgBtF,EAAG,QAC9C,EACUuI,GAAQ,IAAM,CAClBlF,EAAKX,GAAoB,EAAE,EAC3BW,EAAK,SAAU,EAAE,EACjBA,EAAK,OAAO,EACZA,EAAK,QAAS,EAAE,CACtB,EACI,OAAAmF,EAAM,IAAMnQ,EAAM,WAAY,IAAM,CAClC,IAAI2H,EACJ+G,EAAS,IAAML,GAAc,CAAE,EAC3BrO,EAAM,iBACP2H,EAAKwE,GAAY,KAAO,OAASA,EAAS,WAAa,MAAgBxE,EAAG,KAAKwE,EAAU,QAAQ,EAAE,MAAOyD,GAAQC,GAAa,CAAC,EAEzI,CAAK,EACDM,EAAMxC,EAAkB,IAAMkB,GAAmB,CAAE,EACnDsB,EAAM,IAAMnQ,EAAM,KAAM,SAAY,CAClC,MAAM0O,EAAQ,EACdG,KACAR,IACN,CAAK,EACD+B,GAAU,IAAM,CACV,CAACpQ,EAAM,WAAaA,EAAM,OAG9B6O,KACAH,EAASL,EAAc,CAC7B,CAAK,EACDtD,EAAO,CACL,MAAAjD,EACA,SAAA6E,EACA,IAAKM,GACL,cAAAS,GACA,SAAU2C,GAAMrQ,EAAO,UAAU,EACjC,MAAAwP,GACA,KAAAC,GACA,OAAAQ,GACA,MAAAC,GACA,eAAA7B,EACN,CAAK,EACM,CAACiC,EAAMC,IACLC,IAAgBC,EAAS,EAAIC,EAAmB,MAAOC,GAAWC,EAAMxF,CAAc,EAAG,CAC9F,MAAOwF,EAAMtF,CAAY,EACzB,MAAOsF,EAAMnD,EAAc,EAC3B,KAAM6C,EAAK,cACX,aAAcP,GACd,aAAcD,EACtB,CAAO,EAAG,CACFe,EAAmB,SAAS,EAC5BP,EAAK,OAAS,YAAcG,EAAW,EAAEC,EAAmBI,GAAU,CAAE,IAAK,GAAK,CAChFD,EAAmB,gBAAgB,EACnCP,EAAK,OAAO,SAAWG,EAAS,EAAIC,EAAmB,MAAO,CAC5D,IAAK,EACL,MAAOK,EAAeH,EAAMpF,CAAO,EAAE,GAAG,QAAS,SAAS,CAAC,CACvE,EAAa,CACDwF,GAAWV,EAAK,OAAQ,SAAS,CAClC,EAAE,CAAC,GAAKO,EAAmB,OAAQ,EAAI,EACxCI,EAAmB,MAAO,CACxB,MAAOF,EAAeH,EAAM9E,CAAU,CAAC,CACnD,EAAa,CACD+E,EAAmB,eAAe,EAClCP,EAAK,OAAO,QAAUA,EAAK,YAAcG,EAAW,EAAEC,EAAmB,OAAQ,CAC/E,IAAK,EACL,MAAOK,EAAeH,EAAMpF,CAAO,EAAE,EAAE,QAAQ,CAAC,CAC9D,EAAe,CACDyF,EAAmB,OAAQ,CACzB,MAAOF,EAAeH,EAAMpF,CAAO,EAAE,EAAE,cAAc,CAAC,EACtD,QAASgE,EACzB,EAAiB,CACDwB,GAAWV,EAAK,OAAQ,QAAQ,EAChCA,EAAK,YAAcG,EAAS,EAAIS,EAAYN,EAAMO,EAAM,EAAG,CACzD,IAAK,EACL,MAAOJ,EAAeH,EAAMpF,CAAO,EAAE,EAAE,MAAM,CAAC,CAChE,EAAmB,CACD,QAAS4F,EAAQ,IAAM,EACpBX,EAAW,EAAES,EAAYG,GAAwBf,EAAK,UAAU,CAAC,EACtF,CAAmB,EACD,EAAG,CACrB,EAAmB,EAAG,CAAC,OAAO,CAAC,GAAKO,EAAmB,OAAQ,EAAI,CACpD,EAAE,CAAC,CACL,EAAE,CAAC,GAAKA,EAAmB,OAAQ,EAAI,EACxCI,EAAmB,QAASN,GAAW,CACrC,GAAIC,EAAMvE,CAAO,EACjB,QAAS,QACT,IAAKvE,EACL,MAAO8I,EAAMpF,CAAO,EAAE,EAAE,OAAO,CAC7C,EAAeoF,EAAM5E,CAAK,EAAG,CACf,KAAMsE,EAAK,aAAexD,EAAgB,MAAQ,OAAS,WAAawD,EAAK,KAC7E,SAAUM,EAAMlF,CAAa,EAC7B,UAAW4E,EAAK,UAChB,OAAQA,EAAK,OACb,SAAUA,EAAK,SACf,aAAcA,EAAK,aACnB,SAAUA,EAAK,SACf,aAAcA,EAAK,MACnB,YAAaA,EAAK,YAClB,MAAOA,EAAK,WACZ,KAAMtQ,EAAM,KACZ,mBAAoBiP,GACpB,oBAAqBC,GACrB,iBAAkBI,GAClB,QAASP,GACT,QAASW,GACT,OAAQC,GACR,SAAUX,GACV,UAAWgB,EACzB,CAAa,EAAG,KAAM,GAAIvF,EAAU,EACxBoG,EAAmB,eAAe,EAClCD,EAAM7C,EAAa,GAAK0C,EAAS,EAAIC,EAAmB,OAAQ,CAC9D,IAAK,EACL,MAAOK,EAAeH,EAAMpF,CAAO,EAAE,EAAE,QAAQ,CAAC,CAC9D,EAAe,CACDyF,EAAmB,OAAQ,CACzB,MAAOF,EAAeH,EAAMpF,CAAO,EAAE,EAAE,cAAc,CAAC,EACtD,QAASgE,EACzB,EAAiB,CACD,CAACoB,EAAMhF,EAAS,GAAK,CAACgF,EAAM/E,EAAc,GAAK,CAAC+E,EAAM/C,CAAkB,GAAK4C,EAAW,EAAEC,EAAmBI,GAAU,CAAE,IAAK,GAAK,CACjIE,GAAWV,EAAK,OAAQ,QAAQ,EAChCA,EAAK,YAAcG,EAAS,EAAIS,EAAYN,EAAMO,EAAM,EAAG,CACzD,IAAK,EACL,MAAOJ,EAAeH,EAAMpF,CAAO,EAAE,EAAE,MAAM,CAAC,CAClE,EAAqB,CACD,QAAS4F,EAAQ,IAAM,EACpBX,EAAW,EAAES,EAAYG,GAAwBf,EAAK,UAAU,CAAC,EACxF,CAAqB,EACD,EAAG,CACvB,EAAqB,EAAG,CAAC,OAAO,CAAC,GAAKO,EAAmB,OAAQ,EAAI,CACpD,EAAE,EAAE,GAAKA,EAAmB,OAAQ,EAAI,EACzCD,EAAMhF,EAAS,GAAK6E,EAAS,EAAIS,EAAYN,EAAMO,EAAM,EAAG,CAC1D,IAAK,EACL,MAAOJ,EAAe,CAACH,EAAMpF,CAAO,EAAE,EAAE,MAAM,EAAGoF,EAAMpF,CAAO,EAAE,EAAE,OAAO,CAAC,CAAC,EAC3E,YAAa8F,GAAcV,EAAMW,EAAI,EAAG,CAAC,SAAS,CAAC,EACnD,QAASrB,EAC3B,EAAmB,CACD,QAASkB,EAAQ,IAAM,CACrBI,EAAYZ,EAAMa,EAAW,CAAC,CAClD,CAAmB,EACD,EAAG,CACrB,EAAmB,EAAG,CAAC,QAAS,aAAa,CAAC,GAAKZ,EAAmB,OAAQ,EAAI,EAClED,EAAM/E,EAAc,GAAK4E,EAAS,EAAIS,EAAYN,EAAMO,EAAM,EAAG,CAC/D,IAAK,EACL,MAAOJ,EAAe,CAACH,EAAMpF,CAAO,EAAE,EAAE,MAAM,EAAGoF,EAAMpF,CAAO,EAAE,EAAE,UAAU,CAAC,CAAC,EAC9E,QAAS+D,EAC3B,EAAmB,CACD,QAAS6B,EAAQ,IAAM,EACpBX,EAAS,EAAIS,EAAYG,GAAwBT,EAAMtD,EAAY,CAAC,CAAC,EAC1F,CAAmB,EACD,EAAG,CACrB,EAAmB,EAAG,CAAC,OAAO,CAAC,GAAKuD,EAAmB,OAAQ,EAAI,EACnDD,EAAM/C,CAAkB,GAAK4C,EAAS,EAAIC,EAAmB,OAAQ,CACnE,IAAK,EACL,MAAOK,EAAeH,EAAMpF,CAAO,EAAE,EAAE,OAAO,CAAC,CACjE,EAAmB,CACDyF,EAAmB,OAAQ,CACzB,MAAOF,EAAeH,EAAMpF,CAAO,EAAE,EAAE,aAAa,CAAC,CACtD,EAAEkG,GAAgBd,EAAM9C,CAAU,CAAC,EAAI,MAAQ4D,GAAgBd,EAAM5E,CAAK,EAAE,SAAS,EAAG,CAAC,CAC3F,EAAE,CAAC,GAAK6E,EAAmB,OAAQ,EAAI,EACxCD,EAAMzD,CAAa,GAAKyD,EAAMxD,EAAY,GAAKwD,EAAM1D,EAAc,GAAKuD,EAAS,EAAIS,EAAYN,EAAMO,EAAM,EAAG,CAC9G,IAAK,EACL,MAAOJ,EAAe,CACpBH,EAAMpF,CAAO,EAAE,EAAE,MAAM,EACvBoF,EAAMpF,CAAO,EAAE,EAAE,cAAc,EAC/BoF,EAAMpF,CAAO,EAAE,GAAG,UAAWoF,EAAMzD,CAAa,IAAM,YAAY,CACtF,CAAmB,CACnB,EAAmB,CACD,QAASiE,EAAQ,IAAM,EACpBX,EAAS,EAAIS,EAAYG,GAAwBT,EAAMxD,EAAY,CAAC,CAAC,EAC1F,CAAmB,EACD,EAAG,CACrB,EAAmB,EAAG,CAAC,OAAO,CAAC,GAAKyD,EAAmB,OAAQ,EAAI,CACpD,EAAE,CAAC,CACL,EAAE,CAAC,GAAKA,EAAmB,OAAQ,EAAI,CACzC,EAAE,CAAC,EACJA,EAAmB,eAAe,EAClCP,EAAK,OAAO,QAAUG,EAAS,EAAIC,EAAmB,MAAO,CAC3D,IAAK,EACL,MAAOK,EAAeH,EAAMpF,CAAO,EAAE,GAAG,QAAS,QAAQ,CAAC,CACtE,EAAa,CACDwF,GAAWV,EAAK,OAAQ,QAAQ,CACjC,EAAE,CAAC,GAAKO,EAAmB,OAAQ,EAAI,CAClD,EAAW,EAAE,IAAMJ,IAAaC,EAAmBI,GAAU,CAAE,IAAK,GAAK,CAC/DD,EAAmB,YAAY,EAC/BI,EAAmB,WAAYN,GAAW,CACxC,GAAIC,EAAMvE,CAAO,EACjB,QAAS,WACT,IAAKM,EACL,MAAOiE,EAAMrF,CAAU,EAAE,EAAE,OAAO,CAC9C,EAAaqF,EAAM5E,CAAK,EAAG,CACf,SAAUsE,EAAK,SACf,SAAUM,EAAMlF,CAAa,EAC7B,SAAU4E,EAAK,SACf,aAAcA,EAAK,aACnB,MAAOM,EAAMlD,EAAa,EAC1B,aAAc4C,EAAK,MACnB,YAAaA,EAAK,YAClB,KAAMtQ,EAAM,KACZ,mBAAoBiP,GACpB,oBAAqBC,GACrB,iBAAkBI,GAClB,QAASP,GACT,QAASW,GACT,OAAQC,GACR,SAAUX,GACV,UAAWgB,EACvB,CAAW,EAAG,KAAM,GAAItF,EAAU,EACxBkG,EAAM/C,CAAkB,GAAK4C,EAAS,EAAIC,EAAmB,OAAQ,CACnE,IAAK,EACL,MAAOiB,GAAe5E,GAAW,KAAK,EACtC,MAAOgE,EAAeH,EAAMpF,CAAO,EAAE,EAAE,OAAO,CAAC,CAC3D,EAAakG,GAAgBd,EAAM9C,CAAU,CAAC,EAAI,MAAQ4D,GAAgBd,EAAM5E,CAAK,EAAE,SAAS,EAAG,CAAC,GAAK6E,EAAmB,OAAQ,EAAI,CAC/H,EAAE,EAAE,EACb,EAAS,GAAIrG,EAAU,GAAI,CACnB,CAACoH,GAAOtB,EAAK,OAAS,QAAQ,CACtC,CAAO,CAEJ,CACH,CAAC,EACD,IAAIuB,GAAwBC,GAAYjH,GAAW,CAAC,CAAC,SAAU,qFAAqF,CAAC,CAAC,ECtctJ,MAAMkH,GAAUC,GAAYH,EAAK,ECF3BI,GAAmBlI,GAAW,CAClC,MAAO,CACL,KAAME,GAAe,MAAM,EAC3B,SAAU,EACX,EACD,SAAU,CACR,KAAM,QACN,QAAS,EACV,CACH,CAAC,ECTD,IAAIiI,GAAa,GACjB,SAASC,GAAUC,EAASC,EAAS,CACnC,GAAI,CAAC7D,GACH,OACF,MAAM8D,EAAS,SAASpU,EAAO,CAC7B,IAAIyJ,GACHA,EAAK0K,EAAQ,OAAS,MAAgB1K,EAAG,KAAK0K,EAASnU,CAAK,CACjE,EACQqU,EAAO,SAASrU,EAAO,CAC3B,IAAIyJ,EACJ,SAAS,oBAAoB,YAAa2K,CAAM,EAChD,SAAS,oBAAoB,UAAWC,CAAI,EAC5C,SAAS,oBAAoB,YAAaD,CAAM,EAChD,SAAS,oBAAoB,WAAYC,CAAI,EAC7C,SAAS,cAAgB,KACzB,SAAS,YAAc,KACvBL,GAAa,IACZvK,EAAK0K,EAAQ,MAAQ,MAAgB1K,EAAG,KAAK0K,EAASnU,CAAK,CAChE,EACQsU,EAAS,SAAStU,EAAO,CAC7B,IAAIyJ,EACAuK,KAEJhU,EAAM,eAAc,EACpB,SAAS,cAAgB,IAAM,GAC/B,SAAS,YAAc,IAAM,GAC7B,SAAS,iBAAiB,YAAaoU,CAAM,EAC7C,SAAS,iBAAiB,UAAWC,CAAI,EACzC,SAAS,iBAAiB,YAAaD,CAAM,EAC7C,SAAS,iBAAiB,WAAYC,CAAI,EAC1CL,GAAa,IACZvK,EAAK0K,EAAQ,QAAU,MAAgB1K,EAAG,KAAK0K,EAASnU,CAAK,EAClE,EACEkU,EAAQ,iBAAiB,YAAaI,CAAM,EAC5CJ,EAAQ,iBAAiB,aAAcI,CAAM,CAC/C,CC9BA,MAAMC,GAAkBzS,GAAU,CAChC,MAAMyH,EAAWC,KACXgL,EAAQhG,KACRiG,EAAMjG,KACZ,SAASkG,EAAY1U,EAAO,CACXA,EAAM,SACNwU,EAAM,OACnBG,EAAW3U,CAAK,CAEnB,CACD,SAAS2U,EAAW3U,EAAO,CACzB,GAAI,CAACyU,EAAI,OAAS,CAACD,EAAM,MACvB,OAEF,MAAMI,EADKrL,EAAS,MAAM,GACV,wBACV,CAAE,QAAAtJ,EAAS,QAAAC,CAAS,EAAGH,GAAYC,CAAK,EAC9C,GAAK8B,EAAM,SAKJ,CACL,IAAI+S,EAAM3U,EAAU0U,EAAK,IACzBC,EAAM,KAAK,IAAIL,EAAM,MAAM,aAAe,EAAGK,CAAG,EAChDA,EAAM,KAAK,IAAIA,EAAKD,EAAK,OAASJ,EAAM,MAAM,aAAe,CAAC,EAC9D1S,EAAM,MAAM,IAAI,QAAS,KAAK,OAAO+S,EAAML,EAAM,MAAM,aAAe,IAAMI,EAAK,OAASJ,EAAM,MAAM,cAAgB,GAAG,CAAC,MATvG,CACnB,IAAIM,EAAO7U,EAAU2U,EAAK,KAC1BE,EAAO,KAAK,IAAIN,EAAM,MAAM,YAAc,EAAGM,CAAI,EACjDA,EAAO,KAAK,IAAIA,EAAMF,EAAK,MAAQJ,EAAM,MAAM,YAAc,CAAC,EAC9D1S,EAAM,MAAM,IAAI,QAAS,KAAK,OAAOgT,EAAON,EAAM,MAAM,YAAc,IAAMI,EAAK,MAAQJ,EAAM,MAAM,aAAe,GAAG,CAAC,EAO3H,CACD,MAAO,CACL,MAAAA,EACA,IAAAC,EACA,WAAAE,EACA,YAAAD,CACJ,CACA,EACMK,GAAoB,CAACjT,EAAO,CAChC,IAAA2S,EACA,MAAAD,EACA,WAAAG,CACF,IAAM,CACJ,MAAMpL,EAAWC,KACXwL,EAAKzG,GAAa,oBAAoB,EACtC0G,EAAYnL,EAAI,CAAC,EACjBoL,EAAWpL,EAAI,CAAC,EAChBqL,EAAarL,IACnB,SAASsL,GAAe,CAGtB,GAFI,CAACZ,EAAM,OAEP1S,EAAM,SACR,MAAO,GACT,MAAMuT,EAAK9L,EAAS,MAAM,GACpB+L,EAAQxT,EAAM,MAAM,IAAI,OAAO,EACrC,OAAKuT,EAEE,KAAK,MAAMC,GAASD,EAAG,YAAcb,EAAM,MAAM,YAAc,GAAK,GAAG,EADrE,CAEV,CACD,SAASe,GAAc,CACrB,GAAI,CAACf,EAAM,MACT,MAAO,GACT,MAAMa,EAAK9L,EAAS,MAAM,GAC1B,GAAI,CAACzH,EAAM,SACT,MAAO,GACT,MAAMwT,EAAQxT,EAAM,MAAM,IAAI,OAAO,EACrC,OAAKuT,EAEE,KAAK,MAAMC,GAASD,EAAG,aAAeb,EAAM,MAAM,aAAe,GAAK,GAAG,EADvE,CAEV,CACD,SAASgB,GAAgB,CACvB,GAAI1T,EAAM,OAASA,EAAM,MAAM,MAAO,CACpC,KAAM,CAAE,EAAA2T,EAAG,EAAAC,EAAG,EAAAC,CAAG,EAAG7T,EAAM,MAAM,QAChC,MAAO,kCAAkC2T,MAAMC,MAAMC,kBAAkBF,MAAMC,MAAMC,cAErF,MAAO,EACR,CACD,SAASC,GAAS,CAChBX,EAAU,MAAQG,IAClBF,EAAS,MAAQK,IACjBJ,EAAW,MAAQK,GACpB,CACDtD,GAAU,IAAM,CACd,GAAI,CAACuC,EAAI,OAAS,CAACD,EAAM,MACvB,OACF,MAAMqB,EAAa,CACjB,KAAO7V,GAAU,CACf2U,EAAW3U,CAAK,CACjB,EACD,IAAMA,GAAU,CACd2U,EAAW3U,CAAK,CACjB,CACP,EACIiU,GAAUQ,EAAI,MAAOoB,CAAU,EAC/B5B,GAAUO,EAAM,MAAOqB,CAAU,EACjCD,GACJ,CAAG,EACD3D,EAAM,IAAMnQ,EAAM,MAAM,IAAI,OAAO,EAAG,IAAM8T,EAAM,CAAE,EACpD3D,EAAM,IAAMnQ,EAAM,MAAM,MAAO,IAAM8T,EAAM,CAAE,EAC7C,MAAME,EAAUxM,EAAS,IAAM,CAAC0L,EAAG,EAAG,EAAEA,EAAG,GAAG,WAAYlT,EAAM,QAAQ,CAAC,CAAC,EACpEiU,EAASzM,EAAS,IAAM0L,EAAG,EAAE,KAAK,CAAC,EACnCgB,EAAW1M,EAAS,IAAM0L,EAAG,EAAE,OAAO,CAAC,EACvCiB,EAAW3M,EAAS,KAAO,CAAE,WAAY6L,EAAW,KAAO,EAAC,EAC5De,EAAa5M,EAAS,KAAO,CACjC,KAAM6M,GAAQlB,EAAU,KAAK,EAC7B,IAAKkB,GAAQjB,EAAS,KAAK,CAC5B,EAAC,EACF,MAAO,CAAE,QAAAY,EAAS,OAAAC,EAAQ,SAAAE,EAAU,SAAAD,EAAU,WAAAE,EAAY,OAAAN,EAC5D,EC5GMQ,GAAiB,qBACjB3J,GAAcC,EAAgB,CAClC,KAAM0J,EACR,CAAC,EACKzJ,GAA4BD,EAAgB,CAChD,GAAGD,GACH,MAAOsH,GACP,MAAMnH,EAAS,CAAE,OAAAC,GAAU,CACzB,MAAM/K,EAAQ8K,EACR,CAAE,IAAA6H,EAAK,MAAAD,EAAO,WAAAG,EAAY,YAAAD,GAAgBH,GAAezS,CAAK,EAC9D,CAAE,QAAAgU,EAAS,OAAAC,EAAQ,SAAAE,EAAU,SAAAD,EAAU,WAAAE,EAAY,OAAAN,CAAM,EAAKb,GAAkBjT,EAAO,CAC3F,IAAA2S,EACA,MAAAD,EACA,WAAAG,CACN,CAAK,EACD,OAAA9H,EAAO,CACL,OAAA+I,EACA,IAAAnB,EACA,MAAAD,CACN,CAAK,EACM,CAACpC,EAAMC,KACLE,EAAS,EAAIC,EAAmB,MAAO,CAC5C,MAAOK,EAAeH,EAAMoD,CAAO,CAAC,CAC5C,EAAS,CACD/C,EAAmB,MAAO,CACxB,QAAS,MACT,IAAK0B,EACL,MAAO5B,EAAeH,EAAMqD,CAAM,CAAC,EACnC,MAAOtC,GAAef,EAAMuD,CAAQ,CAAC,EACrC,QAAS5D,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI,IAAIgE,IAAS3D,EAAMgC,CAAW,GAAKhC,EAAMgC,CAAW,EAAE,GAAG2B,CAAI,EAC1G,EAAW,KAAM,CAAC,EACVtD,EAAmB,MAAO,CACxB,QAAS,QACT,IAAKyB,EACL,MAAO3B,EAAeH,EAAMsD,CAAQ,CAAC,EACrC,MAAOvC,GAAef,EAAMwD,CAAU,CAAC,CACjD,EAAW,KAAM,CAAC,CACX,EAAE,CAAC,EAEP,CACH,CAAC,EACD,IAAII,GAA8B1C,GAAYjH,GAAW,CAAC,CAAC,SAAU,8GAA8G,CAAC,CAAC,ECtCrL,MAAMA,GAAYD,EAAgB,CAChC,KAAM,mBACN,MAAO,CACL,MAAO,CACL,KAAM,OACN,SAAU,EACX,EACD,SAAU,OACX,EACD,MAAM5K,EAAO,CACX,MAAMkT,EAAKzG,GAAa,kBAAkB,EACpChF,EAAWC,KACXgL,EAAQ1K,IACR2K,EAAM3K,IACNmL,EAAYnL,EAAI,CAAC,EACjBoL,EAAWpL,EAAI,CAAC,EAChByM,EAAWjN,EAAS,IACjBxH,EAAM,MAAM,IAAI,KAAK,CAC7B,EACDmQ,EAAM,IAAMsE,EAAS,MAAO,IAAM,CAChCX,GACN,CAAK,EACD,SAASlB,EAAY1U,EAAO,CACXA,EAAM,SACNwU,EAAM,OACnBG,EAAW3U,CAAK,CAEnB,CACD,SAAS2U,EAAW3U,EAAO,CACzB,GAAI,CAACyU,EAAI,OAAS,CAACD,EAAM,MACvB,OAEF,MAAMI,EADKrL,EAAS,MAAM,GACV,wBACV,CAAE,QAAAtJ,EAAS,QAAAC,CAAS,EAAGH,GAAYC,CAAK,EAC9C,IAAIwW,EACJ,GAAK1U,EAAM,SAKJ,CACL,IAAI+S,EAAM3U,EAAU0U,EAAK,IACzBC,EAAM,KAAK,IAAIA,EAAKD,EAAK,OAASJ,EAAM,MAAM,aAAe,CAAC,EAC9DK,EAAM,KAAK,IAAIL,EAAM,MAAM,aAAe,EAAGK,CAAG,EAChD2B,EAAM,KAAK,OAAO3B,EAAML,EAAM,MAAM,aAAe,IAAMI,EAAK,OAASJ,EAAM,MAAM,cAAgB,GAAG,MATnF,CACnB,IAAIM,EAAO7U,EAAU2U,EAAK,KAC1BE,EAAO,KAAK,IAAIA,EAAMF,EAAK,MAAQJ,EAAM,MAAM,YAAc,CAAC,EAC9DM,EAAO,KAAK,IAAIN,EAAM,MAAM,YAAc,EAAGM,CAAI,EACjD0B,EAAM,KAAK,OAAO1B,EAAON,EAAM,MAAM,YAAc,IAAMI,EAAK,MAAQJ,EAAM,MAAM,aAAe,GAAG,EAOtG1S,EAAM,MAAM,IAAI,MAAO0U,CAAG,CAC3B,CACD,SAASpB,GAAe,CACtB,GAAI,CAACZ,EAAM,MACT,MAAO,GACT,MAAMa,EAAK9L,EAAS,MAAM,GAC1B,GAAIzH,EAAM,SACR,MAAO,GACT,MAAM0U,EAAM1U,EAAM,MAAM,IAAI,KAAK,EACjC,OAAKuT,EAEE,KAAK,MAAMmB,GAAOnB,EAAG,YAAcb,EAAM,MAAM,YAAc,GAAK,GAAG,EADnE,CAEV,CACD,SAASe,GAAc,CACrB,GAAI,CAACf,EAAM,MACT,MAAO,GACT,MAAMa,EAAK9L,EAAS,MAAM,GAC1B,GAAI,CAACzH,EAAM,SACT,MAAO,GACT,MAAM0U,EAAM1U,EAAM,MAAM,IAAI,KAAK,EACjC,OAAKuT,EAEE,KAAK,MAAMmB,GAAOnB,EAAG,aAAeb,EAAM,MAAM,aAAe,GAAK,GAAG,EADrE,CAEV,CACD,SAASoB,GAAS,CAChBX,EAAU,MAAQG,IAClBF,EAAS,MAAQK,GAClB,CACD,OAAArD,GAAU,IAAM,CACd,GAAI,CAACuC,EAAI,OAAS,CAACD,EAAM,MACvB,OACF,MAAMqB,EAAa,CACjB,KAAO7V,GAAU,CACf2U,EAAW3U,CAAK,CACjB,EACD,IAAMA,GAAU,CACd2U,EAAW3U,CAAK,CACjB,CACT,EACMiU,GAAUQ,EAAI,MAAOoB,CAAU,EAC/B5B,GAAUO,EAAM,MAAOqB,CAAU,EACjCD,GACN,CAAK,EACM,CACL,IAAAnB,EACA,MAAAD,EACA,UAAAS,EACA,SAAAC,EACA,SAAAqB,EACA,YAAA7B,EACA,OAAAkB,EACA,GAAAZ,CACN,CACG,CACH,CAAC,EACD,SAASyB,GAAYrE,EAAMC,EAAQqE,EAAQC,EAAQC,EAAOC,EAAU,CAClE,OAAOtE,EAAS,EAAIC,EAAmB,MAAO,CAC5C,MAAOK,EAAe,CAACT,EAAK,GAAG,EAAG,EAAEA,EAAK,GAAG,GAAG,WAAYA,EAAK,QAAQ,CAAC,CAAC,CAC9E,EAAK,CACDW,EAAmB,MAAO,CACxB,IAAK,MACL,MAAOF,EAAeT,EAAK,GAAG,EAAE,KAAK,CAAC,EACtC,QAASC,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI,IAAIgE,IAASjE,EAAK,aAAeA,EAAK,YAAY,GAAGiE,CAAI,EAClG,EAAO,KAAM,CAAC,EACVtD,EAAmB,MAAO,CACxB,IAAK,QACL,MAAOF,EAAeT,EAAK,GAAG,EAAE,OAAO,CAAC,EACxC,MAAOqB,GAAe,CACpB,KAAMrB,EAAK,UAAY,KACvB,IAAKA,EAAK,SAAW,IAC7B,CAAO,CACP,EAAO,KAAM,CAAC,CACX,EAAE,CAAC,CACN,CACA,IAAI0E,GAA4BlD,GAAYjH,GAAW,CAAC,CAAC,SAAU8J,EAAW,EAAG,CAAC,SAAU,4GAA4G,CAAC,CAAC,ECvH1M,MAAMM,GAAmBlL,GAAW,CAClC,WAAY,OACZ,GAAI,OACJ,UAAW,QACX,YAAa,OACb,SAAU,QACV,KAAMC,GACN,YAAa,CACX,KAAM,OACN,QAAS,EACV,EACD,MAAO,CACL,KAAM,OACN,QAAS,MACV,EACD,SAAU,CACR,KAAM,CAAC,OAAQ,MAAM,EACrB,QAAS,CACV,EACD,UAAW,CACT,KAAMC,GAAe,KAAK,CAC3B,EACD,cAAe,CACb,KAAM,QACN,QAAS,EACV,CACH,CAAC,EACKiL,GAAmB,CACvB,CAAC7K,EAAkB,EAAI8K,GAAQ7K,GAAS6K,CAAG,GAAKvH,GAAMuH,CAAG,EACzD,CAACC,EAAY,EAAID,GAAQ7K,GAAS6K,CAAG,GAAKvH,GAAMuH,CAAG,EACnD,aAAeA,GAAQ7K,GAAS6K,CAAG,GAAKvH,GAAMuH,CAAG,CACnD,EACME,GAAwB,OAAO,uBAAuB,ECtCtDC,GAAU,SAASZ,EAAKa,EAAKJ,EAAK,CACtC,MAAO,CACLT,EACAa,EAAMJ,IAAQT,GAAO,EAAIa,GAAOJ,GAAO,EAAIT,EAAM,EAAIA,IAAQ,EAC7DA,EAAM,CACV,CACA,EACMc,GAAiB,SAASC,EAAG,CACjC,OAAO,OAAOA,GAAM,UAAYA,EAAE,SAAS,GAAG,GAAK,OAAO,WAAWA,CAAC,IAAM,CAC9E,EACMC,GAAe,SAASD,EAAG,CAC/B,OAAO,OAAOA,GAAM,UAAYA,EAAE,SAAS,GAAG,CAChD,EACME,GAAU,SAASlW,EAAOmW,EAAK,CAC/BJ,GAAe/V,CAAK,IACtBA,EAAQ,QACV,MAAMoW,EAAiBH,GAAajW,CAAK,EAKzC,OAJAA,EAAQ,KAAK,IAAImW,EAAK,KAAK,IAAI,EAAG,OAAO,WAAW,GAAGnW,GAAO,CAAC,CAAC,EAC5DoW,IACFpW,EAAQ,OAAO,SAAS,GAAGA,EAAQmW,IAAO,EAAE,EAAI,KAE9C,KAAK,IAAInW,EAAQmW,CAAG,EAAI,KACnB,EAEFnW,EAAQmW,EAAM,OAAO,WAAWA,CAAG,CAC5C,EACME,GAAc,CAClB,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,IACJ,GAAI,GACN,EACMC,GAAUtW,GAAU,CACxBA,EAAQ,KAAK,IAAI,KAAK,MAAMA,CAAK,EAAG,GAAG,EACvC,MAAMuW,EAAO,KAAK,MAAMvW,EAAQ,EAAE,EAC5BwW,EAAMxW,EAAQ,GACpB,MAAO,GAAGqW,GAAYE,CAAI,GAAKA,IAAOF,GAAYG,CAAG,GAAKA,GAC5D,EACMC,GAAQ,SAAS,CAAE,EAAAvC,EAAG,EAAAC,EAAG,EAAAC,CAAC,EAAI,CAClC,OAAI,OAAO,MAAM,CAACF,CAAC,GAAK,OAAO,MAAM,CAACC,CAAC,GAAK,OAAO,MAAM,CAACC,CAAC,EAClD,GACF,IAAIkC,GAAOpC,CAAC,IAAIoC,GAAOnC,CAAC,IAAImC,GAAOlC,CAAC,GAC7C,EACMsC,GAAc,CAClB,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,GACH,EAAG,EACL,EACMC,GAAkB,SAASC,EAAK,CACpC,OAAIA,EAAI,SAAW,GACTF,GAAYE,EAAI,CAAC,EAAE,aAAa,GAAK,CAACA,EAAI,CAAC,GAAK,IAAMF,GAAYE,EAAI,CAAC,EAAE,YAAa,CAAA,GAAK,CAACA,EAAI,CAAC,GAEpGF,GAAYE,EAAI,CAAC,EAAE,YAAW,CAAE,GAAK,CAACA,EAAI,CAAC,CACpD,EACMC,GAAU,SAAS5B,EAAKa,EAAKgB,EAAO,CACxChB,EAAMA,EAAM,IACZgB,EAAQA,EAAQ,IAChB,IAAIC,EAAOjB,EACX,MAAMkB,EAAO,KAAK,IAAIF,EAAO,GAAI,EACjCA,GAAS,EACThB,GAAOgB,GAAS,EAAIA,EAAQ,EAAIA,EAChCC,GAAQC,GAAQ,EAAIA,EAAO,EAAIA,EAC/B,MAAMC,GAAKH,EAAQhB,GAAO,EACpBoB,EAAKJ,IAAU,EAAI,EAAIC,GAAQC,EAAOD,GAAQ,EAAIjB,GAAOgB,EAAQhB,GACvE,MAAO,CACL,EAAGb,EACH,EAAGiC,EAAK,IACR,EAAGD,EAAI,GACX,CACA,EACME,GAAU,CAACjD,EAAGC,EAAGC,IAAM,CAC3BF,EAAIgC,GAAQhC,EAAG,GAAG,EAClBC,EAAI+B,GAAQ/B,EAAG,GAAG,EAClBC,EAAI8B,GAAQ9B,EAAG,GAAG,EAClB,MAAM+B,EAAM,KAAK,IAAIjC,EAAGC,EAAGC,CAAC,EACtBgD,EAAM,KAAK,IAAIlD,EAAGC,EAAGC,CAAC,EAC5B,IAAIiD,EACJ,MAAMJ,EAAId,EACJmB,EAAInB,EAAMiB,EACVG,EAAIpB,IAAQ,EAAI,EAAImB,EAAInB,EAC9B,GAAIA,IAAQiB,EACVC,EAAI,MACC,CACL,OAAQlB,EAAG,CACT,KAAKjC,EAAG,CACNmD,GAAKlD,EAAIC,GAAKkD,GAAKnD,EAAIC,EAAI,EAAI,GAC/B,KACD,CACD,KAAKD,EAAG,CACNkD,GAAKjD,EAAIF,GAAKoD,EAAI,EAClB,KACD,CACD,KAAKlD,EAAG,CACNiD,GAAKnD,EAAIC,GAAKmD,EAAI,EAClB,KACD,CACF,CACDD,GAAK,EAEP,MAAO,CAAE,EAAGA,EAAI,IAAK,EAAGE,EAAI,IAAK,EAAGN,EAAI,IAC1C,EACMO,GAAU,SAASH,EAAGE,EAAGN,EAAG,CAChCI,EAAInB,GAAQmB,EAAG,GAAG,EAAI,EACtBE,EAAIrB,GAAQqB,EAAG,GAAG,EAClBN,EAAIf,GAAQe,EAAG,GAAG,EAClB,MAAMQ,EAAI,KAAK,MAAMJ,CAAC,EAChBK,EAAIL,EAAII,EACRE,EAAIV,GAAK,EAAIM,GACbK,EAAIX,GAAK,EAAIS,EAAIH,GACjBM,EAAIZ,GAAK,GAAK,EAAIS,GAAKH,GACvBO,EAAML,EAAI,EACVvD,EAAI,CAAC+C,EAAGW,EAAGD,EAAGA,EAAGE,EAAGZ,CAAC,EAAEa,CAAG,EAC1B3D,EAAI,CAAC0D,EAAGZ,EAAGA,EAAGW,EAAGD,EAAGA,CAAC,EAAEG,CAAG,EAC1B1D,EAAI,CAACuD,EAAGA,EAAGE,EAAGZ,EAAGA,EAAGW,CAAC,EAAEE,CAAG,EAChC,MAAO,CACL,EAAG,KAAK,MAAM5D,EAAI,GAAG,EACrB,EAAG,KAAK,MAAMC,EAAI,GAAG,EACrB,EAAG,KAAK,MAAMC,EAAI,GAAG,CACzB,CACA,EACA,MAAM2D,EAAM,CACV,YAAYnF,EAAU,GAAI,CACxB,KAAK,KAAO,EACZ,KAAK,YAAc,IACnB,KAAK,OAAS,IACd,KAAK,OAAS,IACd,KAAK,YAAc,GACnB,KAAK,OAAS,MACd,KAAK,MAAQ,GACb,UAAWoF,KAAUpF,EACfqF,GAAOrF,EAASoF,CAAM,IACxB,KAAKA,CAAM,EAAIpF,EAAQoF,CAAM,GAG7BpF,EAAQ,MACV,KAAK,WAAWA,EAAQ,KAAK,EAE7B,KAAK,WAAU,CAElB,CACD,IAAIsF,EAAMlY,EAAO,CACf,GAAI,UAAU,SAAW,GAAK,OAAOkY,GAAS,SAAU,CACtD,UAAWP,KAAKO,EACVD,GAAOC,EAAMP,CAAC,GAChB,KAAK,IAAIA,EAAGO,EAAKP,CAAC,CAAC,EAGvB,OAGF,KAAK,IAAIO,GAAM,EAAIlY,EACnB,KAAK,WAAU,CAChB,CACD,IAAIkY,EAAM,CACR,OAAIA,IAAS,QACJ,KAAK,MAAM,KAAK,IAAIA,GAAM,CAAC,EAE7B,KAAK,IAAIA,GAAM,CACvB,CACD,OAAQ,CACN,OAAOV,GAAQ,KAAK,KAAM,KAAK,YAAa,KAAK,MAAM,CACxD,CACD,WAAWxX,EAAO,CAChB,GAAI,CAACA,EAAO,CACV,KAAK,KAAO,EACZ,KAAK,YAAc,IACnB,KAAK,OAAS,IACd,KAAK,WAAU,EACf,OAEF,MAAMmY,EAAU,CAACd,EAAGE,EAAGN,IAAM,CAC3B,KAAK,KAAO,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKI,CAAC,CAAC,EACxC,KAAK,YAAc,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKE,CAAC,CAAC,EAC/C,KAAK,OAAS,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKN,CAAC,CAAC,EAC1C,KAAK,WAAU,CACrB,EACI,GAAIjX,EAAM,SAAS,KAAK,EAAG,CACzB,MAAMoY,EAAQpY,EAAM,QAAQ,mBAAoB,EAAE,EAAE,MAAM,OAAO,EAAE,OAAQ0V,GAAQA,IAAQ,EAAE,EAAE,IAAI,CAACA,EAAKpW,IAAUA,EAAQ,EAAI,OAAO,WAAWoW,CAAG,EAAI,OAAO,SAASA,EAAK,EAAE,CAAC,EAMhL,GALI0C,EAAM,SAAW,EACnB,KAAK,OAAS,OAAO,WAAWA,EAAM,CAAC,CAAC,EAAI,IACnCA,EAAM,SAAW,IAC1B,KAAK,OAAS,KAEZA,EAAM,QAAU,EAAG,CACrB,KAAM,CAAE,EAAAf,EAAG,EAAAE,EAAG,EAAAN,CAAG,EAAGJ,GAAQuB,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,EACxDD,EAAQd,EAAGE,EAAGN,CAAC,WAERjX,EAAM,SAAS,KAAK,EAAG,CAChC,MAAMoY,EAAQpY,EAAM,QAAQ,mBAAoB,EAAE,EAAE,MAAM,OAAO,EAAE,OAAQ0V,GAAQA,IAAQ,EAAE,EAAE,IAAI,CAACA,EAAKpW,IAAUA,EAAQ,EAAI,OAAO,WAAWoW,CAAG,EAAI,OAAO,SAASA,EAAK,EAAE,CAAC,EAC5K0C,EAAM,SAAW,EACnB,KAAK,OAAS,OAAO,WAAWA,EAAM,CAAC,CAAC,EAAI,IACnCA,EAAM,SAAW,IAC1B,KAAK,OAAS,KAEZA,EAAM,QAAU,GAClBD,EAAQC,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,UAE7BpY,EAAM,SAAS,KAAK,EAAG,CAChC,MAAMoY,EAAQpY,EAAM,QAAQ,mBAAoB,EAAE,EAAE,MAAM,OAAO,EAAE,OAAQ0V,GAAQA,IAAQ,EAAE,EAAE,IAAI,CAACA,EAAKpW,IAAUA,EAAQ,EAAI,OAAO,WAAWoW,CAAG,EAAI,OAAO,SAASA,EAAK,EAAE,CAAC,EAMhL,GALI0C,EAAM,SAAW,EACnB,KAAK,OAAS,OAAO,WAAWA,EAAM,CAAC,CAAC,EAAI,IACnCA,EAAM,SAAW,IAC1B,KAAK,OAAS,KAEZA,EAAM,QAAU,EAAG,CACrB,KAAM,CAAE,EAAAf,EAAG,EAAAE,EAAG,EAAAN,CAAG,EAAGE,GAAQiB,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,EACxDD,EAAQd,EAAGE,EAAGN,CAAC,WAERjX,EAAM,SAAS,GAAG,EAAG,CAC9B,MAAM4W,EAAM5W,EAAM,QAAQ,IAAK,EAAE,EAAE,OACnC,GAAI,CAAC,qDAAqD,KAAK4W,CAAG,EAChE,OACF,IAAI1C,EAAGC,EAAGC,EACNwC,EAAI,SAAW,GACjB1C,EAAIyC,GAAgBC,EAAI,CAAC,EAAIA,EAAI,CAAC,CAAC,EACnCzC,EAAIwC,GAAgBC,EAAI,CAAC,EAAIA,EAAI,CAAC,CAAC,EACnCxC,EAAIuC,GAAgBC,EAAI,CAAC,EAAIA,EAAI,CAAC,CAAC,IAC1BA,EAAI,SAAW,GAAKA,EAAI,SAAW,KAC5C1C,EAAIyC,GAAgBC,EAAI,MAAM,EAAG,CAAC,CAAC,EACnCzC,EAAIwC,GAAgBC,EAAI,MAAM,EAAG,CAAC,CAAC,EACnCxC,EAAIuC,GAAgBC,EAAI,MAAM,EAAG,CAAC,CAAC,GAEjCA,EAAI,SAAW,EACjB,KAAK,OAASD,GAAgBC,EAAI,MAAM,CAAC,CAAC,EAAI,IAAM,KAC3CA,EAAI,SAAW,GAAKA,EAAI,SAAW,KAC5C,KAAK,OAAS,KAEhB,KAAM,CAAE,EAAAS,EAAG,EAAAE,EAAG,EAAAN,CAAC,EAAKE,GAAQjD,EAAGC,EAAGC,CAAC,EACnC+D,EAAQd,EAAGE,EAAGN,CAAC,EAElB,CACD,QAAQoB,EAAO,CACb,OAAO,KAAK,IAAIA,EAAM,KAAO,KAAK,IAAI,EAAI,GAAK,KAAK,IAAIA,EAAM,YAAc,KAAK,WAAW,EAAI,GAAK,KAAK,IAAIA,EAAM,OAAS,KAAK,MAAM,EAAI,GAAK,KAAK,IAAIA,EAAM,OAAS,KAAK,MAAM,EAAI,CACzL,CACD,YAAa,CACX,KAAM,CAAE,KAAAC,EAAM,YAAAC,EAAa,OAAAC,EAAQ,OAAAC,EAAQ,OAAAC,CAAQ,EAAG,KACtD,GAAI,KAAK,YACP,OAAQA,EAAM,CACZ,IAAK,MAAO,CACV,MAAMC,EAAM9C,GAAQyC,EAAMC,EAAc,IAAKC,EAAS,GAAG,EACzD,KAAK,MAAQ,QAAQF,MAAS,KAAK,MAAMK,EAAI,CAAC,EAAI,GAAG,OAAO,KAAK,MAAMA,EAAI,CAAC,EAAI,GAAG,OAAO,KAAK,IAAI,OAAO,EAAI,OAC9G,KACD,CACD,IAAK,MAAO,CACV,KAAK,MAAQ,QAAQL,MAAS,KAAK,MAAMC,CAAW,OAAO,KAAK,MAAMC,CAAM,OAAO,KAAK,IAAI,OAAO,EAAI,OACvG,KACD,CACD,IAAK,MAAO,CACV,KAAK,MAAQ,GAAG/B,GAAMe,GAAQc,EAAMC,EAAaC,CAAM,CAAC,IAAIlC,GAAOmC,EAAS,IAAM,GAAG,IACrF,KACD,CACD,QAAS,CACP,KAAM,CAAE,EAAG,EAAAtE,EAAG,EAAAC,CAAC,EAAKoD,GAAQc,EAAMC,EAAaC,CAAM,EACrD,KAAK,MAAQ,QAAQ,MAAMrE,MAAMC,MAAM,KAAK,IAAI,OAAO,EAAI,MAC5D,CACF,KAED,QAAQsE,EAAM,CACZ,IAAK,MAAO,CACV,MAAMC,EAAM9C,GAAQyC,EAAMC,EAAc,IAAKC,EAAS,GAAG,EACzD,KAAK,MAAQ,OAAOF,MAAS,KAAK,MAAMK,EAAI,CAAC,EAAI,GAAG,OAAO,KAAK,MAAMA,EAAI,CAAC,EAAI,GAAG,MAClF,KACD,CACD,IAAK,MAAO,CACV,KAAK,MAAQ,OAAOL,MAAS,KAAK,MAAMC,CAAW,OAAO,KAAK,MAAMC,CAAM,MAC3E,KACD,CACD,IAAK,MAAO,CACV,KAAM,CAAE,EAAG,EAAArE,EAAG,EAAAC,CAAC,EAAKoD,GAAQc,EAAMC,EAAaC,CAAM,EACrD,KAAK,MAAQ,OAAO,MAAMrE,MAAMC,KAChC,KACD,CACD,QACE,KAAK,MAAQqC,GAAMe,GAAQc,EAAMC,EAAaC,CAAM,CAAC,CAExD,CAEJ,CACH,CCvRA,MAAMpN,GAAYD,EAAgB,CAChC,MAAO,CACL,OAAQ,CACN,KAAM,MACN,SAAU,EACX,EACD,MAAO,CACL,KAAM,OACN,SAAU,EACX,CACF,EACD,MAAM5K,EAAO,CACX,MAAMkT,EAAKzG,GAAa,iBAAiB,EACnC,CAAE,aAAA4L,CAAY,EAAKC,GAAOjD,EAAqB,EAC/CkD,EAAavQ,EAAIwQ,EAAYxY,EAAM,OAAQA,EAAM,KAAK,CAAC,EAC7DmQ,EAAM,IAAMkI,EAAa,MAAQlD,GAAQ,CACvC,MAAM2C,EAAQ,IAAIN,GAClBM,EAAM,WAAW3C,CAAG,EACpBoD,EAAW,MAAM,QAASE,GAAS,CACjCA,EAAK,SAAWX,EAAM,QAAQW,CAAI,CAC1C,CAAO,CACP,CAAK,EACDC,GAAY,IAAM,CAChBH,EAAW,MAAQC,EAAYxY,EAAM,OAAQA,EAAM,KAAK,CAC9D,CAAK,EACD,SAAS2Y,EAAa5Z,EAAO,CAC3BiB,EAAM,MAAM,WAAWA,EAAM,OAAOjB,CAAK,CAAC,CAC3C,CACD,SAASyZ,EAAYI,EAAQd,EAAO,CAClC,OAAOc,EAAO,IAAKnZ,GAAU,CAC3B,MAAM,EAAI,IAAI+X,GACd,SAAE,YAAc,GAChB,EAAE,OAAS,OACX,EAAE,WAAW/X,CAAK,EAClB,EAAE,SAAW,EAAE,QAAUqY,EAAM,MACxB,CACf,CAAO,CACF,CACD,MAAO,CACL,WAAAS,EACA,aAAAI,EACA,GAAAzF,CACN,CACG,CACH,CAAC,EACK1I,GAAa,CAAC,SAAS,EAC7B,SAASmK,GAAYrE,EAAMC,EAAQqE,EAAQC,EAAQC,EAAOC,EAAU,CAClE,OAAOtE,EAAS,EAAIC,EAAmB,MAAO,CAC5C,MAAOK,EAAeT,EAAK,GAAG,EAAC,CAAE,CACrC,EAAK,CACDW,EAAmB,MAAO,CACxB,MAAOF,EAAeT,EAAK,GAAG,EAAE,QAAQ,CAAC,CAC/C,EAAO,EACAG,EAAU,EAAI,EAAGC,EAAmBI,GAAU,KAAM+H,GAAWvI,EAAK,WAAY,CAACmI,EAAM1Z,KAC/E0R,EAAS,EAAIC,EAAmB,MAAO,CAC5C,IAAKJ,EAAK,OAAOvR,CAAK,EACtB,MAAOgS,EAAe,CACpBT,EAAK,GAAG,EAAE,gBAAgB,EAC1BA,EAAK,GAAG,GAAG,QAASmI,EAAK,OAAS,GAAG,EACrC,CAAE,SAAUA,EAAK,QAAU,CACvC,CAAW,EACD,QAAUK,GAAWxI,EAAK,aAAavR,CAAK,CACtD,EAAW,CACDkS,EAAmB,MAAO,CACxB,MAAOU,GAAe,CAAE,gBAAiB8G,EAAK,KAAK,CAAE,CACjE,EAAa,KAAM,CAAC,CACpB,EAAW,GAAIjO,EAAU,EAClB,EAAG,GAAG,EACR,EAAE,CAAC,CACL,EAAE,CAAC,CACN,CACA,IAAIuO,GAA4BjH,GAAYjH,GAAW,CAAC,CAAC,SAAU8J,EAAW,EAAG,CAAC,SAAU,2GAA2G,CAAC,CAAC,ECtEzM,MAAM9J,GAAYD,EAAgB,CAChC,KAAM,YACN,MAAO,CACL,MAAO,CACL,KAAM,OACN,SAAU,EACX,CACF,EACD,MAAM5K,EAAO,CACX,MAAMkT,EAAKzG,GAAa,eAAe,EACjChF,EAAWC,KACXsR,EAAYhR,EAAI,CAAC,EACjBiR,EAAajR,EAAI,CAAC,EAClBqL,EAAarL,EAAI,mBAAmB,EACpCkR,EAAa1R,EAAS,IAAM,CAChC,MAAMkN,EAAM1U,EAAM,MAAM,IAAI,KAAK,EAC3BP,EAAQO,EAAM,MAAM,IAAI,OAAO,EACrC,MAAO,CAAE,IAAA0U,EAAK,MAAAjV,EACpB,CAAK,EACD,SAASqU,GAAS,CAChB,MAAMqF,EAAanZ,EAAM,MAAM,IAAI,YAAY,EACzCP,EAAQO,EAAM,MAAM,IAAI,OAAO,EAC/BuT,EAAK9L,EAAS,MAAM,GACpB,CAAE,YAAa2G,EAAO,aAAc3E,CAAM,EAAK8J,EACrD0F,EAAW,MAAQE,EAAa/K,EAAQ,IACxC4K,EAAU,OAAS,IAAMvZ,GAASgK,EAAS,IAC3C4J,EAAW,MAAQ,OAAOrT,EAAM,MAAM,IAAI,KAAK,eAChD,CACD,SAAS6S,EAAW3U,EAAO,CAEzB,MAAM4U,EADKrL,EAAS,MAAM,GACV,wBACV,CAAE,QAAAtJ,EAAS,QAAAC,CAAS,EAAGH,GAAYC,CAAK,EAC9C,IAAI8U,EAAO7U,EAAU2U,EAAK,KACtBC,EAAM3U,EAAU0U,EAAK,IACzBE,EAAO,KAAK,IAAI,EAAGA,CAAI,EACvBA,EAAO,KAAK,IAAIA,EAAMF,EAAK,KAAK,EAChCC,EAAM,KAAK,IAAI,EAAGA,CAAG,EACrBA,EAAM,KAAK,IAAIA,EAAKD,EAAK,MAAM,EAC/BmG,EAAW,MAAQjG,EACnBgG,EAAU,MAAQjG,EAClB/S,EAAM,MAAM,IAAI,CACd,WAAYgT,EAAOF,EAAK,MAAQ,IAChC,MAAO,IAAMC,EAAMD,EAAK,OAAS,GACzC,CAAO,CACF,CACD,OAAA3C,EAAM,IAAM+I,EAAW,MAAO,IAAM,CAClCpF,GACN,CAAK,EACD1D,GAAU,IAAM,CACd+B,GAAU1K,EAAS,MAAM,GAAI,CAC3B,KAAOvJ,GAAU,CACf2U,EAAW3U,CAAK,CACjB,EACD,IAAMA,GAAU,CACd2U,EAAW3U,CAAK,CACjB,CACT,CAAO,EACD4V,GACN,CAAK,EACM,CACL,UAAAkF,EACA,WAAAC,EACA,WAAA5F,EACA,WAAA6F,EACA,WAAArG,EACA,OAAAiB,EACA,GAAAZ,CACN,CACG,CACH,CAAC,EACK1I,GAA6ByG,EAAmB,MAAO,KAAM,KAAM,EAAE,EACrExG,GAAa,CACjBD,EACF,EACA,SAASmK,GAAYrE,EAAMC,EAAQqE,EAAQC,EAAQC,EAAOC,EAAU,CAClE,OAAOtE,EAAS,EAAIC,EAAmB,MAAO,CAC5C,MAAOK,EAAeT,EAAK,GAAG,EAAC,CAAE,EACjC,MAAOqB,GAAe,CACpB,gBAAiBrB,EAAK,UAC5B,CAAK,CACL,EAAK,CACDW,EAAmB,MAAO,CACxB,MAAOF,EAAeT,EAAK,GAAG,EAAE,OAAO,CAAC,CAC9C,EAAO,KAAM,CAAC,EACVW,EAAmB,MAAO,CACxB,MAAOF,EAAeT,EAAK,GAAG,EAAE,OAAO,CAAC,CAC9C,EAAO,KAAM,CAAC,EACVW,EAAmB,MAAO,CACxB,MAAOF,EAAeT,EAAK,GAAG,EAAE,QAAQ,CAAC,EACzC,MAAOqB,GAAe,CACpB,IAAKrB,EAAK,UAAY,KACtB,KAAMA,EAAK,WAAa,IAChC,CAAO,CACP,EAAO7F,GAAY,CAAC,CACjB,EAAE,CAAC,CACN,CACA,IAAI2O,GAA0BtH,GAAYjH,GAAW,CAAC,CAAC,SAAU8J,EAAW,EAAG,CAAC,SAAU,0GAA0G,CAAC,CAAC,EC7EtM,MAAMnK,GAAa,CAAC,KAAM,aAAc,kBAAmB,mBAAoB,WAAY,WAAW,EAChGG,GAAcC,EAAgB,CAClC,KAAM,eACR,CAAC,EACKC,GAA4BD,EAAgB,CAChD,GAAGD,GACH,MAAOsK,GACP,MAAOC,GACP,MAAMpK,EAAS,CAAE,OAAAC,EAAQ,KAAAC,CAAI,EAAI,CAC/B,MAAMhL,EAAQ8K,EACR,CAAE,EAAAwM,GAAM+B,KACRnG,EAAKzG,GAAa,OAAO,EACzB,CAAE,SAAAN,GAAaC,KACfkN,EAAY/M,KACZgN,EAAgB/M,KAChB,CAAE,QAASgN,EAAU,oBAAAC,CAAmB,EAAKnN,GAAmBtM,EAAO,CAC3E,gBAAiBmM,CACvB,CAAK,EACKuI,EAAM1M,IACN2O,EAAK3O,IACLwL,EAAQxL,IACR0R,EAAS1R,IACf,IAAI2R,EAAqB,GACzB,MAAM7B,EAAQ8B,GAAS,IAAIpC,GAAM,CAC/B,YAAaxX,EAAM,UACnB,OAAQA,EAAM,aAAe,GAC7B,MAAOA,EAAM,UACd,CAAA,CAAC,EACI6Z,EAAa7R,EAAI,EAAK,EACtB8R,EAAiB9R,EAAI,EAAK,EAC1B+R,EAAc/R,EAAI,EAAE,EACpBgS,EAAiBxS,EAAS,IAC1B,CAACxH,EAAM,YAAc,CAAC8Z,EAAe,MAChC,cAEFG,GAAanC,EAAO9X,EAAM,SAAS,CAC3C,EACKqY,EAAe7Q,EAAS,IACrB,CAACxH,EAAM,YAAc,CAAC8Z,EAAe,MAAQ,GAAKhC,EAAM,KAChE,EACKoC,EAAkB1S,EAAS,IACvBiS,EAAoB,MAA0D,OAAlDzZ,EAAM,OAASsX,EAAE,6BAA6B,CACnF,EACK6C,GAAuB3S,EAAS,IAC7BiS,EAAoB,MAAQtN,GAAY,KAAO,OAASA,EAAS,QAAU,MACnF,EACKiO,GAAS5S,EAAS,IACf,CACL0L,EAAG,EAAE,QAAQ,EACbA,EAAG,GAAG,WAAYqG,EAAc,KAAK,EACrCrG,EAAG,GAAG,SAAUoG,EAAU,KAAK,CACvC,CACK,EACD,SAASW,GAAaI,EAAQC,EAAW,CACvC,GAAI,EAAED,aAAkB7C,IACtB,MAAM,IAAI,UAAU,0CAA0C,EAEhE,KAAM,CAAE,EAAA7D,EAAG,EAAAC,GAAG,EAAAC,EAAC,EAAKwG,EAAO,QAC3B,OAAOC,EAAY,QAAQ3G,MAAMC,OAAMC,OAAMwG,EAAO,IAAI,OAAO,EAAI,OAAS,OAAO1G,MAAMC,OAAMC,KAChG,CACD,SAAS0G,GAAc9a,EAAO,CAC5Boa,EAAW,MAAQpa,CACpB,CACD,MAAM+a,EAAwBC,GAASF,GAAe,GAAG,EACzD,SAASG,IAAO,CACVnB,EAAc,OAElBgB,GAAc,EAAI,CACnB,CACD,SAASI,IAAO,CACdH,EAAsB,EAAK,EAC3BI,IACD,CACD,SAASA,IAAa,CACpBlM,EAAS,IAAM,CACT1O,EAAM,WACR8X,EAAM,WAAW9X,EAAM,UAAU,GAEjC8X,EAAM,MAAQ,GACdpJ,EAAS,IAAM,CACboL,EAAe,MAAQ,EACnC,CAAW,EAEX,CAAO,CACF,CACD,SAASe,IAAgB,CACnBtB,EAAc,OAElBiB,EAAsB,CAACX,EAAW,KAAK,CACxC,CACD,SAASiB,GAAgB,CACvBhD,EAAM,WAAWiC,EAAY,KAAK,CACnC,CACD,SAASgB,IAAe,CACtB,MAAMtb,EAAQqY,EAAM,MACpB9M,EAAKX,GAAoB5K,CAAK,EAC9BuL,EAAK,SAAUvL,CAAK,EAChBO,EAAM,gBACRmM,GAAY,MAAgBA,EAAS,SAAS,QAAQ,EAAE,MAAOyD,GAAQC,GAAa,CAAC,GAEvF2K,EAAsB,EAAK,EAC3B9L,EAAS,IAAM,CACb,MAAMsM,EAAW,IAAIxD,GAAM,CACzB,YAAaxX,EAAM,UACnB,OAAQA,EAAM,aAAe,GAC7B,MAAOA,EAAM,UACvB,CAAS,EACI8X,EAAM,QAAQkD,CAAQ,GACzBJ,IAEV,CAAO,CACF,CACD,SAAS1K,IAAQ,CACfsK,EAAsB,EAAK,EAC3BxP,EAAKX,GAAoB,IAAI,EAC7BW,EAAK,SAAU,IAAI,EACfhL,EAAM,aAAe,MAAQA,EAAM,gBACrCmM,GAAY,MAAgBA,EAAS,SAAS,QAAQ,EAAE,MAAOyD,GAAQC,GAAa,CAAC,GAEvF+K,IACD,CACD,OAAAxK,GAAU,IAAM,CACVpQ,EAAM,aACR+Z,EAAY,MAAQ1B,EAAa,MAEzC,CAAK,EACDlI,EAAM,IAAMnQ,EAAM,WAAaib,GAAW,CACnCA,EAEMA,GAAUA,IAAWnD,EAAM,QACpC6B,EAAqB,GACrB7B,EAAM,WAAWmD,CAAM,GAHvBnB,EAAe,MAAQ,EAK/B,CAAK,EACD3J,EAAM,IAAMkI,EAAa,MAAQlD,GAAQ,CACvC4E,EAAY,MAAQ5E,EACpBwE,GAAsB3O,EAAK,eAAgBmK,CAAG,EAC9CwE,EAAqB,EAC3B,CAAK,EACDxJ,EAAM,IAAM2H,EAAM,MAAO,IAAM,CACzB,CAAC9X,EAAM,YAAc,CAAC8Z,EAAe,QACvCA,EAAe,MAAQ,GAE/B,CAAK,EACD3J,EAAM,IAAM0J,EAAW,MAAO,IAAM,CAClCnL,EAAS,IAAM,CACb,IAAI/G,EAAIuT,EAAIC,GACXxT,EAAK+M,EAAI,QAAU,MAAgB/M,EAAG,UACtCuT,EAAKvE,EAAG,QAAU,MAAgBuE,EAAG,UACrCC,EAAK3H,EAAM,QAAU,MAAgB2H,EAAG,QACjD,CAAO,CACP,CAAK,EACDC,GAAQ/F,GAAuB,CAC7B,aAAAgD,CACN,CAAK,EACDtN,EAAO,CACL,MAAA+M,EACA,KAAA4C,GACA,KAAAC,EACN,CAAK,EACM,CAACrK,EAAMC,KACLE,EAAS,EAAIS,EAAYN,EAAMyK,EAAS,EAAG,CAChD,QAAS,SACT,IAAK3B,EACL,QAASG,EAAW,MACpB,aAAc,GACd,sBAAuB,CAAC,SAAU,MAAO,QAAS,MAAM,EACxD,OAAQ,EACR,mBAAoB,GACpB,eAAgB,CAACjJ,EAAMsC,CAAE,EAAE,GAAG,SAAU,OAAO,EAAGtC,EAAMsC,CAAE,EAAE,EAAE,UAAU,EAAG5C,EAAK,WAAW,EAC3F,0BAA2B,GAC3B,OAAQ,QACR,QAAS,QACT,WAAY,GAAGM,EAAMsC,CAAE,EAAE,UAAU,oBACnC,WAAY,EACpB,EAAS,CACD,QAAS9B,EAAQ,IAAM,CACrBZ,IAAgBC,EAAW,EAAEC,EAAmB,MAAO,KAAM,CAC3DO,EAAmB,MAAO,CACxB,MAAOF,EAAeH,EAAMsC,CAAE,EAAE,GAAG,WAAY,cAAc,CAAC,CAC5E,EAAe,CACD1B,EAAYwD,GAAW,CACrB,QAAS,MACT,IAAKN,EACL,MAAO,aACP,MAAO9D,EAAMkH,CAAK,EAClB,SAAU,EACX,EAAE,KAAM,EAAG,CAAC,OAAO,CAAC,EACrBtG,EAAY4H,GAAS,CACnB,IAAK,UACL,MAAOxI,EAAMkH,CAAK,CACnB,EAAE,KAAM,EAAG,CAAC,OAAO,CAAC,CACtB,EAAE,CAAC,EACJxH,EAAK,WAAaG,IAAaS,EAAYsD,GAAa,CACtD,IAAK,EACL,QAAS,QACT,IAAKhB,EACL,MAAO5C,EAAMkH,CAAK,CAChC,EAAe,KAAM,EAAG,CAAC,OAAO,CAAC,GAAKjH,EAAmB,OAAQ,EAAI,EACzDP,EAAK,WAAaG,IAAaS,EAAY6H,GAAW,CACpD,IAAK,EACL,IAAK,YACL,MAAOnI,EAAMkH,CAAK,EAClB,OAAQxH,EAAK,SAC3B,EAAe,KAAM,EAAG,CAAC,QAAS,QAAQ,CAAC,GAAKO,EAAmB,OAAQ,EAAI,EACnEI,EAAmB,MAAO,CACxB,MAAOF,EAAeH,EAAMsC,CAAE,EAAE,GAAG,WAAY,MAAM,CAAC,CACpE,EAAe,CACDjC,EAAmB,OAAQ,CACzB,MAAOF,EAAeH,EAAMsC,CAAE,EAAE,GAAG,WAAY,OAAO,CAAC,CACvE,EAAiB,CACD1B,EAAYZ,EAAMmB,EAAO,EAAG,CAC1B,WAAYgI,EAAY,MACxB,sBAAuBxJ,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAKuI,GAAWiB,EAAY,MAAQjB,GACjF,iBAAkB,GAClB,KAAM,QACN,QAASwC,GAASR,EAAe,CAAC,OAAO,CAAC,EAC1C,OAAQA,CACT,EAAE,KAAM,EAAG,CAAC,aAAc,SAAS,CAAC,CACtC,EAAE,CAAC,EACJtJ,EAAYZ,EAAM2K,CAAQ,EAAG,CAC3B,MAAOxK,EAAeH,EAAMsC,CAAE,EAAE,GAAG,WAAY,UAAU,CAAC,EAC1D,KAAM,GACN,KAAM,QACN,QAAShD,EACzB,EAAiB,CACD,QAASkB,EAAQ,IAAM,CACrBoK,GAAgB9J,GAAgBd,EAAM0G,CAAC,EAAE,sBAAsB,CAAC,EAAG,CAAC,CACtF,CAAiB,EACD,EAAG,CACnB,EAAiB,EAAG,CAAC,OAAO,CAAC,EACf9F,EAAYZ,EAAM2K,CAAQ,EAAG,CAC3B,MAAO,GACP,KAAM,QACN,MAAOxK,EAAeH,EAAMsC,CAAE,EAAE,GAAG,WAAY,KAAK,CAAC,EACrD,QAAS6H,EACzB,EAAiB,CACD,QAAS3J,EAAQ,IAAM,CACrBoK,GAAgB9J,GAAgBd,EAAM0G,CAAC,EAAE,wBAAwB,CAAC,EAAG,CAAC,CACxF,CAAiB,EACD,EAAG,CACnB,EAAiB,EAAG,CAAC,OAAO,CAAC,CAChB,EAAE,CAAC,CAChB,CAAW,GAAI,CACH,CAAC1G,EAAM6K,EAAY,EAAGd,EAAI,CACtC,CAAW,CACX,CAAS,EACD,QAASvJ,EAAQ,IAAM,CACrBH,EAAmB,MAAO,CACxB,GAAIL,EAAM4I,CAAQ,EAClB,MAAOzI,EAAeH,EAAMwJ,EAAM,CAAC,EACnC,KAAM,SACN,aAAcxJ,EAAMsJ,CAAe,EACnC,kBAAmBtJ,EAAMuJ,EAAoB,EAC7C,mBAAoBvJ,EAAM0G,CAAC,EAAE,6BAA8B,CAAE,MAAOhH,EAAK,YAAc,GAAI,EAC3F,SAAUA,EAAK,SACf,UAAWgL,GAAST,GAAe,CAAC,OAAO,CAAC,CACxD,EAAa,CACDjK,EAAM2I,CAAa,GAAK9I,EAAS,EAAIC,EAAmB,MAAO,CAC7D,IAAK,EACL,MAAOK,EAAeH,EAAMsC,CAAE,EAAE,GAAG,SAAU,MAAM,CAAC,CACrD,EAAE,KAAM,CAAC,GAAKrC,EAAmB,OAAQ,EAAI,EAC9CI,EAAmB,MAAO,CACxB,MAAOF,EAAeH,EAAMsC,CAAE,EAAE,GAAG,SAAU,SAAS,CAAC,EACvD,QAAS2H,EACvB,EAAe,CACD5J,EAAmB,OAAQ,CACzB,MAAOF,EAAe,CAACH,EAAMsC,CAAE,EAAE,GAAG,SAAU,OAAO,EAAGtC,EAAMsC,CAAE,EAAE,GAAG,QAAS5C,EAAK,SAAS,CAAC,CAAC,CAC9G,EAAiB,CACDW,EAAmB,OAAQ,CACzB,MAAOF,EAAeH,EAAMsC,CAAE,EAAE,GAAG,SAAU,aAAa,CAAC,EAC3D,MAAOvB,GAAe,CACpB,gBAAiBf,EAAMoJ,CAAc,CACzD,CAAmB,CACnB,EAAmB,CACDxJ,GAAegB,EAAYZ,EAAMO,EAAM,EAAG,CACxC,MAAOJ,EAAe,CAACH,EAAMsC,CAAE,EAAE,GAAG,SAAU,MAAM,EAAGtC,EAAMsC,CAAE,EAAE,GAAG,iBAAiB,CAAC,CAAC,CAC3G,EAAqB,CACD,QAAS9B,EAAQ,IAAM,CACrBI,EAAYZ,EAAM8K,EAAS,CAAC,CAClD,CAAqB,EACD,EAAG,CACvB,EAAqB,EAAG,CAAC,OAAO,CAAC,EAAG,CAChB,CAAC9J,GAAOtB,EAAK,YAAcwJ,EAAe,KAAK,CACnE,CAAmB,EACD,CAACxJ,EAAK,YAAc,CAACwJ,EAAe,OAASrJ,EAAS,EAAIS,EAAYN,EAAMO,EAAM,EAAG,CACnF,IAAK,EACL,MAAOJ,EAAe,CAACH,EAAMsC,CAAE,EAAE,GAAG,SAAU,OAAO,EAAGtC,EAAMsC,CAAE,EAAE,GAAG,YAAY,CAAC,CAAC,CACvG,EAAqB,CACD,QAAS9B,EAAQ,IAAM,CACrBI,EAAYZ,EAAM+K,EAAK,CAAC,CAC9C,CAAqB,EACD,EAAG,CACvB,EAAqB,EAAG,CAAC,OAAO,CAAC,GAAK9K,EAAmB,OAAQ,EAAI,CACpD,EAAE,CAAC,CACL,EAAE,CAAC,CACL,EAAE,CAAC,CAChB,EAAa,GAAIrG,EAAU,CAC3B,CAAS,EACD,EAAG,CACJ,EAAE,EAAG,CAAC,UAAW,eAAgB,YAAY,CAAC,EAElD,CACH,CAAC,EACD,IAAIoR,GAA8B9J,GAAYjH,GAAW,CAAC,CAAC,SAAU,mGAAmG,CAAC,CAAC,ECtU1K,MAAMgR,GAAgB7J,GAAY4J,EAAW,ECFvCE,GAAe/R,GAAW,CAC9B,UAAW,CACT,KAAM,OACN,OAAQ,CAAC,aAAc,UAAU,EACjC,QAAS,YACV,EACD,gBAAiB,CACf,KAAM,OACN,OAAQ,CAAC,OAAQ,SAAU,OAAO,EAClC,QAAS,QACV,EACD,YAAa,CACX,KAAME,GAAe,MAAM,EAC3B,QAAS,OACV,CACH,CAAC,ECZKU,GAAcC,EAAgB,CAClC,KAAM,WACR,CAAC,EACKC,GAA4BD,EAAgB,CAChD,GAAGD,GACH,MAAOmR,GACP,MAAMhR,EAAS,CACb,MAAM9K,EAAQ8K,EACRoI,EAAKzG,GAAa,SAAS,EAC3BsP,EAAevU,EAAS,IACrB0L,EAAG,OAAO,CACf,eAAgBlT,EAAM,WAC9B,CAAO,CACF,EACD,MAAO,CAACsQ,EAAMC,KACLE,EAAS,EAAIC,EAAmB,MAAO,CAC5C,MAAOK,EAAe,CAACH,EAAMsC,CAAE,EAAE,EAAC,EAAItC,EAAMsC,CAAE,EAAE,EAAE5C,EAAK,SAAS,CAAC,CAAC,EAClE,MAAOqB,GAAef,EAAMmL,CAAY,CAAC,EACzC,KAAM,WACd,EAAS,CACDzL,EAAK,OAAO,SAAWA,EAAK,YAAc,YAAcG,EAAS,EAAIC,EAAmB,MAAO,CAC7F,IAAK,EACL,MAAOK,EAAe,CAACH,EAAMsC,CAAE,EAAE,EAAE,MAAM,EAAGtC,EAAMsC,CAAE,EAAE,GAAG5C,EAAK,eAAe,CAAC,CAAC,CACzF,EAAW,CACDU,GAAWV,EAAK,OAAQ,SAAS,CAClC,EAAE,CAAC,GAAKO,EAAmB,OAAQ,EAAI,CACzC,EAAE,CAAC,EAEP,CACH,CAAC,EACD,IAAImL,GAA0BlK,GAAYjH,GAAW,CAAC,CAAC,SAAU,yFAAyF,CAAC,CAAC,EC/B5J,MAAMoR,GAAYjK,GAAYgK,EAAO,ECO9B,MAAME,WAAiBC,EAAa,CAUzC,YAAYC,EAA+B/J,EAAkB,CACrD,QATR,KAAQ,EAAI,EACZ,KAAQ,EAAI,EACZ,KAAQ,EAAI,GACZ,KAAQ,EAAI,GACZ,KAAQ,UAAY,UACpB,KAAQ,YAAc,OAKpB,KAAK,IAAM+J,EACX,KAAK,gBAAgB/J,CAAO,CAC9B,CAEQ,gBAAgBA,EAAS,CAC3BA,EAAQ,IAAG,KAAK,EAAIA,EAAQ,GAC5BA,EAAQ,IAAG,KAAK,EAAIA,EAAQ,GAC5BA,EAAQ,IAAG,KAAK,EAAIA,EAAQ,GAC5BA,EAAQ,IAAG,KAAK,EAAIA,EAAQ,GAC5BA,EAAQ,YAAW,KAAK,UAAYA,EAAQ,WAC5CA,EAAQ,cAAa,KAAK,YAAcA,EAAQ,aAChDA,EAAQ,aAAY,KAAK,WAAaA,EAAQ,WACpD,CAEO,MAAO,CACN,KAAA,CACJ,IAAA+J,EACA,EAAAC,EAAG,EAAAC,EACH,EAAAC,EAAG,EAAAzF,EACH,UAAA0F,EAAW,YAAAC,CACT,EAAA,KACJL,EAAI,KAAK,EACTA,EAAI,UAAYI,EAChBJ,EAAI,YAAcK,EAClBL,EAAI,UAAY,EAChBA,EAAI,UAAU,EACVA,EAAA,IAAIC,EAAIE,EAAI,EAAGD,EAAI,EAAGC,EAAI,EAAG,EAAG,KAAK,GAAI,EAAI,EACjDH,EAAI,OAAO,EACXA,EAAI,gBAAgBC,EAAGC,EAAGC,EAAGzF,EAAG,EAAG,EAAG,EAAG,EAAG,GAAM,GAAM,GAAO,EAAK,EACpEsF,EAAI,QAAQ,CACd,CAEO,cAAcM,EAAeC,EAAU,GAAO,OACnD,KAAM,CAAE,EAAAN,EAAG,EAAAC,EAAG,EAAAC,EAAG,EAAAzF,GAAM,KACjB,CACJ,EAAG8F,EAAI,EAAGC,CACR,EAAAH,EACEI,EAAQ,KAAK,cAAc,CAC/B,GAAI,CAAE,EAAAT,EAAM,EAAAC,CAAK,EACjB,GAAI,CAAE,EAAGD,EAAIE,EAAG,EAAAD,CAAK,EACrB,GAAI,CAAE,EAAAD,EAAM,EAAGC,EAAIxF,CAAE,EACrB,GAAI,CAAE,EAAGuF,EAAIE,EAAG,EAAGD,EAAIxF,CAAE,CAAA,CAC1B,EAGKiG,EAAa,GADH,KAAK,gBAAgBH,EAAIC,EAAIC,CAAK,EACb,GAErC,OAAIC,GAAcJ,KAAShV,EAAA,KAAK,aAAL,MAAAA,EAAA,YACpBoV,CACT,CACF,CCpEa,MAAAC,GAAW,SAAU3G,EAAK,CAErC,OAAAA,EAAI,SAAW,IAAMA,EAAMA,EAAI,MAAM,EAAG,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,EAAIA,EAAI,MAAM,EAAG,CAAC,GAE5H,OAAS,SAAS,KAAOA,EAAI,MAAM,EAAG,CAAC,CAAC,EAAI,IAAM,SAAS,KAAOA,EAAI,MAAM,EAAG,CAAC,CAAC,EAAI,IAAM,SAAS,KAAOA,EAAI,MAAM,EAAG,CAAC,CAAC,EAAI,GACvI,EASa4G,GAAe,SAAUnF,EAAO,CAE3C,MAAMoF,GADSpF,EAAM,SAAS,KAAK,EAAIA,EAAQkF,GAASlF,CAAK,GACvC,QAAQ,mBAAoB,EAAE,EAAE,MAAM,GAAG,EAE/D,MACE,MAAQoF,EAAO,CAAC,EAChB,KAAQA,EAAO,CAAC,EAChB,KAAQA,EAAO,CAAC,EAChB,IAAM,CAEV,ECRO,MAAMC,WAAkBhB,EAAa,CAoC1C,YAAYC,EAA+BtU,EAAkB,CACrD,QAnCR,KAAO,MAAQ,IACf,KAAO,OAAS,GAChB,KAAO,YAAc,GACrB,KAAQ,SAAW,GACnB,KAAQ,QAAU,GAElB,KAAQ,WAAa,GACrB,KAAQ,YAAc,EACtB,KAAQ,kBAAoB,GAE5B,KAAO,EAAI,EACX,KAAO,EAAI,EAKX,KAAO,WAA0B,GACjC,KAAO,kBAAiC,GACxC,KAAO,qBAAoC,GAC3C,KAAQ,YAAc,GAEtB,KAAQ,YAAc,UACtB,KAAQ,UAAY,UACpB,KAAQ,QAAU,UAClB,KAAQ,WAAa,UACrB,KAAQ,eAAiB,CACvB,MAAO,OACP,gBAAiB,SAAA,EAGnB,KAAQ,gBAAkB,GAC1B,KAAQ,eAAiB,GACzB,KAAQ,aAAe,GAIrB,KAAK,IAAMsU,EACX,KAAK,cAActU,CAAK,CAC1B,CAEQ,gBAAgBA,EAAkB,CACxC,GAAI,CAACA,EAAO,OAEN,KAAA,CACJ,EAAAuU,EACA,EAAAC,EACA,MAAAlO,EACA,OAAA3E,EACA,GAAA2T,EACA,OAAAC,EACA,OAAAC,EACA,KAAAhP,EACA,WAAAiP,EACA,IAAAC,EAAK,IAAAC,EACL,gBAAAC,EACA,eAAAC,EACA,aAAAC,CACE,EAAA9V,EAEA6B,EAAS0S,CAAC,IAAG,KAAK,EAAIA,GACtB1S,EAAS2S,CAAC,IAAG,KAAK,EAAIA,GACtBc,IAAI,KAAK,GAAKA,GACdC,IAAQ,KAAK,OAASA,GACtBC,IAAQ,KAAK,OAASA,GACtB3T,EAASyE,CAAK,IAAG,KAAK,MAAQA,GAC9BzE,EAASF,CAAM,IAAG,KAAK,OAASA,GAChC6E,IAAM,KAAK,KAAOA,GAClBiP,IACF,KAAK,WAAaA,EAClB,KAAK,oBAAoB,GAEvBC,IAAK,KAAK,QAAUA,GACpBC,IAAK,KAAK,YAAcA,GACxBI,GAAUH,CAAe,IAAG,KAAK,gBAAkBA,GACnDG,GAAUF,CAAc,IAAG,KAAK,eAAiBA,GACjDE,GAAUD,CAAY,IAAG,KAAK,aAAeA,EACnD,CAEO,cAAc9V,EAAkB,CACrC,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEO,cAAc4U,EAAgBC,EAAU,GAAO,CAC9C,KAAA,CACJ,EAAGC,EAAI,EAAGC,CACR,EAAAH,EACE,CAAE,EAAAL,EAAG,EAAAC,EAAG,MAAOC,EAAG,OAAQzF,EAAG,WAAAgH,EAAY,YAAAC,EAAa,WAAAR,CAAA,EAAe,KAGrES,EAAe,KAAK,cAAc,CACtC,GAAI,CAAE,EAAA3B,EAAG,EAAAC,CAAK,EACd,GAAI,CAAE,EAAGD,EAAIE,EAAG,EAAAD,CAAK,EACrB,GAAI,CAAE,EAAAD,EAAG,EAAGC,EAAIxF,CAAE,EAClB,GAAI,CAAE,EAAGuF,EAAIE,EAAG,EAAGD,EAAIxF,CAAE,CAAA,CAC1B,EAGD,MADuB,GADH,KAAK,gBAAgB8F,EAAIC,EAAImB,CAAY,EAChB,EAS/C,CAEO,KAAKlW,EAAmB,CAC7B,KAAK,cAAcA,CAAK,EAExB,KAAK,cAAc,EACnB,KAAK,UAAU,EACf,KAAK,SAAS,CAChB,CAEQ,eAAgB,CAChB,KAAA,CACJ,IAAAsU,EACA,EAAAC,EAAG,EAAAC,EACH,MAAOC,EAAG,OAAQzF,EAClB,OAAAuG,EAAQ,OAAAC,EAAQ,KAAAhP,EAChB,WAAAiP,EACA,QAAAU,EAAS,YAAAC,EAAa,UAAAC,EACtB,gBAAAT,EAAiB,eAAAC,CACf,EAAA,KAMJ,GAJAvB,EAAI,KAAK,EACTA,EAAI,YAAc8B,EAClB9B,EAAI,UAAY6B,EAEZ,CAAC,YAAa,WAAW,EAAE,SAAS3P,CAAI,EAC1C8N,EAAI,UAAU,EACdA,EAAI,IAAIC,EAAIE,EAAI,EAAGD,EAAIC,EAAI,EAAGA,EAAI,EAAG,EAAG,KAAK,GAAI,EAAI,EACrDH,EAAI,UAAU,EACdA,EAAI,KAAK,EACTA,EAAI,OAAO,EAEP9N,IAAS,cACX8N,EAAI,OAAOC,EAAI,GAAIC,EAAI,CAAC,EACxBF,EAAI,OAAOC,EAAIE,EAAI,GAAID,EAAIxF,EAAI,CAAC,EAChCsF,EAAI,OAAOC,EAAIE,EAAI,GAAID,EAAI,CAAC,EAC5BF,EAAI,OAAOC,EAAI,GAAIC,EAAIxF,EAAI,CAAC,EAC5BsF,EAAI,OAAO,OAIV,CACG,MAAAgC,EAAaV,EAAkB,EAAI,EACzCtB,EAAI,gBAAgBC,EAAGC,EAAGC,EAAGzF,EAAGsH,EAAYA,EAAYA,EAAYA,EAAY,GAAM,GAAMT,EAAgB,EAAI,EASlHvB,EAAI,QAAQ,CACd,CAEQ,aAAaiC,EAA0DhC,EAAWC,EAAW,CAC7F,MAAAgC,EAAgBD,GAAA,YAAAA,EAAU,oBAC5B,IAAAE,EASJ,GARID,KAAiBE,GACbD,EAAAE,GAAS,IAAI,MAAM,EAChBH,KAAiBI,GAEpBH,EAAAE,GAAS,IAAI,QAAQ,EAClBH,KAAiBK,KACpBJ,EAAAE,GAAS,IAAI,QAAQ,GAEzB,CAACF,EAAY,MAAA,GACX,KAAA,CAAE,IAAAnC,CAAQ,EAAA,KAChBA,EAAI,UAAUmC,EAAKlC,EAAI,EAAGC,EAAI,CAAC,CACjC,CAEQ,WAAY,CACZ,KAAA,CACJ,IAAAF,EACA,UAAA+B,EACA,OAAAd,EACA,MAAAjP,EAAO,EAAAiO,EAAG,EAAAC,EAAG,YAAAyB,EACb,SAAAa,CACE,EAAA,KAEJxC,EAAI,KAAK,EAETA,EAAI,KAAO,GAAGwC,MAEdxC,EAAI,UAAY+B,EAEhB/B,EAAI,UAAY,OAEhBA,EAAI,aAAe,MACfA,EAAA,SAASA,EAAI,cAAciB,EAAQjP,EAAQ,EAAE,EAAGiO,EAAGC,EAAIyB,CAAW,EACtE3B,EAAI,QAAQ,CACd,CAEQ,UAAY,CACZ,KAAA,CACJ,IAAAA,EACA,EAAAC,EAAG,EAAAC,EACH,QAASkB,EACT,SAAAoB,EAAU,QAAAC,EAAS,WAAAf,EACnB,kBAAAgB,EAAmB,qBAAAC,CACjB,EAAA,KAEJ3C,EAAI,KAAK,EAETA,EAAI,KAAO,GAAGwC,MAEdxC,EAAI,UAAYa,GAAaO,CAAG,EAAI,OAAS,OAE7CpB,EAAI,UAAY,OAEhBA,EAAI,aAAe,MAEnB,MAAM4C,EAAOH,EAAUxC,EACnB,IAAA4C,EAAO3C,EAAIuC,EAAUf,EAGzB,QAAS5G,EAAI,EAAGA,EAAI4H,EAAkB,OAAQ5H,IAAK,CAC3C,MAAAuB,EAAOqG,EAAkB5H,CAAC,EAChC+H,EAAO,KAAK,YAAYxG,EAAMuG,EAAMC,CAAI,EAInCA,EAAA,KAAK,cAAcA,CAAI,EAG9B,QAAS/H,EAAI,EAAGA,EAAI6H,EAAqB,OAAQ7H,IAAK,CAC9C,MAAAuB,EAAOsG,EAAqB7H,CAAC,EACnC+H,EAAO,KAAK,YAAYxG,EAAMuG,EAAMC,CAAI,EAG1C7C,EAAI,QAAQ,CACd,CAEQ,YAAY8C,EAAUF,EAAMC,EAAM,OAClC,KAAA,CACJ,IAAA7C,EACA,WAAA0B,EAAY,QAAAe,EAAS,SAAAD,EACrB,EAAAvC,EAAG,EAAAC,EAAG,MAAOC,EAAG,OAAQ,CACtB,EAAA,KAKA,GAHI0C,GAAAnB,EAGJmB,EAAO,GAAK,EAAI3C,EAAG,OAMjB,MAAA6C,EAAUD,EAAS,WAAa,OAAS,GACzCE,EAAYhD,EAAI,cAAc8C,EAAS,SAAWC,EAAS5C,GAAKyC,EAAO3C,GAAKwC,CAAO,EAErFzC,EAAA,SAASgD,EAAWJ,EAAMC,CAAI,EAYlC,MAAMI,EAAYL,EAAO5C,EAAI,YAAYgD,CAAS,EAAE,MAG9C,GAFN,KAAK,UAAUF,EAAS,MAAOG,EAAWJ,CAAI,GAExCtX,EAAAuX,EAAS,WAAT,MAAAvX,EAAmB,OAAQ,CAE7B,MAAM2X,EAAW,KAAK,YAAY,SAASJ,CAAQ,EAG9C,KAAA,oBAAoB,KAAK,KAAM,CAClC,EAAGF,EACH,EAAGC,EACH,KAAML,EACN,OAAQU,CAAA,CACT,EAGDA,GAAYJ,EAAS,SAAS,QAAQA,GAAY,CAChDD,EAAO,KAAK,YAAYC,EAAUF,EAAO,GAAIC,CAAI,CAAA,CAClD,EAGE,OAAAA,CACT,CAEQ,UAAUM,EAAQ,GAAIC,EAAgBC,EAAgB,CAC5D,KAAM,CAAE,SAAAb,EAAU,EAAAvC,EAAG,MAAAjO,EAAO,QAAAyQ,GAAY,KACxC,QAAS3H,EAAI,EAAGA,EAAIqI,EAAM,OAAQrI,IAAK,CAC/B,MAAAwI,EAAOH,EAAMrI,CAAC,EACdyI,EAAQH,EAASZ,EAAW,GAAM1H,GAAK0H,EAAW,KAExD,GAAIe,EAAQf,EAAW,EAAI,EAAIvC,EAAIjO,EAAQyQ,EAAS,OAC/C,KAAA,SAASa,EAAMC,EAAOF,CAAM,EAErC,CAEQ,SAASC,EAAMF,EAAgBC,EAAgB,CAC/C,KAAA,CACJ,IAAArD,EACA,WAAA0B,EACA,SAAAc,CACE,EAAA,KAEJxC,EAAI,KAAK,EAITA,EAAI,UAAU,EACVA,EAAA,YAAcsD,EAAK,KAAO,UAC1BtD,EAAA,UAAYsD,EAAK,KAAO,UAC5BtD,EAAI,IAAIoD,EAAQC,EAAS,KAAK,MAAM3B,EAAa,CAAC,EAAI,EAAGc,EAAW,EAAG,EAAG,EAAI,KAAK,EAAE,EACrFxC,EAAI,KAAK,EACTA,EAAI,OAAO,EAKPA,EAAA,UAAYsD,EAAK,OAAS,UAC9BtD,EAAI,KAAO,GAAG,KAAK,KAAKwC,EAAW,GAAG,YAEtCxC,EAAI,UAAY,SACZA,EAAA,SAASsD,EAAK,KAAMF,EAAQC,GAAU3B,EAAac,GAAY,EAAI,CAAC,EACxExC,EAAI,QAAQ,CACd,CAEQ,cAAc6C,EAAM,CACpB,KAAA,CACJ,IAAA7C,EACA,kBAAA0C,EACA,WAAAhB,EACA,EAAAzB,EAAG,EAAAC,EAAG,MAAOC,EAAG,OAAQzF,CACtB,EAAA,KACK,OAAAmI,IAAAH,EAAkB,OAAS,EAAI,GAAKhB,EAE7C1B,EAAI,KAAK,EACL6C,EAAOnI,EAAIwF,IACbF,EAAI,UAAU,EACdA,EAAI,YAAc,OAClBA,EAAI,OAAOC,EAAI,GAAK4C,EAAOnB,EAAa,EAAI,EAAG,EAC/C1B,EAAI,OAAOC,EAAIE,EAAI,GAAK0C,EAAOnB,EAAa,EAAI,EAAG,EACnD1B,EAAI,OAAO,GAEbA,EAAI,QAAQ,EACL6C,CACT,CAEQ,oBAAqB,CAAE,EAAA5C,EAAG,EAAAC,EAAG,KAAAsD,EAAM,OAAAC,GAAU,CAC7C,KAAA,CAAC,IAAAzD,CAAO,EAAA,KAEdA,EAAI,KAAK,EACTA,EAAI,UAAU,EACdA,EAAI,UAAUC,EAAI,EAAGC,EAAIsD,EAAO,CAAC,EACjCC,GAAUzD,EAAI,OAAO,GAAK,KAAK,GAAK,GAAG,EACnCA,EAAA,OAAO,GAAI,EAAE,EACbA,EAAA,OAAO,GAAI,CAAC,EACZA,EAAA,OAAO,EAAG,CAAC,EACfA,EAAI,KAAK,EACTA,EAAI,QAAQ,CACd,CAEQ,cAAc,CAAE,SAAA8C,EAAU,UAAAE,EAAW,KAAAJ,EAAM,KAAAC,EAAM,UAAAa,EAAW,YAAAC,GAAe,SAG3E,KAAA,CACJ,IAAA3D,EACA,eAAA4D,CACE,EAAA,KACEC,GAAmBtY,EAAAuX,GAAA,YAAAA,EAAU,WAAV,MAAAvX,EAAoB,OAASqX,EAAOA,EAAOe,EAAc,EAC5EG,GAAkBhF,EAAAgE,GAAA,YAAAA,EAAU,WAAV,MAAAhE,EAAoB,OAAS4E,EAAYC,EAAc,EAAID,EAEnF1D,EAAI,KAAK,EACTA,EAAI,UAAY4D,EAAe,gBAC/B5D,EAAI,SAAS6D,EAAkBhB,EAAO,EAAGiB,EAAiB,EAAE,EAE5D9D,EAAI,UAAY4D,EAAe,MAC3B5D,EAAA,SAASgD,EAAWJ,EAAMC,CAAI,EAElC7C,EAAI,QAAQ,CACd,CAGQ,qBAAuB,CAC7B,KAAK,kBAAoB,GACzB,KAAK,qBAAuB,GAE5B,KAAM,CAAE,WAAAmB,EAAY,kBAAAuB,EAAmB,qBAAAC,CAAA,EAAyB,KAChE,QAAS7H,EAAI,EAAGA,EAAIqG,EAAW,OAAQrG,IAAK,CACpC,MAAAuB,EAAO8E,EAAWrG,CAAC,EACzBuB,EAAK,WAAaqG,EAAkB,KAAKrG,CAAI,EAAIsG,EAAqB,KAAKtG,CAAI,EAEnF,CAEQ,iBAAkB,CAClB,KAAA,CACJ,EAAA4D,EAAG,EAAAC,EACH,MAAAlO,EAAO,OAAA3E,CACL,EAAA,KAEJ,KAAK,YAAc,CACjB,CAAC4S,EAAGC,CAAC,EACL,CAACD,EAAIjO,EAAOkO,CAAC,EACb,CAACD,EAAGC,EAAI7S,CAAM,EACd,CAAC4S,EAAIjO,EAAOkO,EAAI7S,CAAM,CAAA,CAE1B,CACF,CChaO,MAAM0W,WAAiBhE,EAAa,CAoCzC,YAAYC,EAA+BtU,EAAkB,CACrD,QAnCR,KAAO,MAAQ,IACf,KAAO,OAAS,GAChB,KAAO,YAAc,GACrB,KAAQ,SAAW,GACnB,KAAQ,QAAU,GAElB,KAAQ,WAAa,GACrB,KAAQ,YAAc,EACtB,KAAQ,kBAAoB,GAE5B,KAAO,EAAI,EACX,KAAO,EAAI,EAKX,KAAO,WAA0B,GACjC,KAAO,kBAAiC,GACxC,KAAO,qBAAoC,GAC3C,KAAQ,YAAc,GAEtB,KAAQ,YAAc,UACtB,KAAQ,UAAY,UAEpB,KAAQ,WAAa,UACrB,KAAQ,eAAiB,CACvB,MAAO,OACP,gBAAiB,SAAA,EAGnB,KAAQ,gBAAkB,GAC1B,KAAQ,eAAiB,GACzB,KAAQ,aAAe,GAIrB,KAAK,IAAMsU,EACX,KAAK,gBAAgBtU,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEQ,gBAAgBA,EAAkB,CACxC,GAAI,CAACA,EAAO,OAEN,KAAA,CACJ,EAAAuU,EACA,EAAAC,EACA,MAAAlO,EACA,OAAA3E,EACA,GAAA2T,EACA,OAAAC,EACA,OAAAC,EACA,KAAAhP,EACA,WAAAiP,EACA,IAAAC,EAAK,IAAAC,EACL,gBAAAC,EACA,eAAAC,EACA,aAAAC,CACE,EAAA9V,EAEA6B,EAAS0S,CAAC,IAAG,KAAK,EAAIA,GACtB1S,EAAS2S,CAAC,IAAG,KAAK,EAAIA,GACtBc,IAAI,KAAK,GAAKA,GACdC,IAAQ,KAAK,OAASA,GACtBC,IAAQ,KAAK,OAASA,GACtB3T,EAASyE,CAAK,IAAG,KAAK,MAAQA,GAC9BzE,EAASF,CAAM,IAAG,KAAK,OAASA,GAChC6E,IAAM,KAAK,KAAOA,GAClBkP,IAAK,KAAK,QAAUA,GACpBC,IAAK,KAAK,YAAcA,GACxBI,GAAUH,CAAe,IAAG,KAAK,gBAAkBA,GACnDG,GAAUF,CAAc,IAAG,KAAK,eAAiBA,GACjDE,GAAUD,CAAY,IAAG,KAAK,aAAeA,EACnD,CAEO,cAAc9V,EAAkB,CACrC,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEO,cAAc4U,EAAgBC,EAAU,GAAO,CAC9C,KAAA,CACJ,EAAGC,EAAI,EAAGC,CACR,EAAAH,EACE,CAAE,EAAAL,EAAG,EAAAC,EAAG,MAAOC,EAAG,OAAQzF,EAAG,WAAAgH,EAAY,YAAAC,EAAa,WAAAR,CAAA,EAAe,KAGrES,EAAe,KAAK,cAAc,CACtC,GAAI,CAAE,EAAA3B,EAAG,EAAAC,CAAK,EACd,GAAI,CAAE,EAAGD,EAAIE,EAAG,EAAAD,CAAK,EACrB,GAAI,CAAE,EAAAD,EAAG,EAAGC,EAAIxF,CAAE,EAClB,GAAI,CAAE,EAAGuF,EAAIE,EAAG,EAAGD,EAAIxF,CAAE,CAAA,CAC1B,EAGD,MADuB,GADH,KAAK,gBAAgB8F,EAAIC,EAAImB,CAAY,EAChB,EAS/C,CAEO,KAAKlW,EAAmB,CAC7B,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,SAAS,CAChB,CAEQ,UAAW,CACX,KAAA,CACJ,IAAAsU,EACA,EAAAC,EAAG,EAAAC,EACH,MAAOC,EAAG,OAAQzF,EAClB,OAAAuG,EAAQ,OAAAC,EAAQ,KAAAhP,EAChB,WAAAiP,EACA,QAAAU,EAAS,YAAAC,EAAa,UAAAC,EACtB,gBAAAT,EAAiB,eAAAC,CACf,EAAA,KAEJvB,EAAI,KAAK,EACTA,EAAI,UAAY,IAChBA,EAAI,YAAc8B,GAAe,UACjC9B,EAAI,UAAY6B,GAAW,UAC3B7B,EAAI,gBAAgBC,EAAGC,EAAGC,EAAGzF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAAmH,EAAwB,GAAM,GAAO,EAAK,EACtF7B,EAAI,QAAQ,CAOd,CAGQ,YAAY8C,EAAUF,EAAMC,EAAM,CAClC,KAAA,CACJ,IAAA7C,EACA,WAAA0B,EAAY,QAAAe,EAAS,SAAAD,EACrB,EAAAvC,EAAG,EAAAC,EAAG,MAAOC,EAAG,OAAQ,CACtB,EAAA,KAKA,GAHI0C,GAAAnB,EAGJ,EAAAmB,EAAO,GAAK,EAAI3C,GAOb,OAAA2C,CACT,CAKQ,iBAAkB,CAClB,KAAA,CACJ,EAAA5C,EAAG,EAAAC,EACH,MAAAlO,EAAO,OAAA3E,CACL,EAAA,KAEJ,KAAK,YAAc,CACjB,CAAC4S,EAAGC,CAAC,EACL,CAACD,EAAIjO,EAAOkO,CAAC,EACb,CAACD,EAAGC,EAAI7S,CAAM,EACd,CAAC4S,EAAIjO,EAAOkO,EAAI7S,CAAM,CAAA,CAE1B,CACF,CCxLO,MAAM2W,GAAwB,CACnCC,EACAC,EACAC,EAAY,IACS,CACf,KAAA,CAAE,EAAAlE,EAAG,EAAAC,CAAM,EAAA+D,EACXG,EAAaD,GAAa,EAC1BE,EAAaF,GAAa,EAChC,QAASrJ,EAAI,EAAGA,EAAIoJ,EAAS,OAAS,EAAGpJ,IAAK,CACtC,MAAAwJ,EAAKJ,EAASpJ,CAAC,EACfyJ,EAAKL,EAASpJ,EAAI,CAAC,EACnB0J,EAAIF,EAAG,EAAIC,EAAG,EACd9M,EAAI8M,EAAG,EAAID,EAAG,EACdG,EAAIH,EAAG,EAAIC,EAAG,EAAIA,EAAG,EAAID,EAAG,EAElC,GADiB,KAAK,IAAIE,EAAIvE,EAAIxI,EAAIyI,EAAIuE,CAAC,EAAI,KAAK,KAAKD,EAAIA,EAAI/M,EAAIA,CAAC,GAExD2M,GACXnE,GAAK,KAAK,IAAIqE,EAAG,EAAGC,EAAG,CAAC,EAAIH,GAAcnE,GAAK,KAAK,IAAIqE,EAAG,EAAGC,EAAG,CAAC,EAAIH,GACtElE,GAAK,KAAK,IAAIoE,EAAG,EAAGC,EAAG,CAAC,EAAIF,GAAcnE,GAAK,KAAK,IAAIoE,EAAG,EAAGC,EAAG,CAAC,EAAIF,EAEhE,OAAAvJ,EAGJ,MAAA,EACT,ECRO,MAAM4J,WAAkB3E,EAAa,CAY1C,YAAYC,EAA+BtU,EAAkB,CACrD,QANR,KAAO,IAAc,GAErB,KAAO,UAAY,EACnB,KAAQ,YAAc,UAIpB,KAAK,IAAMsU,EACX,KAAK,gBAAgBtU,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEQ,gBAAgBA,EAAO,CAC7B,GAAI,CAACA,EAAO,OAEN,KAAA,CACJ,IAAAiZ,EACA,KAAAzS,EACA,KAAA0S,EACA,GAAAC,EACA,GAAA7D,EACA,UAAA8D,EACA,aAAAC,EACA,YAAA1E,CACE,EAAA3U,EAEAsV,IAAI,KAAK,GAAKA,GACd4D,IAAM,KAAK,KAAOA,GAClBC,IAAI,KAAK,GAAKA,GACdF,IAAK,KAAK,IAAMA,GAChBzS,IAAM,KAAK,KAAOA,GAClB6S,IAAc,KAAK,aAAeA,GAClCD,IAAW,KAAK,UAAYA,GAC5BzE,IAAa,KAAK,YAAcA,EACtC,CAEO,cAAc3U,EAAkB,CACrC,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEO,KAAKA,EAAmB,CAC7B,KAAK,gBAAgBA,CAAK,EAE1B,KAAK,SAAS,EACd,KAAK,SAAS,EACd,KAAK,SAAS,CAChB,CAEO,cAAc4U,EAAgBC,EAAkB,CAC/C,KAAA,CACJ,IAAAoE,CACE,EAAA,KAIG,OAFUpX,EAASyW,GAAsB1D,EAAGqE,EAAK,CAAC,CAAC,CAG5D,CAEO,cAAerE,EAAG,CACvB,OAAO0D,GAAsB1D,EAAG,KAAK,IAAK,CAAC,CAC7C,CAEQ,UAAW,CACX,KAAA,CACJ,IAAAN,EACA,YAAAK,EAAa,UAAAyE,EACb,KAAA5S,EAAM,IAAAyS,CACJ,EAAA,KAEJ3E,EAAI,KAAK,EAETA,EAAI,YAAcK,EAClBL,EAAI,UAAY8E,EAGZ5S,IAAS,cAAqB8N,EAAI,YAAY,CAAC,EAAG,CAAC,CAAC,EAEpD2E,EAAA,QAAQ,CAACK,EAAWC,IAAa,CAC/BA,IAAa,GACfjF,EAAI,UAAU,EACdA,EAAI,OAAOgF,EAAU,EAAGA,EAAU,CAAC,GAEnChF,EAAI,OAAOgF,EAAU,EAAGA,EAAU,CAAC,CACrC,CACD,EAEDhF,EAAI,OAAO,EACXA,EAAI,QAAQ,CACd,CAEQ,UAAW,CACX,KAAA,CACJ,IAAAA,EACA,IAAA2E,EACA,YAAAtE,EAAa,UAAAyE,EACb,aAAAC,CACE,EAAA,KACE5E,EAAI,GAAI+E,EAASP,EAAI,QAAU,EAErC,GAAI,EAAAO,EAAS,GAUb,IARAlF,EAAI,KAAK,EACTA,EAAI,UAAU,EACdA,EAAI,YAAY,CAAC,EAAG,CAAC,CAAC,EACtBA,EAAI,YAAcK,EAClBL,EAAI,UAAY8E,EAIZH,EAAI,CAAC,EAAE,IAAMA,EAAI,CAAC,EAAE,EAAG,CACzB,MAAMQ,EAAMR,EAAI,CAAC,EAAE,EAAIA,EAAI,CAAC,EAAE,EACxBzE,EAAI,KAAK,IAAIiF,CAAG,EAAI,GAAMA,EAAM,EAAIR,EAAI,CAAC,EAAE,EAAI,EAAIA,EAAI,CAAC,EAAE,EAAI,EAAKQ,EAAM,EAAIR,EAAI,CAAC,EAAE,EAAI,GAAKA,EAAI,CAAC,EAAE,EAAI,GAC9G3E,EAAI,OAAO2E,EAAI,CAAC,EAAE,EAAIxE,EAAI,EAAGD,CAAC,EAC9BF,EAAI,OAAO2E,EAAI,CAAC,EAAE,EAAIxE,EAAI,EAAGD,CAAC,MAG3B,CACH,MAAMiF,EAAMR,EAAI,CAAC,EAAE,EAAIA,EAAI,CAAC,EAAE,EACxB1E,EAAI,KAAK,IAAIkF,CAAG,EAAI,GAAMA,EAAM,EAAIR,EAAI,CAAC,EAAE,EAAI,EAAIA,EAAI,CAAC,EAAE,EAAI,EAAKQ,EAAM,EAAIR,EAAI,CAAC,EAAE,EAAI,GAAKA,EAAI,CAAC,EAAE,EAAI,GAC9G3E,EAAI,OAAOC,EAAG0E,EAAI,CAAC,EAAE,EAAIxE,EAAI,CAAC,EAC9BH,EAAI,OAAOC,EAAG0E,EAAI,CAAC,EAAE,EAAIxE,EAAI,CAAC,EAK5B,GAAAwE,EAAIO,EAAS,CAAC,EAAE,IAAMP,EAAIO,EAAS,CAAC,EAAE,EAAG,CACrC,MAAAC,EAAMR,EAAIO,EAAS,CAAC,EAAE,EAAIP,EAAIO,EAAS,CAAC,EAAE,EAC1ChF,EAAI,KAAK,IAAIiF,CAAG,EAAI,GAAMA,EAAM,EAAIR,EAAIO,EAAS,CAAC,EAAE,EAAI,EAAIP,EAAIO,EAAS,CAAC,EAAE,EAAI,EAAKC,EAAM,EAAIR,EAAIO,EAAS,CAAC,EAAE,EAAI,GAAKP,EAAIO,EAAS,CAAC,EAAE,EAAI,GAYlJ,GAXIlF,EAAA,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,EAAGD,CAAC,EACnCF,EAAA,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,EAAGD,CAAC,EACvCF,EAAI,OAAO,EAEP,CAAC,EAAG,CAAC,EAAE,SAAS+E,CAAY,IAC9B/E,EAAI,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,EAAGwE,EAAIO,EAAS,CAAC,EAAE,CAAC,EACvDlF,EAAI,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAGhF,CAAC,EAC/BF,EAAI,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,EAAGwE,EAAIO,EAAS,CAAC,EAAE,CAAC,EACvDlF,EAAI,OAAO,GAGT,CAAC,EAAG,CAAC,EAAE,SAAS+E,CAAY,EAAG,CACjC/E,EAAI,UAAU,EACd,MAAMoF,EAAOT,EAAIO,EAAS,CAAC,EAAE,EACvBG,EAAOF,EAAM,EAAKjF,EAAIC,EAAI,EAAMD,EAAIC,EAAI,EAC1CH,EAAA,IAAIoF,EAAMC,GAAOlF,EAAI,GAAK,EAAG,EAAG,IAAK,EAAK,EAC9CH,EAAI,UAAY,OAChBA,EAAI,KAAK,EACTA,EAAI,OAAO,OAIV,CACG,MAAAmF,EAAMR,EAAIO,EAAS,CAAC,EAAE,EAAIP,EAAIO,EAAS,CAAC,EAAE,EAC1CjF,EAAI,KAAK,IAAIkF,CAAG,EAAI,GAAMA,EAAM,EAAIR,EAAIO,EAAS,CAAC,EAAE,EAAI,EAAIP,EAAIO,EAAS,CAAC,EAAE,EAAI,EAAKC,EAAM,EAAIR,EAAIO,EAAS,CAAC,EAAE,EAAI,GAAKP,EAAIO,EAAS,CAAC,EAAE,EAAI,GAYlJ,GAXIlF,EAAA,OAAOC,EAAG0E,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,CAAC,EACnCH,EAAA,OAAOC,EAAG0E,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,CAAC,EACvCH,EAAI,OAAO,EAEP,CAAC,EAAG,CAAC,EAAE,SAAS+E,CAAY,IAC9B/E,EAAI,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAGP,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,CAAC,EACvDH,EAAI,OAAOC,EAAG0E,EAAIO,EAAS,CAAC,EAAE,CAAC,EAC/BlF,EAAI,OAAO2E,EAAIO,EAAS,CAAC,EAAE,EAAGP,EAAIO,EAAS,CAAC,EAAE,EAAI/E,EAAI,CAAC,EACvDH,EAAI,OAAO,GAGT,CAAC,EAAG,CAAC,EAAE,SAAS+E,CAAY,EAAG,CACjC/E,EAAI,UAAU,EACd,MAAMoF,EAAOD,EAAM,EAAKlF,EAAIE,EAAI,EAAMF,EAAIE,EAAI,EACxCkF,EAAOV,EAAIO,EAAS,CAAC,EAAE,EACzBlF,EAAA,IAAIoF,EAAMC,GAAOlF,EAAI,GAAK,EAAG,EAAG,IAAK,EAAK,EAC9CH,EAAI,UAAY,OAChBA,EAAI,KAAK,EACTA,EAAI,OAAO,GAIfA,EAAI,QAAQ,EACd,CAEQ,UAAW,CACX,KAAA,CACJ,IAAAA,EACA,IAAA2E,EACA,OAAAW,CACE,EAAA,KAEJ,GAAI,CAACA,EAAQ,OAEb,MAAMC,EAAc,KAAK,MAAMZ,EAAI,OAAS,CAAC,EAAI,EAEjD,IAAI1E,EAAGC,EAAGsF,EAENb,EAAIY,CAAW,EAAE,IAAMZ,EAAIY,EAAc,CAAC,EAAE,GACnCC,EAAA,GACPvF,EAAA,KAAK,IAAI0E,EAAIY,EAAc,CAAC,EAAE,EAAIZ,EAAIY,CAAW,EAAE,CAAC,EAAI,EAAI,KAAK,IAAIZ,EAAIY,EAAc,CAAC,EAAE,EAAGZ,EAAIY,CAAW,EAAE,CAAC,EAC/GrF,EAAAyE,EAAIY,CAAW,EAAE,EAAI,KAIdC,EAAA,GACPvF,EAAA0E,EAAIY,CAAW,EAAE,EAAI,GACzBrF,EAAI,KAAK,IAAIyE,EAAIY,EAAc,CAAC,EAAE,EAAIZ,EAAIY,CAAW,EAAE,CAAC,EAAI,EAAI,KAAK,IAAIZ,EAAIY,EAAc,CAAC,EAAE,EAAGZ,EAAIY,CAAW,EAAE,CAAC,EAAIvF,EAAI,YAAYsF,CAAM,EAAE,MAAQ,GAIzJtF,EAAI,UAAY,SAEhBwF,EAAWxF,EAAI,YAAYsF,EAAQrF,EAAGC,EAAG,GAAI,EAAE,EAAIF,EAAI,SAASsF,EAAQrF,EAAGC,CAAC,CAC9E,CAEQ,iBAAkB,CAClB,KAAA,CACJ,IAAAyE,CACE,EAAA,KACEc,EAAU,CAAA,EAAIC,EAAU,GAC9B,QAAS5K,EAAI,EAAGA,EAAI6J,EAAI,OAAQ7J,IAAK,CAC7B,MAAA6K,EAAKhB,EAAI7J,CAAC,EACR2K,EAAA,KAAKE,EAAG,CAAC,EACTD,EAAA,KAAKC,EAAG,CAAC,EAGnB,KAAK,YAAc,CACjB,CAAC,KAAK,IAAI,GAAGF,CAAO,EAAG,KAAK,IAAI,GAAGC,CAAO,CAAC,EAC3C,CAAC,KAAK,IAAI,GAAGD,CAAO,EAAG,KAAK,IAAI,GAAGC,CAAO,CAAC,CAAA,CAE/C,CACF,CCxPO,MAAME,EAAQ,CAMnB,YAAYC,EAAW,GAAI,CACzB,KAAK,QAAU,GACf,KAAK,aAAe,GACpB,KAAK,SAAWA,EAEhB,KAAK,aAAe,GACtB,CAEO,KAAKC,EAAoC,CAE1C,OAAOA,GAAW,aAEXA,EAAA,CACP,QAFcA,CAEd,GAGCA,EAAO,OAAaA,EAAA,SAAW,MAGpC,KAAK,QAAQ,OAAO,KAAK,aAAe,CAAC,EAgBpC,KAAA,QAAQ,KAAKA,CAAM,EACnB,KAAA,eAED,KAAK,QAAQ,OAAS,KAAK,WACxB,KAAA,QAAQ,OAAO,EAAG,CAAC,EACnB,KAAA,eAET,CAEQ,SAASC,EAAoBC,EAAoB,CAEjD,MAAAC,EADe,OAAOD,EAAW,IAAI,EAAI,OAAOD,EAAW,IAAI,GACjC,KAAK,aACnCG,EAAeH,EAAW,WAAaC,EAAW,SAClDG,EAAkBJ,EAAW,gBAAkBC,EAAW,cAChE,OAAOC,GAAeC,GAAgBC,CACxC,CAEQ,SAAU,CAChB,OAAO,KAAK,cAAgB,CAC9B,CAEQ,SAAU,CAChB,OAAO,KAAK,aAAe,KAAK,QAAQ,OAAS,CACnD,CAEO,MAAO,CACR,GAAA,KAAK,UAAW,CAClB,MAAML,EAAS,KAAK,QAAQ,KAAK,YAAY,EACxC,YAAA,eACEA,EAEF,OAAA,IACT,CAEO,MAAO,CACR,OAAA,KAAK,WACF,KAAA,eACU,KAAK,QAAQ,KAAK,YAAY,GAGxC,IACT,CAEO,OAAQ,CACb,KAAK,QAAU,GACf,KAAK,aAAe,EACtB,CAEO,YAAa,CAClB,OAAO,KAAK,OACd,CAEO,iBAAkB,CACvB,OAAO,KAAK,YACd,CAEO,aAAc,CACnB,OAAO,KAAK,QACd,CAEO,YAAYD,EAAkB,CACnC,KAAK,SAAWA,EACZ,KAAK,QAAQ,OAAS,KAAK,WAC7B,KAAK,QAAQ,OAAO,EAAG,KAAK,QAAQ,OAAS,KAAK,QAAQ,EAC1D,KAAK,cAAgB,KAAK,QAAQ,OAAS,KAAK,SAEpD,CACF,CCxHO,MAAMO,GAAY,CAAC/iB,EAAeoX,EAAM,KAAWjB,EAAM,MAAa,KAAK,IAAI,KAAK,IAAInW,EAAOmW,CAAG,EAAGiB,CAAG,ECcxG,MAAM4L,WAAiBtG,EAAa,CAczC,YAAYC,EAA+BtU,EAAsB,CACzD,QAbR,KAAO,EAAI,EACX,KAAO,EAAI,EACX,KAAO,MAAQ,EACf,KAAO,OAAS,EAChB,KAAO,YAAc,UACrB,KAAO,UAAY,UACnB,KAAO,QAAU,UACjB,KAAO,YAAc,EAOnB,KAAK,IAAMsU,EACX,KAAK,cAActU,CAAK,CAC1B,CAEQ,gBAAgBA,EAAsB,CAC5C,GAAI,CAACA,EAAO,OAEN,KAAA,CACJ,EAAAuU,EAAI,EACJ,EAAAC,EAAI,EACJ,GAAAc,EAGA,YAAAc,EACA,UAAAC,EACA,QAAAF,EACA,YAAAyE,EACA,QAAAC,CACE,EAAA7a,EAEA6B,EAAS0S,CAAC,IAAG,KAAK,EAAIA,GACtB1S,EAAS2S,CAAC,IAAG,KAAK,EAAIA,GAGtBc,IAAI,KAAK,GAAKA,GACdc,IAAa,KAAK,YAAcA,GAChCC,IAAW,KAAK,UAAYA,GAC5BF,IAAS,KAAK,QAAUA,GACxBtU,EAAS+Y,CAAW,IAAG,KAAK,YAAcA,GAC1CC,IAAS,KAAK,QAAUA,EAC9B,CAEO,cAAc7a,EAAsB,CACzC,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEO,cAAc4U,EAAgBC,EAAU,GAAO,CAC9C,KAAA,CACJ,EAAGC,EAAI,EAAGC,CACR,EAAAH,EACE,CAAE,EAAAL,EAAG,EAAAC,EAAG,MAAAlO,EAAO,OAAA3E,GAAW,KAEzB,OAAAmT,GAAMP,GAAKO,GAAMP,EAAIjO,GAASyO,GAAMP,GAAKO,GAAMP,EAAI7S,CAC5D,CAEO,KAAK3B,EAAuB,CACjC,KAAK,cAAcA,CAAK,EAElB,KAAA,CACJ,IAAAsU,EACA,QAAAuG,EACA,EAAAtG,EAAG,EAAAC,EACH,UAAA6B,CACE,EAAA,KACJ/B,EAAI,KAAK,EACTA,EAAI,aAAe,MACnBA,EAAI,UAAY+B,EACZ/B,EAAA,SAASuG,EAAStG,EAAGC,CAAC,EAC1BF,EAAI,QAAQ,CACd,CAEQ,iBAAkB,CAClB,KAAA,CACJ,EAAAC,EAAG,EAAAC,EACH,IAAAF,EACA,QAAAuG,CACE,EAAA,KACEC,EAAcxG,EAAI,YAAYuG,CAAO,EACrCvU,EAAQ,KAAK,MAAQwU,EAAY,MACjCnZ,EAAS,KAAK,OAASmZ,EAAY,wBAA0BA,EAAY,yBAC/E,KAAK,YAAc,CACjB,CAACvG,EAAGC,CAAC,EACL,CAACD,EAAIjO,EAAOkO,CAAC,EACb,CAACD,EAAGC,EAAI7S,CAAM,EACd,CAAC4S,EAAIjO,EAAOkO,EAAI7S,CAAM,CAAA,CAE1B,CACF,CCzFO,MAAMoZ,WAAoB1G,EAAa,CAa5C,YAAYC,EAA+BtU,EAAkB,CACrD,QAZR,KAAO,MAAQ,IACf,KAAO,OAAS,GAChB,KAAO,EAAI,EACX,KAAO,EAAI,EACX,KAAQ,UAAY,EACpB,KAAQ,YAAc,OAEtB,KAAQ,YAAc,EACtB,KAAQ,cAAgB,UACxB,KAAQ,cAAgB,UAItB,KAAK,IAAMsU,EACX,KAAK,cAActU,CAAK,CAC1B,CAEQ,gBAAgBA,EAAkB,CACxC,GAAI,CAACA,EAAO,OAEN,KAAA,CACJ,EAAAuU,EAAI,EACJ,EAAAC,EAAI,EACJ,MAAAlO,EACA,OAAA3E,EACA,cAAAqZ,EAAe,cAAAC,EACf,IAAAtF,EACA,UAAAyD,CACE,EAAApZ,EAEAuU,IAAG,KAAK,EAAIA,GACZC,IAAG,KAAK,EAAIA,GACZlO,IAAO,KAAK,MAAQA,GACpB3E,IAAQ,KAAK,OAASA,GACtBqZ,IAAe,KAAK,cAAgBA,GACpCC,IAAe,KAAK,cAAgBA,GACpCtF,IAAK,KAAK,YAAcA,GACxByD,IAAW,KAAK,UAAYA,EAClC,CAEO,cAAcpZ,EAAkB,CACrC,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEO,cAAc4U,EAAgBC,EAAU,GAAO,CAC7C,MAAA,EACT,CAEO,KAAK7U,EAAmB,CAC7B,KAAK,cAAcA,CAAK,EAExB,KAAK,WAAW,EAChB,KAAK,YAAY,CACnB,CAEQ,YAAc,CACd,KAAA,CACJ,IAAAsU,EACA,YAAA8B,EAAa,UAAAgD,EACb,EAAA7E,EAAG,EAAAC,EAAG,MAAAlO,EAAO,OAAA3E,CACX,EAAA,KAEJ2S,EAAI,KAAK,EACTA,EAAI,UAAY8E,EAChB9E,EAAI,YAAc8B,EAClB9B,EAAI,WAAWC,EAAGC,EAAGlO,EAAO3E,CAAM,EAClC2S,EAAI,QAAQ,CACd,CAEQ,aAAe,CACf,KAAA,CACJ,IAAAA,EACA,cAAA2G,EAAe,cAAAD,EAAe,YAAAE,EAC9B,EAAA3G,EAAG,EAAAC,EAAG,MAAAlO,EAAO,OAAA3E,CACX,EAAA,KAEEwZ,EAAkBD,EAAc,EAChCE,EAAO7G,EAAI4G,EACXE,EAAO7G,EAAI2G,EAEjB7G,EAAI,KAAK,EACTA,EAAI,YAAc2G,EAClB3G,EAAI,UAAY0G,EAEhB1G,EAAI,SAAS8G,EAAMC,EAAMH,EAAaA,CAAW,EACjD5G,EAAI,SAAS8G,EAAMC,EAAO1Z,EAAS,EAAGuZ,EAAaA,CAAW,EAC9D5G,EAAI,SAAS8G,EAAMC,EAAO1Z,EAAQuZ,EAAaA,CAAW,EAC1D5G,EAAI,SAAS8G,EAAO9U,EAAQ,EAAG+U,EAAMH,EAAaA,CAAW,EAC7D5G,EAAI,SAAS8G,EAAO9U,EAAQ,EAAG+U,EAAO1Z,EAAQuZ,EAAaA,CAAW,EACtE5G,EAAI,SAAS8G,EAAO9U,EAAO+U,EAAMH,EAAaA,CAAW,EACzD5G,EAAI,SAAS8G,EAAO9U,EAAO+U,EAAO1Z,EAAS,EAAGuZ,EAAaA,CAAW,EACtE5G,EAAI,SAAS8G,EAAO9U,EAAO+U,EAAO1Z,EAAQuZ,EAAaA,CAAW,EAElE5G,EAAI,WAAW8G,EAAMC,EAAMH,EAAaA,CAAW,EACnD5G,EAAI,WAAW8G,EAAMC,EAAO1Z,EAAS,EAAGuZ,EAAaA,CAAW,EAChE5G,EAAI,WAAW8G,EAAMC,EAAO1Z,EAAQuZ,EAAaA,CAAW,EAC5D5G,EAAI,WAAW8G,EAAO9U,EAAQ,EAAG+U,EAAMH,EAAaA,CAAW,EAC/D5G,EAAI,WAAW8G,EAAO9U,EAAQ,EAAG+U,EAAO1Z,EAAQuZ,EAAaA,CAAW,EACxE5G,EAAI,WAAW8G,EAAO9U,EAAO+U,EAAMH,EAAaA,CAAW,EAC3D5G,EAAI,WAAW8G,EAAO9U,EAAO+U,EAAO1Z,EAAS,EAAGuZ,EAAaA,CAAW,EACxE5G,EAAI,WAAW8G,EAAO9U,EAAO+U,EAAO1Z,EAAQuZ,EAAaA,CAAW,EAIpE5G,EAAI,QAAQ,CACd,CAEQ,iBAAkB,CAClB,KAAA,CACJ,EAAAC,EAAG,EAAAC,EACH,MAAAlO,EAAO,OAAA3E,CACL,EAAA,KAEJ,KAAK,YAAc,CACjB,CAAC4S,EAAGC,CAAC,EACL,CAACD,EAAIjO,EAAOkO,CAAC,EACb,CAACD,EAAGC,EAAI7S,CAAM,EACd,CAAC4S,EAAIjO,EAAOkO,EAAI7S,CAAM,CAAA,CAE1B,CACF,CCjIO,MAAM2Z,WAAmBjH,EAAa,CAQ3C,YAAYC,EAA+BtU,EAAkB,CACrD,QAPR,KAAO,MAAQ,IACf,KAAO,OAAS,GAChB,KAAO,EAAI,EACX,KAAO,EAAI,EACX,KAAQ,YAAc,OAIpB,KAAK,IAAMsU,EACX,KAAK,cAActU,CAAK,CAC1B,CAEQ,gBAAgBA,EAAkB,CACxC,GAAI,CAACA,EAAO,OAEN,KAAA,CACJ,EAAAuU,EAAI,EACJ,EAAAC,EAAI,EACJ,MAAAlO,EACA,OAAA3E,EACA,IAAAgU,CACE,EAAA3V,EAEAuU,IAAG,KAAK,EAAIA,GACZC,IAAG,KAAK,EAAIA,GACZlO,IAAO,KAAK,MAAQA,GACpB3E,IAAQ,KAAK,OAASA,GACtBgU,IAAK,KAAK,YAAcA,EAC9B,CAEO,cAAc3V,EAAkB,CACrC,KAAK,gBAAgBA,CAAK,EAC1B,KAAK,gBAAgB,CACvB,CAEO,cAAc4U,EAAgBC,EAAU,GAAO,CAC7C,MAAA,EACT,CAEO,KAAK7U,EAAmB,CAC7B,KAAK,cAAcA,CAAK,EAExB,KAAK,WAAW,CAClB,CAEQ,YAAa,CACb,KAAA,CACJ,IAAAsU,EACA,YAAA8B,EACA,EAAA7B,EAAG,EAAAC,EAAG,MAAAlO,EAAO,OAAA3E,CACX,EAAA,KAEJ2S,EAAI,KAAK,EACTA,EAAI,YAAc8B,EAClB9B,EAAI,WAAWC,EAAGC,EAAGlO,EAAO3E,CAAM,EAClC2S,EAAI,QAAQ,CACd,CAEQ,iBAAkB,CAClB,KAAA,CACJ,EAAAC,EAAG,EAAAC,EACH,MAAAlO,EAAO,OAAA3E,CACL,EAAA,KAEJ,KAAK,YAAc,CACjB,CAAC4S,EAAGC,CAAC,EACL,CAACD,EAAIjO,EAAOkO,CAAC,EACb,CAACD,EAAGC,EAAI7S,CAAM,EACd,CAAC4S,EAAIjO,EAAOkO,EAAI7S,CAAM,CAAA,CAE1B,CACF,CCvFY,IAAA4Z,GAAAA,IAEVA,EAAA,QAAU,UAEVA,EAAA,WAAa,aAEbA,EAAA,WAAa,aAEbA,EAAA,WAAa,aAEbA,EAAA,QAAU,UAEVA,EAAA,QAAU,UAEVA,EAAA,KAAO,OAdGA,IAAAA,GAAA,CAAA,CAAA,EAiBAC,GAAAA,IACVA,EAAA,KAAO,GACPA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,GAAK,KATKA,IAAAA,GAAA,CAAA,CAAA,EAYAC,GAAAA,IACVA,EAAA,QAAU,UACVA,EAAA,KAAO,OAEPA,EAAA,KAAO,OACPA,EAAA,SAAW,WAEXA,EAAA,UAAY,YACZA,EAAA,KAAO,OACPA,EAAA,KAAO,OAEPA,EAAA,KAAO,OACPA,EAAA,UAAY,aACZA,EAAA,UAAY,aACZA,EAAA,SAAW,YACXA,EAAA,SAAW,YACXA,EAAA,WAAa,cACbA,EAAA,WAAa,cAEbA,EAAA,KAAO,OACPA,EAAA,KAAO,OAEPA,EAAA,KAAO,OACPA,EAAA,SAAW,WACXA,EAAA,QAAU,UAEVA,EAAA,WAAa,cACbA,EAAA,OAAS,UACTA,EAAA,QAAU,WACVA,EAAA,YAAc,eA7BJA,IAAAA,GAAA,CAAA,CAAA,EClBZ,MAAMC,GAAW,CAACC,EAAmBC,IAAa,CAEhD,KAAM,CAAE,EAAArH,EAAG,EAAAC,EAAG,MAAAlO,EAAO,OAAA3E,GAAWga,EAC1BE,EAAUtH,EAAIjO,EAAQ,EACtBwV,EAAUtH,EAAI7S,EAAS,EACvBoa,EAAQxH,EAAIjO,EACZ0V,EAAQxH,EAAI7S,EACZ8W,EAAY,EAClB,IAAIwD,EAAkBT,EAAgB,KAEtC,OAAI,KAAK,IAAIjH,EAAIqH,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIjE,EAAIoH,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GAC7G,KAAK,IAAIK,EAAUD,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIjE,EAAIoH,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GACxH,KAAK,IAAIO,EAAQH,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIjE,EAAIoH,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GACtH,KAAK,IAAIjH,EAAIqH,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIqD,EAAUF,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GACxH,KAAK,IAAIO,EAAQH,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIqD,EAAUF,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GAC5H,KAAK,IAAIjH,EAAIqH,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIuD,EAAQJ,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GACtH,KAAK,IAAIK,EAAUD,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIuD,EAAQJ,EAAS,CAAC,GAAKnD,EAAWwD,EAAkBT,EAAgB,GAC5H,KAAK,IAAIO,EAAQH,EAAS,CAAC,GAAKnD,GAAa,KAAK,IAAIuD,EAAQJ,EAAS,CAAC,GAAKnD,IAAWwD,EAAkBT,EAAgB,IAE5HS,CACT,EAIaC,GAAe,SAAqBtH,EAAGgH,EAAU,CAI5D,MAAMO,EAAe,IAAM,CACnB,KAAA,CACJ,SAAAC,CACE,EAAA,KACEC,EAAe,CACnB,EAAGT,EAAS,EAAIQ,EAAS,cAAgBA,EAAS,OAAO,EACzD,EAAGR,EAAS,EAAIQ,EAAS,cAAgBA,EAAS,OAAO,CAAA,EAErDE,EAAS,CACb,EAAGF,EAAS,OAAO,EAAIC,EAAa,EACpC,EAAGD,EAAS,OAAO,EAAIC,EAAa,CAAA,EAGtC,KAAK,QAAQ,IAAID,EAAS,OAAO,EAAE,EAAE,cAAcE,CAAM,EACpD,KAAA,KAAK,YAAa,KAAK,QAAQ,IAAIF,EAAS,OAAO,EAAE,CAAC,EAC3D,KAAK,OAAO,CAAA,EAORG,EAAe,IAAM,CACnB,KAAA,CACJ,SAAAH,CACE,EAAA,KAEEC,EAAe,CACnB,EAAGT,EAAS,EAAIQ,EAAS,cAAgBA,EAAS,OAAO,EACzD,EAAGR,EAAS,EAAIQ,EAAS,cAAgBA,EAAS,OAAO,CAAA,EAGrDE,EAAS,CACb,EAAGF,EAAS,OAAO,EAAIC,EAAa,EACpC,EAAGD,EAAS,OAAO,EAAIC,EAAa,CAAA,EAEtC,KAAK,QAAQ,IAAID,EAAS,OAAO,EAAE,EAAE,cAAcE,CAAM,EAEpD,KAAA,KAAK,YAAaF,EAAS,MAAM,EACtC,KAAK,OAAO,CAAA,EAMRI,EAAa,IAAM,CACjB,KAAA,CACJ,SAAAJ,CACE,EAAA,KAEE,CAAC,EAAA7H,EAAG,CAAK,EAAAqH,EACZQ,EAAS,OAAO,OAAS,OAC1B,KAAK,WAAW7H,EAAG,EAAG6H,EAAS,IAAI,EAE9B,KAAA,WAAW7H,EAAG,EAAG6H,CAAQ,EAGhC,KAAK,OAAO,CAAA,EAMRK,EAAW,IAAM,CACf,KAAA,CACJ,YAAAC,EACA,SAAAN,EACA,mBAAAO,CACE,EAAA,KAEEN,EAAe,CACnB,EAAGT,EAAS,EAAIQ,EAAS,cAAgBA,EAAS,OAAO,EACzD,EAAGR,EAAS,EAAIQ,EAAS,cAAgBA,EAAS,OAAO,CAAA,EAG3DM,EAAY,QAAqBE,GAAA,CAC/B,MAAMC,EAAa,CACjB,EAAGD,EAAU,EAAIP,EAAa,EAC9B,EAAGO,EAAU,EAAIP,EAAa,CAAA,EAI5BM,EAAmB,IAAIC,EAAU,EAAE,GAChB,CAAC,GAAGD,EAAmB,IAAIC,EAAU,EAAE,EAAE,KAAM,GAAGD,EAAmB,IAAIC,EAAU,EAAE,EAAE,EAAE,EACjG,QAAgBE,GAAA,CAC3BA,EAAK,OAASA,EAAK,GACf,KAAK,oBAAoBA,EAAM,CAAE,OAAQF,CAAA,CAAW,EACpD,KAAK,gBAAgBE,EAAM,CAAE,OAAQF,CAAA,EAAaC,CAAU,CAAA,CACjE,EAGH,KAAK,QAAQ,IAAID,EAAU,EAAE,EAAE,cAAcC,CAAU,EAClD,KAAA,KAAK,YAAaD,CAAS,CAAA,CACjC,EAED,KAAK,OAAO,CAAA,EAMRG,EAAW,IAAM,CACf,KAAA,CACJ,SAAAX,CACE,EAAA,KAEEY,EAAMZ,EAAS,OAAO,cAAcA,EAAS,SAAS,EAC5DA,EAAS,wBAA0BY,EACnCZ,EAAS,UAAYR,EACjBoB,IAAQ,KACP,KAAA,gBAAgBZ,EAAUR,CAAQ,EACvC,KAAK,OAAO,EAAA,EAsFP,MAAA,CACL,kBAtEwB,IAAM,CACxB,KAAA,CACJ,SAAAqB,EACA,eAAAC,CACE,EAAA,KAYEC,EAVY,CAChB,CAAC5B,EAAS,OAAO,EAAGE,EAAO,KAC3B,CAACF,EAAS,UAAU,EAAGE,EAAO,UAC9B,CAACF,EAAS,UAAU,EAAGE,EAAO,UAC9B,CAACF,EAAS,UAAU,EAAGE,EAAO,UAC9B,CAACF,EAAS,OAAO,EAAGE,EAAO,KAC3B,CAACF,EAAS,OAAO,EAAGE,EAAO,KAC3B,CAACF,EAAS,IAAI,EAAGE,EAAO,IAAA,EAGIwB,CAAQ,EAElC,GAAAE,EAAa,OAAO,KAAK,OAAO,QAAQ,MAAM,OAASA,GAAe1B,EAAO,QAE7E,IAAA2B,EAAc,KAAMC,EAAS5B,EAAO,QAGxC,QAASrM,EAAI8N,EAAe,OAAS,EAAG9N,GAAK,EAAGA,IAAK,CAC7C,MAAA3D,EAAKyR,EAAe9N,CAAC,EACrBkO,EAAW7R,EAAG,cAAcmQ,CAAQ,GAAKF,GAASjQ,EAAImQ,CAAQ,EACpE,GAAI0B,EAAU,CACEF,EAAA3R,EAEd4R,EAASC,IAAa9B,EAAgB,GAAKC,EAAO,WAC9C6B,IAAa9B,EAAgB,GAAKC,EAAO,SACzC6B,IAAa9B,EAAgB,GAAKC,EAAO,WACzC6B,IAAa9B,EAAgB,IAC7B8B,IAAa9B,EAAgB,GADKC,EAAO,SAEzC6B,IAAa9B,EAAgB,GAAKC,EAAO,WACzC6B,IAAa9B,EAAgB,GAAKC,EAAO,SACzC6B,IAAa9B,EAAgB,GAAKC,EAAO,WACzCA,EAAO,KACX,OAKJ,KAAK,YAAc2B,EACd,KAAA,OAAO,QAAQ,MAAM,OAASC,EACnC,KAAK,kBAAkB,CAAA,EA0BvB,WAlFiB,IAAM,CAClB,KAAA,OAAO,aAAazI,CAAC,EAC1B,KAAK,OAAO,mBACN,MAAA2I,EAAiB,KAAK,OAAO,aAAa,EAC3C,KAAA,KAAK,aAAcA,CAAc,EACtC,KAAK,OAAO,CAAA,EA8EZ,YArBkB,IAAM,CAClB,KAAA,CACJ,YAAAb,EACA,SAAAN,CACE,EAAA,KAEEoB,EAAe,CAAC,CAACpB,EAAS,gBAC1BqB,EAAarB,EAAS,kBAAkB/G,GACxCqI,EAAatB,EAAS,kBAAkBpD,GACxC2E,EAAavB,EAAS,kBAAkB/D,GACxCuF,EAAaxB,EAAS,kBAAkBzB,GAC1C,GAAA6C,EAAc,OAAOhB,EAAW,EAChC,GAAAiB,EAAY,OAAOhB,EAAS,EAC5B,GAAAiB,EAAY,OAAOX,EAAS,EAC5B,GAAAY,EAAY,OAAOxB,EAAa,EAChC,GAAAyB,EAAY,OAAOrB,EAAa,CAAA,CAMpC,CAEJ,EAEasB,GAAe,SAAqBjJ,EAAGgH,EAAU,CAC5D,KAAM,CAAE,EAAGkC,EAAK,EAAGC,GAAQnC,EAgHpB,MAAA,CACL,SA/Ge,IAAM,eACrB,KAAM,CAAC,SAAAqB,EAAU,aAAAe,EAAc,cAAAC,CAAA,EAAiB,KAChD,OAAQhB,EAAU,CAChB,KAAK1B,EAAS,KACZ,MAAM2C,EAAW,CACf,EAAGJ,IAAM1K,GAAAvT,EAAA,KAAK,aAAL,YAAAA,EAAkB,KAAlB,YAAAuT,EAAsB,GAC/B,EAAG2K,IAAMI,GAAA9K,EAAA,KAAK,aAAL,YAAAA,EAAkB,KAAlB,YAAA8K,EAAsB,EAAA,EAG3BC,EAAc,KAAK,WAAW,OAAOnE,GAAM,CAAC,CAACA,EAAG,UAAU,EAAE,IAAYoE,IACvEA,EAAA,EAAIA,EAAK,EAAIH,EAAS,EACtBG,EAAA,EAAIA,EAAK,EAAIH,EAAS,EACpBG,EACR,GAEIC,EAAA,KAAA,aAAA,MAAAA,EAAY,YAAYF,GAC7B,KAAK,SAAW,GAChB,KAAK,OAAO,QAAQ,MAAM,OAAS3C,EAAO,QAC1C,KAAK,OAAO,EACZ,MACF,KAAKF,EAAS,QACZ,MAAMgD,EAAU,OAAO,OAAO,KAAK,mBAAoB,CACrD,EAAGT,EAAME,EAAe,EAAG,EAAGD,EAAME,EAAgB,EACpD,MAAOD,EACP,OAAQC,CAAA,CACT,EAEI,KAAA,WAAW,QAAQM,CAAO,EAC/B,KAAK,mBAAqB,GAC1B,KAAK,SAAW,GAChB,KAAK,OAAO,QAAQ,MAAM,OAAS9C,EAAO,QAC1C,KAAK,OAAO,EACZ,MACF,KAAKF,EAAS,QACZ,MAAMiD,EAAU,CACd,IAAK,KAAK,UAAU,EACpB,EAAGV,EAAK,EAAGC,EACX,MAAOC,EACP,OAAQC,EACR,KAAM,MAAA,EAGH,KAAA,WAAW,QAAQO,CAAO,EAC/B,KAAK,SAAW,GAChB,KAAK,OAAO,QAAQ,MAAM,OAAS/C,EAAO,QAC1C,KAAK,OAAO,EACZ,MACF,KAAKF,EAAS,QACZ,MAAMkD,EAAU,CACd,IAAK,KAAK,UAAU,EACpB,EAAGX,EAAK,EAAGC,EACX,KAAM,GACN,KAAM,MAAA,EAGH,KAAA,WAAW,QAAQU,CAAO,EAC/B,KAAK,SAAW,GAChB,KAAK,OAAO,QAAQ,MAAM,OAAShD,EAAO,QAC1C,KAaJ,CAAA,EAyCA,eAtCsB7G,GAAkB,CAClC,KAAA,CACJ,QAAA8J,EAAS,SAAAC,EAAU,QAAAC,CACjBhK,EAAAA,EACE,CACJ,eAAAsI,EACA,YAAAR,EACA,SAAAN,CACE,EAAA,KAEA,CAACwC,GAAW,CAACF,GAAShC,EAAY,MAAM,EAE5C,KAAK,OAAO,QAAQ,MAAM,OAASjB,EAAO,SAC1C,QAASrM,EAAI,EAAGA,EAAI8N,EAAe,OAAQ9N,IAAK,CACxC,MAAA3D,EAAKyR,EAAe9N,CAAC,EACrB6M,EAAkBP,GAASjQ,EAAImQ,CAAQ,EAE7C,GADiBnQ,EAAG,cAAcmQ,EAAU,EAAK,GAAOK,EAGxD,CAAAG,EAAS,OAAS3Q,EACdA,aAAcuN,IAChB0D,EAAY,MAAM,EAClBN,EAAS,UAAYR,IAEdnQ,aAAc4J,IAAa5J,aAAckP,IAAYlP,aAAc4M,MACjE+D,EAAA,cAAgBR,EAAS,EAAInQ,EAAG,EAChC2Q,EAAA,cAAgBR,EAAS,EAAInQ,EAAG,EACzC2Q,EAAS,gBAAkBH,GAE7BS,EAAY,IAAIjR,CAAE,EAClB,OAGF,KAAK,OAAO,CAAA,CAKZ,CAEJ,EAEaoT,GAAa,SAAqBjK,EAAGgH,EAAU,CAWnD,MAAA,CACL,gBAVsB,IAAM,CAC5B,KAAK,OAAO,QAAQ,MAAM,OAASH,EAAO,QAC1C,KAAK,SAAW,CACd,OAAQ,KACR,gBAAiBD,EAAgB,KACjC,cAAe,EACf,cAAe,CAAA,CACjB,CAGA,CAEJ,EC3VO,MAAMsD,WAAYC,EAAY,CA0EnC,YAAYxU,EAAS,CACb,QArER,KAAO,MAAQ,CACb,cAAe,CAAC,EAChB,cAAe,CAAC,EAChB,cAAe,CAAC,EAChB,cAAe,CAAC,CAAA,EAmBlB,KAAO,SAAW,CAChB,OAAQ,KAER,gBAAiBiR,EAAgB,KACjC,cAAe,EACf,cAAe,EAEf,wBAAyB,EACzB,UAAW,CAAC,EAAG,EAAG,EAAG,CAAC,CAAA,EAKxB,KAAQ,aAAe,GACvB,KAAQ,gBAAkB,GAG1B,KAAQ,YAAc,GACtB,KAAQ,cAAgB,GACxB,KAAQ,QAAU,GAClB,KAAQ,SAAW,EAEnB,KAAQ,aAAe,GAGvB,KAAQ,aAAe,IACvB,KAAQ,cAAgB,GAEhB,KAAA,gBAAkB,IAG1B,KAAQ,aAAe,GACvB,KAAQ,YAAc,GAepB,KAAK,gBAAgBjR,CAAO,EAC5B,KAAK,YAAY,EACjB,KAAK,kBAAkB,EACvB,KAAK,aAAa,EAClB,KAAK,OAAO,CACd,CAIQ,gBAAgBA,EAAS,CAC/B,KAAM,CAAE,GAAAkB,EAAI,KAAAuT,EAAM,WAAAC,EAAY,SAAAC,EAAU,WAAAC,EAAY,UAAAC,EAAW,aAAAC,EAAe,GAAO,aAAAC,EAAe,GAAO,aAAAC,EAAe,IAAUhV,EACpI,KAAK,GAAKkB,EACV,KAAK,SAAWyT,GAAY,EAC5B,KAAK,WAAaC,EAClB,KAAK,gBAAkBC,EAEvB,KAAK,aAAeC,EAEpB,KAAK,aAAeC,EACpB,KAAK,aAAeC,EAgCpB,KAAK,WAAaN,CACpB,CAEO,SAAU,CACf,KAAK,eAAe,EACpB,KAAK,oBAAoB,EACzB,KAAK,OAAO,SACd,CAEQ,aAAc,CACf,KAAA,OAAS,IAAIO,GAAO,CACvB,QAAS,KAAK,GACd,eAAgBC,GAAe,OAAA,CAChC,EACI,KAAA,SAAW,KAAK,OAAO,QAC9B,CAEQ,cAAgB,CAEjB,KAAA,QAAU,IAAIvF,GAEd,KAAA,QAAU,IAAIwF,GAEf,KAAK,cAEF,KAAA,QAAQ,IAAIC,GAAY,UAAW,CACtC,QAAS,KAAK,GACd,WAAY,KAAK,MAAA,CAClB,EAGC,KAAK,cAEP,KAAK,QAAQ,IAAIA,GAAY,UAAW,KAAK,GAAI,KAAK,eAAe,CAEzE,CAEQ,gBAAkB,CACxB,KAAK,QAAQ,SACf,CAEQ,mBAAoB,CAC1B,KAAK,oBAAsB,KAAK,YAAY,KAAK,IAAI,EACrD,KAAK,oBAAsB,KAAK,YAAY,KAAK,IAAI,EACrD,KAAK,kBAAoB,KAAK,UAAU,KAAK,IAAI,EACjD,KAAK,iBAAmB,KAAK,SAAS,KAAK,IAAI,EAC/C,KAAK,gBAAkB,KAAK,QAAQ,KAAK,IAAI,EAC7C,KAAK,sBAAwB,KAAK,cAAc,KAAK,IAAI,EACzD,KAAK,eAAiB,KAAK,OAAO,KAAK,IAAI,EAC3C,KAAK,eAAiB,KAAK,OAAO,KAAK,IAAI,EAE3C,KAAK,OAAO,GAAG,gBAAiB,KAAK,gBAAgB,EACrD,KAAK,OAAO,GAAG,eAAgB,KAAK,eAAe,EACnD,KAAK,OAAO,GAAG,iBAAkB,KAAK,iBAAiB,EACvD,KAAK,OAAO,GAAG,mBAAoB,KAAK,mBAAmB,EAC3D,KAAK,OAAO,GAAG,mBAAoB,KAAK,mBAAmB,EAC3D,KAAK,OAAO,GAAG,qBAAsB,KAAK,qBAAqB,EAC/D,KAAK,OAAO,GAAG,cAAe,KAAK,cAAc,EACjD,KAAK,OAAO,GAAG,cAAe,KAAK,cAAc,CACnD,CAEQ,qBAAsB,CAC5B,KAAK,OAAO,IAAI,gBAAiB,KAAK,gBAAgB,EACtD,KAAK,OAAO,IAAI,eAAgB,KAAK,eAAe,EACpD,KAAK,OAAO,IAAI,iBAAkB,KAAK,iBAAiB,EACxD,KAAK,OAAO,IAAI,mBAAoB,KAAK,mBAAmB,EAC5D,KAAK,OAAO,IAAI,mBAAoB,KAAK,mBAAmB,EAC5D,KAAK,OAAO,IAAI,qBAAsB,KAAK,qBAAqB,EAChE,KAAK,OAAO,IAAI,cAAe,KAAK,cAAc,EAClD,KAAK,OAAO,IAAI,cAAe,KAAK,cAAc,CACpD,CAEQ,OAAO/K,EAAkB,CACzB,MAAAwF,EAAS,KAAK,QAAQ,KAAK,EACjCA,GAAA,MAAAA,EAAQ,UACHA,GAAQ,QAAQ,KAAK,MAAM,CAClC,CAEQ,OAAOxF,EAAkB,CACzB,MAAAwF,EAAS,KAAK,QAAQ,KAAK,EACjCA,GAAA,MAAAA,EAAQ,UACHA,GAAQ,QAAQ,KAAK,MAAM,CAClC,CAEQ,UAAUxF,EAAegH,EAAuB,CACtD,KAAM,CAAE,gBAAAgE,CAAgB,EAAIf,GAAW,KAAK,KAAMjK,EAAGgH,CAAQ,EAC7CgE,GAClB,CAEQ,YAAYhL,EAAegH,EAAuB,CAClD,KAAA,CAAE,SAAAqB,CAAa,EAAA,KACf,CAAE,SAAA4C,EAAU,eAAAC,GAAmBjC,GAAa,KAAK,KAAMjJ,EAAGgH,CAAQ,EAIpE,GAAAqB,EAAU,OAAO4C,EAAS,EAG9BC,EAAelL,CAAC,CAClB,CAEQ,YAAYA,EAAegH,EAAuB,CAClD,KAAA,CACJ,OAAAmE,EACA,SAAA3D,CACE,EAAA,KACE,CAAE,kBAAA4D,EAAmB,WAAAC,EAAY,YAAAC,GAAgBhE,GAAa,KAAK,KAAMtH,EAAGgH,CAAQ,EAEpFuE,EAAa,CAACJ,EAAO,YACrBK,EAAeL,EAAO,aAAe,CAAC3D,EAAS,OAC/CiE,EAAgBN,EAAO,aAAe3D,EAAS,OAEjD,GAAA+D,EAAY,OAAOH,EAAkB,EACrC,GAAAI,EAAc,OAAOH,EAAW,EACpC,GAAII,EAAe,CAEjB,MAAMC,EAAkB,CAAC,GAAG,KAAK,WAAW,EAAE,IAAUrG,GAAA,CACtD,MAAMsG,EAAe,CACnB,OAAQtG,EACR,YAAa,CAAC,CAAA,EAEhB,OAAIA,EAAG,IAAgBsG,EAAA,YAAY,EAAItG,EAAG,GACtCA,EAAG,IAAgBsG,EAAA,YAAY,EAAItG,EAAG,GACtCA,EAAG,QAAoBsG,EAAA,YAAY,MAAQtG,EAAG,OAC9CA,EAAG,SAAqBsG,EAAA,YAAY,OAAStG,EAAG,QAChDA,EAAG,MAAKsG,EAAa,YAAY,IAAMrhB,GAAU+a,EAAG,GAAG,GACpDsG,CAAA,CACR,EACM,YAAA,QAAQ,KAAK,IAAM,CAiBtB,KAAK,YAAY,QACnBD,EAAgB,IAASlR,GAAA,KAAK,YAAY,IAAIA,EAAE,MAAM,CAAC,EAEvD,QAASA,EAAI,EAAGA,EAAIkR,EAAgB,OAAQlR,IAAK,CAC/C,KAAM,CAAC,OAAAuM,EAAQ,YAAA6E,CAAW,EAAIF,EAAgBlR,CAAC,EAC/CuM,EAAO,cAAc6E,CAAW,EAC5B7E,aAAkBtG,IAAgB,KAAA,KAAK,YAAasG,CAAM,EAC1DA,aAAkB3C,IAAgB,KAAA,KAAK,YAAa2C,CAAM,EAEhE,KAAK,OAAO,CAAA,CACX,EAEIuE,EAAY,EAEvB,CAEQ,cAActL,EAAe,CACnC,GAAI,CAAC,KAAK,aAAc,OAClB,KAAA,CAAE,QAAAve,EAAS,QAAAC,EAAS,KAAM,CAAE,WAAAmqB,EAAY,YAAAC,CAAA,CAAkB,EAAA9L,EAChE,KAAK,QAAQ,IAAI+K,GAAY,SAAS,EAAE,KAAK,CAC3C,IAAKrpB,EACL,KAAMD,EACN,WAAAoqB,EACA,YAAAC,CAAA,CACD,EAEI,KAAA,KAAK,oBAAqB9L,CAAC,CAClC,CAEQ,QAAQA,EAAe,CACvB,KAAA,CACJ,OAAA+L,EACA,OAAAC,EACA,QAAAhC,EACA,SAAAD,CACE,EAAA/J,EAIJ,GAFqB,KAAK,IAAI+L,CAAM,EAAI,GAAK,KAAK,IAAIC,CAAM,EAAI,EAKhE,GAAIhC,EAAS,CACL,MAAAiC,EAAW,KAAK,OAAO,SAEvBC,EAAY,KAAK,MAAMpG,GAAUmG,EAAW,IAAMF,EAAQ,GAAI,GAAG,CAAC,EACxE,KAAK,KAAKG,CAAS,MAGhB,CACG,MAAAC,EAAY,KAAK,OAAO,aAAa,EAC3C,KAAK,OAAO,aAAa,CACvB,EAAGA,EAAU,EAAIH,EACjB,EAAGG,EAAU,EAAIJ,CAAA,CACJ,EACf,KAAK,OAAO,EAEhB,CAEQ,UAAW,CACjB,KAAK,OAAO,CACd,CAOQ,WAAY,CACZ,KAAA,CACJ,MAAO,CACL,cAAeK,CACjB,EACA,mBAAArE,CACE,EAAA,KACJ,GAAKqE,GAAA,MAAAA,EAAO,OACZ,QAAS5R,EAAI,EAAGA,EAAI4R,EAAM,OAAQ5R,IAAK,CAC/B,MAAA6K,EAAK+G,EAAM5R,CAAC,EAClB,IAAIiP,EAAO,KAAK,QAAQ,IAAIpE,EAAG,GAAG,EAC7BoE,IACHA,EAAO,IAAI4C,GAAK,KAAK,OAAO,SAAU,CACpC,GAAIhH,EAAG,IACP,OAAQA,EAAG,UACX,OAAQA,EAAG,OACX,KAAMA,EAAG,KACT,EAAGA,EAAG,EACN,EAAGA,EAAG,EACN,MAAOA,EAAG,MACV,OAAQA,EAAG,OACX,WAAYA,EAAG,WACf,IAAKA,EAAG,IACR,IAAKA,EAAG,IACR,gBAAiBA,EAAG,gBACpB,eAAgBA,EAAG,cAAA,CACpB,EACD,KAAK,QAAQ,IAAIA,EAAG,IAAKoE,CAAI,EACxB1B,EAAmB,IAAI1C,EAAG,GAAG,GAAG0C,EAAmB,IAAI1C,EAAG,IAAK,CAAE,KAAM,IAAI,IAAO,GAAI,IAAI,GAAO,CAAA,GAQ5G,CAEQ,aAAc,CACd,KAAA,CACJ,QAAAiH,EACA,MAAAC,EACA,eAAAjE,CACE,EAAA,KACE8D,EAAQG,EAAM,cACpB,QAAS/R,EAAI,EAAGA,EAAI4R,EAAM,OAAQ5R,IAAK,CAC/B,MAAA6K,EAAK+G,EAAM5R,CAAC,EACZiP,EAAO6C,EAAQ,IAAIjH,EAAG,GAAG,EAC/BoE,EAAK,cAAcpE,CAAE,EACH,KAAK,OAAO,UAAUoE,EAAK,WAAW,IAEtDnB,EAAe,KAAKmB,CAAI,EACxBA,EAAK,KAAK,GAGhB,CAEQ,aAAc,CACd,KAAA,CACJ,QAAA+C,EACA,MAAAD,EACA,eAAAjE,EACA,mBAAAP,CACE,EAAA,KACE3H,EAAQmM,EAAM,cACpB,QAAS/R,EAAI,EAAGA,EAAI4F,EAAM,OAAQ5F,IAAK,CAC/B,MAAA6K,EAAKjF,EAAM5F,CAAC,EAClB,IAAI0N,EAAOsE,EAAQ,IAAInH,EAAG,GAAG,EAExB6C,EAWHA,EAAK,cAAc7C,CAAE,GAVrB6C,EAAO,IAAI9D,GAAU,KAAK,OAAO,SAAU,CACzC,IAAKiB,EAAG,IACR,KAAMA,EAAG,KACT,KAAMA,EAAG,KACT,GAAIA,EAAG,GACP,GAAIA,EAAG,IACP,aAAcA,EAAG,YAAA,CAClB,EACD,KAAK,QAAQ,IAAIA,EAAG,IAAK6C,CAAI,GAM1BH,EAAmB,IAAIG,EAAK,IAAI,GAAGH,EAAmB,IAAIG,EAAK,KAAM,CAAE,KAAM,IAAI,IAAO,GAAI,IAAI,GAAO,CAAA,EACvGH,EAAmB,IAAIG,EAAK,EAAE,GAAGH,EAAmB,IAAIG,EAAK,GAAI,CAAE,KAAM,IAAI,IAAO,GAAI,IAAI,GAAO,CAAA,EACxGH,EAAmB,IAAIG,EAAK,IAAI,EAAE,KAAK,IAAIA,CAAI,EAC/CH,EAAmB,IAAIG,EAAK,EAAE,EAAE,GAAG,IAAIA,CAAI,EAEzB,KAAK,OAAO,UAAUA,EAAK,WAAW,IAEtDI,EAAe,KAAKJ,CAAI,EACxBA,EAAK,KAAK,GAGhB,CAEQ,YAAc,CACd,KAAA,CACJ,MAAO,CACL,cAAAuE,CACF,EACA,QAAAC,EACA,eAAApE,CACE,EAAA,KAEJ,QAAS9N,EAAI,EAAGA,EAAIiS,EAAc,OAAQjS,IAAK,CACvC,MAAA6K,EAAKoH,EAAcjS,CAAC,EAC1B,IAAImS,EAAOD,EAAQ,IAAIrH,EAAG,GAAG,EAExBsH,EAUHA,EAAK,cAActH,CAAE,GATrBsH,EAAO,IAAI5G,GAAS,KAAK,OAAO,SAAU,CACxC,GAAIV,EAAG,IACP,QAASA,EAAG,KACZ,UAAWA,EAAG,MACd,EAAGA,EAAG,EACN,EAAGA,EAAG,CAAA,CACP,EACD,KAAK,QAAQ,IAAIA,EAAG,IAAKsH,CAAI,GAKb,KAAK,OAAO,UAAUA,EAAK,WAAW,IAEtDrE,EAAe,KAAKqE,CAAI,EACxBA,EAAK,KAAK,GAIhB,CAGA,OAAOC,EAAU,CACf,KAAK,eAAiB,GAGlBA,IACF,KAAK,MAAQA,EACR,KAAA,YAAc,IACd,KAAA,YAAc,IACd,KAAA,YAAc,IACd,KAAA,YAAc,IACd,KAAA,uBAAyB,IAC9B,KAAK,YAAY,QAEjB,KAAK,UAAU,GAGjB,KAAK,OAAO,mBACZ,MAAMC,EAAW,KAAK,SACbA,EAAA,KAAO,QAAU,KAAK,WAG/BA,EAAS,KAAK,EAGd,KAAK,WAAW,EAEhB,KAAK,YAAY,EAEjB,KAAK,YAAY,EAEjB,KAAK,WAAW,EAGhBA,EAAS,QAAQ,EAOjB,KAAK,WAAa,GAAK,KAAK,cAAgB,KAAK,YAEjD,KAAK,OAAO,SACZ,KAAK,kBAAkB,EACvB,KAAK,gBAAgB,CACvB,CAEA,MAAa,iBAAmB,CACxB,KAAA,CACJ,MAAO,CACL,cAAAC,CACF,CACE,EAAA,KAEEC,EAAY,KAAK,QAAQ,IAAIhC,GAAY,SAAS,EACxD,GAAI,CAACgC,EAAkB,MAAA,GAEvB,MAAM/a,GAAS,EAET,KAAA,CAAE,MAAOgb,EAAO,OAAQC,GAAU,KAAK,OAAO,gBACpD,IAAIC,EAAO,EAAGC,EAAO,EAAGC,EAAOJ,EAAOK,EAAOJ,EAC7C,QAASzS,EAAI,EAAGA,EAAIsS,EAAc,OAAQtS,IAAK,CACvC,MAAAiP,EAAOqD,EAActS,CAAC,EACtB,CAAE,EAAAmF,EAAG,EAAG,MAAAjO,EAAO,OAAA3E,GAAW0c,EAE5B9J,EAAIuN,IAAaA,EAAAvN,GACjB,EAAIwN,IAAaA,EAAA,GACjBxN,EAAIjO,EAAQ0b,IAAMA,EAAOzN,EAAIjO,GAC7B,EAAI3E,EAASsgB,IAAMA,EAAO,EAAItgB,GAGpCggB,EAAU,KAAKG,EAAMC,EAAMC,EAAMC,EAAO3N,GAAQ,CAC9C,QAASlF,EAAI,EAAGA,EAAIsS,EAAc,OAAQtS,IAAK,CACvC,MAAAiP,EAAOqD,EAActS,CAAC,EACtB,CAAE,EAAAmF,EAAG,EAAAC,EAAG,MAAAlO,EAAO,OAAA3E,EAAQ,IAAA+T,EAAK,IAAAC,CAAQ,EAAA0I,EAC1C/J,EAAI,KAAK,EAETA,EAAI,UAAYoB,GAAO,OACvBpB,EAAI,SAASC,EAAGC,EAAGlO,EAAO3E,CAAM,EAChC2S,EAAI,YAAcqB,GAAO,OACzBrB,EAAI,WAAWC,EAAGC,EAAGlO,EAAO3E,CAAM,EAClC2S,EAAI,QAAQ,EACd,CACD,CACH,CAEQ,mBAAoB,CAC1B,KAAK,OAAO,mBACZ,KAAK,iBAAiB,EACtB,KAAK,iBAAiB,CACxB,CAEQ,kBAAmB,CACnB,KAAA,CACJ,OAAAyL,EACA,YAAArD,CACE,EAAA,KAEQA,EAAA,QAASjR,GAAO,CACtBA,aAAcwV,GACZ,IAAAlG,GAAYgF,EAAO,SAAU,CAC/B,EAAGtU,EAAG,EACN,EAAGA,EAAG,EACN,MAAOA,EAAG,MACV,OAAQA,EAAG,MAAA,CACZ,EAAE,KAAK,EAEDA,aAAcuN,GACjB,IAAAA,GAAU+G,EAAO,SAAU,CAC7B,GAAGtU,EACH,UAAW,EACX,YAAa,MAAA,CACd,EAAE,KAAK,EAEDA,aAAc4M,IACjB,IAAAA,GAAS0H,EAAO,SAAU,CAC5B,GAAGtU,CAAA,CACJ,EAAE,KAAK,CACV,CACD,CACH,CAEQ,kBAAmB,CACnB,KAAA,CACJ,OAAAsU,EACA,YAAA3C,EACA,YAAAV,CACE,EAAA,KAEEwF,EAAgBxF,EAAY,IAAIU,CAAW,EAE7C,CAACA,GAAe8E,IAEhB9E,aAAuB6D,GACrB,IAAA3F,GAAWyE,EAAO,SAAU,CAC9B,EAAG3C,EAAY,EACf,EAAGA,EAAY,EACf,MAAOA,EAAY,MACnB,OAAQA,EAAY,MAAA,CACrB,EAAE,KAAK,EAEDA,aAAuBpE,IAC1B,IAAAA,GAAU+G,EAAO,SAAU,CAC7B,GAAG3C,EACH,UAAW,EACX,YAAa,MAAA,CACd,EAAE,KAAK,EAEZ,CAIA,MAAO,CACD,GAAA,CAAC,KAAK,YAAY,KAAM,OACtB,MAAA+E,EAAa,KAAK,MAAM,KAAK,UAAU,CAAC,GAAG,KAAK,WAAW,CAAC,CAAC,EAC7D,CAAE,WAAAC,CAAW,EAAI,KAAK,WAG5B,GAAI,GADcA,GAAA,YAAAA,EAAaD,EAAY,KAAK,eAAgB,IACzC,MAAA,GAEvB,KAAK,WAAaA,EAClB,KAAK,SAAW5G,EAAS,KACpB,KAAA,GAAG,MAAM,OAASE,EAAO,IAChC,CAGA,YAAYpO,EAAK,CACf,KAAK,SAAWA,EAChB,KAAK,OAAO,CACd,CAGA,WAAY,CACN,IAAA+G,GAAS,KAAK,OAAO,SAAU,CACjC,EAAG,KAAK,OAAO,MAAQ,GACvB,EAAG,EAAA,CACJ,EAAE,KAAK,CACV,CAQA,cAAeiO,EAAU,SAGnB,KADWxiB,EAAAwiB,EAAS,MAAT,YAAAxiB,EAAc,QAAS,KAAKuT,EAAAiP,EAAS,MAAT,YAAAjP,EAAc,QAAS,EACtD,OAAO,KAAK,WAAW,CAACiP,CAAQ,CAAC,EAE7C,MAAMC,EAAW,KAAK,QAAQ,IAAID,EAAS,IAAI,EACzCE,EAAS,KAAK,QAAQ,IAAIF,EAAS,EAAE,EACrCG,EAAe,KAAK,mBAAmBF,EAAUD,EAAS,IAAI,CAAC,CAAC,EAChEI,EAAa,KAAK,mBAAmBF,EAAQF,EAAS,IAAIA,EAAS,IAAI,OAAS,CAAC,CAAC,EAGxF,GAAIG,GAAgBC,EAAmB,MAAA,GAMlC,KAAA,WAAW,CAACJ,CAAQ,CAAC,CAC5B,CAGA,WAAW9N,EAAGC,EAAGC,EAAGzF,EAAG,CACrB,MAAMsF,EAAM,KAAK,SACjBA,EAAI,KAAK,EACTA,EAAI,UAAY,OAChBA,EAAI,YAAc,UAClBA,EAAI,YAAc,UAClBA,EAAI,WAAa,EACjBA,EAAI,SAASC,EAAI,EAAGC,EAAI,EAAG,EAAG,CAAC,EAC3BF,EAAA,SAASC,EAAIE,EAAI,EAAI,EAAGD,EAAI,EAAG,EAAG,CAAC,EACvCF,EAAI,SAASC,EAAIE,EAAI,EAAGD,EAAI,EAAG,EAAG,CAAC,EAC/BF,EAAA,SAASC,EAAI,EAAGC,EAAIxF,EAAI,EAAI,EAAG,EAAG,CAAC,EACnCsF,EAAA,SAASC,EAAIE,EAAI,EAAGD,EAAIxF,EAAI,EAAI,EAAG,EAAG,CAAC,EAC3CsF,EAAI,SAASC,EAAI,EAAGC,EAAIxF,EAAI,EAAG,EAAG,CAAC,EAC/BsF,EAAA,SAASC,EAAIE,EAAI,EAAI,EAAGD,EAAIxF,EAAI,EAAG,EAAG,CAAC,EACvCsF,EAAA,SAASC,EAAIE,EAAI,EAAGD,EAAIxF,EAAI,EAAG,EAAG,CAAC,EAEvCsF,EAAI,WAAWC,EAAI,EAAGC,EAAI,EAAG,EAAG,CAAC,EAC7BF,EAAA,WAAWC,EAAIE,EAAI,EAAI,EAAGD,EAAI,EAAG,EAAG,CAAC,EACzCF,EAAI,WAAWC,EAAIE,EAAI,EAAGD,EAAI,EAAG,EAAG,CAAC,EACjCF,EAAA,WAAWC,EAAI,EAAGC,EAAIxF,EAAI,EAAI,EAAG,EAAG,CAAC,EACrCsF,EAAA,WAAWC,EAAIE,EAAI,EAAGD,EAAIxF,EAAI,EAAI,EAAG,EAAG,CAAC,EAC7CsF,EAAI,WAAWC,EAAI,EAAGC,EAAIxF,EAAI,EAAG,EAAG,CAAC,EACjCsF,EAAA,WAAWC,EAAIE,EAAI,EAAI,EAAGD,EAAIxF,EAAI,EAAG,EAAG,CAAC,EACzCsF,EAAA,WAAWC,EAAIE,EAAI,EAAGD,EAAIxF,EAAI,EAAG,EAAG,CAAC,EAEzCsF,EAAI,QAAQ,CACd,CAGA,WAAWoO,EAAWjO,EAAGF,EAAGC,EAAG,CAC7B,MAAMF,EAAM,KAAK,SAEjBA,EAAI,KAAK,EAELA,EAAA,KAAO,QAAU,KAAK,WAE1BA,EAAI,UAAY,OAEhBA,EAAI,UAAY,OAEhBA,EAAI,aAAe,MACfA,EAAA,SAASA,EAAI,cAAcoO,EAAWjO,EAAI,EAAE,EAAGF,EAAGC,EAAI,EAAE,EAC5DF,EAAI,QAAQ,CACd,CAGA,SAAS3D,EAAM,CACb,MAAMgS,EAAQ,KAGRlM,EAAM,IAAI,MACZA,EAAA,IAAM9F,EAAK,aAAa,OAC5B8F,EAAI,OAAS,UAAY,CACjBkM,EAAA,QAAQhS,EAAK,GAAG,EAAI8F,EAC1BkM,EAAM,OAAO,CAAA,CAEjB,CAGA,UAAUlM,EAAKhC,EAAGF,EAAGC,EAAGmB,EAAK,CAC3B,MAAMrB,EAAM,KAAK,SAEjBA,EAAI,KAAK,EACTA,EAAI,UAAU,EACdA,EAAI,YAAcqB,EAClBrB,EAAI,UAAY,EACZA,EAAA,IAAIC,EAAIE,EAAI,EAAGD,EAAI,GAAI,EAAG,EAAG,EAAI,KAAK,EAAE,EAC5CF,EAAI,KAAK,EACLA,EAAA,UAAUmC,EAAKlC,EAAIE,EAAI,GAAID,EAAI,GAAI,GAAI,EAAE,EAC7CF,EAAI,OAAO,EACXA,EAAI,QAAQ,CACd,CAGA,YAAa,OACL,MAAAqO,EAAQ,KAAM3D,EAAO,KAAK,OAC1Bnf,EAAAmf,GAAA,YAAAA,EAAA,gBAAA,MAAAnf,EAAe,QAAgB8Q,GAAA,CAEnC,IAAI8D,EAAI9D,EAAK,MACT3B,EAAI2B,EAAK,OACT4D,EAAI,OAAO5D,EAAK,CAAC,EACjB6D,EAAI,OAAO7D,EAAK,CAAC,EAGrB,MAAMsJ,EAAKtJ,EACX,IAAIiS,EAAO,KAAK,QAAQ,IAAI3I,EAAG,GAAG,EAE7B2I,EAUHA,EAAK,cAAc3I,CAAE,GATrB2I,EAAO,IAAIvK,GAAS,KAAK,OAAO,SAAU,CACxC,GAAI4B,EAAG,IACP,EAAA1F,EACA,EAAAC,EACA,MAAOC,EACP,OAAQzF,CAAA,CACT,EACD,KAAK,QAAQ,IAAIiL,EAAG,IAAK2I,CAAI,GAKb,KAAK,OAAO,UAAUA,EAAK,WAAW,IAEjD,KAAA,eAAe,KAAKA,CAAI,EAC7BA,EAAK,KAAK,GAGRD,EAAM,YAAY,IAAIC,CAAI,GAAGD,EAAM,WAAWpO,EAAGC,EAAGC,EAAGzF,CAAC,CAAA,EAGhE,CAGA,WAAY,OACV,MAAMsF,EAAM,KAAK,SAAUqO,EAAQ,KAAM3D,EAAO,KAAK,OAE/Cnf,EAAAmf,GAAA,YAAAA,EAAA,gBAAA,MAAAnf,EAAe,QAAgB8Q,GAAA,CACnC,IAAI8D,EAAIH,EAAI,YAAY3D,EAAK,IAAI,EAAE,MAC/B3B,EAAI,GACJuF,EAAI,OAAO5D,EAAK,CAAC,EACjB6D,EAAI,OAAO7D,EAAK,CAAC,EAErB2D,EAAI,KAAK,EAELA,EAAA,KAAO,QAAU,KAAK,WAEtBA,EAAA,UAAY3D,EAAK,OAAS,OAE9B2D,EAAI,UAAY,OAEhBA,EAAI,aAAe,MACnBA,EAAI,SAAS3D,EAAK,KAAM4D,EAAGC,CAAC,EAC5BF,EAAI,QAAQ,EAERqO,EAAM,YAAY,IAAIhS,CAAI,GAAGgS,EAAM,WAAWpO,EAAGC,EAAI,EAAGC,EAAGzF,CAAC,CAAA,EAEpE,CAOO,KAAM6T,EAAM,CACjB,MAAMC,EAAUD,EAAO,IAClB,KAAA,OAAO,KAAKC,CAAO,EACxB,KAAK,OAAO,EACZ,KAAK,KAAK,aAAc,KAAK,OAAO,QAAQ,CAC9C,CAGA,mBAAmBC,EAAUC,EAAW,CAClC,GAAAA,EAAU,IAAMD,EAAS,EACpB,MAAA,OACEC,EAAU,IAAMD,EAAS,EAAIA,EAAS,MACxC,MAAA,IACE,GAAAC,EAAU,IAAMD,EAAS,EAC3B,MAAA,OACEC,EAAU,IAAMD,EAAS,EAAIA,EAAS,OACxC,MAAA,IAEC,QAAA,MACN,mCACAA,EACA,KAAK,MAAM,KAAK,UAAUA,CAAQ,CAAC,EACnC,KAAK,MAAM,KAAK,UAAUC,CAAS,CAAC,CAAA,CAG1C,CAGA,WAAWlF,EAAKC,EAAK3B,EAAU6G,EAAW,GAAI,CAE5C,GAAI,CAAC,YAAa,WAAW,EAAE,SAAS7G,EAAS,OAAO,IAAI,EAAG,OAG/D,MAAMuG,EAAQ,KACRO,EAAqB,CACzB,EAAG9G,EAAS,OAAO,EACnB,EAAGA,EAAS,OAAO,EACnB,MAAOA,EAAS,OAAO,MACvB,OAAQA,EAAS,OAAO,MAAA,EAItB,GAAAA,EAAS,kBAAoB,KAAM,CACrC,MAAM+G,EAAW/G,EAAS,OAAO,MAAQA,EAAS,OAAO,EAAI0B,EACvDsF,EAAYhH,EAAS,OAAO,OAASA,EAAS,OAAO,EAAI2B,EAE/D3B,EAAS,OAAO,cAAc,CAC5B,EAAG+G,EAAWF,EAAW7G,EAAS,OAAO,EAAI0B,EAC7C,EAAGsF,EAAYH,EAAW7G,EAAS,OAAO,EAAI2B,EAC9C,MAAOoF,EAAWF,EAAW7G,EAAS,OAAO,MAAQ+G,EACrD,OAAQC,EAAYH,EAAW7G,EAAS,OAAO,OAASgH,CAAA,CACzD,EACYC,YAGNjH,EAAS,kBAAoB,KAAM,CAC1C,MAAMgH,EAAYhH,EAAS,OAAO,OAASA,EAAS,OAAO,EAAI2B,EAE/D3B,EAAS,OAAO,cAAc,CAC5B,EAAGgH,EAAYH,EAAW7G,EAAS,OAAO,EAAI2B,EAC9C,OAAQqF,EAAYH,EAAW7G,EAAS,OAAO,OAASgH,CAAA,CACzD,EACYC,YAGNjH,EAAS,kBAAoB,KAAM,CACpC,MAAA+G,EAAWrF,EAAM1B,EAAS,OAAO,EACjCgH,EAAYhH,EAAS,OAAO,OAASA,EAAS,OAAO,EAAI2B,EAE/D3B,EAAS,OAAO,cAAc,CAC5B,EAAGgH,EAAYH,EAAW7G,EAAS,OAAO,EAAI2B,EAC9C,MAAOoF,EAAWF,EAAW7G,EAAS,OAAO,MAAQ+G,EACrD,OAAQC,EAAYH,EAAW7G,EAAS,OAAO,OAASgH,CAAA,CACzD,EACYC,YAGNjH,EAAS,kBAAoB,KAAM,CAC1C,MAAM+G,EAAW/G,EAAS,OAAO,MAAQA,EAAS,OAAO,EAAI0B,EAE7D1B,EAAS,OAAO,cAAc,CAC5B,EAAG+G,EAAWF,EAAW7G,EAAS,OAAO,EAAI0B,EAC7C,MAAOqF,EAAWF,EAAW7G,EAAS,OAAO,MAAQ+G,CAAA,CACtD,EACYE,YAGNjH,EAAS,kBAAoB,KAAM,CACpC,MAAA+G,EAAWrF,EAAM1B,EAAS,OAAO,EAEvCA,EAAS,OAAO,cAAc,CAC5B,MAAO+G,EAAWF,EAAW7G,EAAS,OAAO,MAAQ+G,CAAA,CACtD,EACYE,YAGNjH,EAAS,kBAAoB,KAAM,CAC1C,MAAM+G,EAAW/G,EAAS,OAAO,MAAQA,EAAS,OAAO,EAAI0B,EACvDsF,EAAYrF,EAAM3B,EAAS,OAAO,EAExCA,EAAS,OAAO,cAAc,CAC5B,EAAG+G,EAAWF,EAAW7G,EAAS,OAAO,EAAI0B,EAC7C,MAAOqF,EAAWF,EAAW7G,EAAS,OAAO,MAAQ+G,EACrD,OAAQC,EAAYH,EAAW7G,EAAS,OAAO,OAASgH,CAAA,CACzD,EACYC,YAGNjH,EAAS,kBAAoB,KAAM,CACpC,MAAAgH,EAAYrF,EAAM3B,EAAS,OAAO,EAExCA,EAAS,OAAO,cAAc,CAC5B,OAAQgH,EAAYH,EAAW7G,EAAS,OAAO,OAASgH,CAAA,CACzD,EACYC,YAGNjH,EAAS,kBAAoB,KAAM,CACpC,MAAA+G,EAAWrF,EAAM1B,EAAS,OAAO,EACjCgH,EAAYrF,EAAM3B,EAAS,OAAO,EAExCA,EAAS,OAAO,cAAc,CAC5B,MAAO+G,EAAWF,EAAW7G,EAAS,OAAO,MAAQ+G,EACrD,OAAQC,EAAYH,EAAW7G,EAAS,OAAO,OAASgH,CAAA,CACzD,EAEYC,IAEZjH,EAAS,OAAO,OAAS,OACrB,KAAA,KAAK,cAAeA,EAAS,MAAM,EAEnC,KAAA,KAAK,cAAeA,EAAS,MAAM,EAK1C,SAASiH,GAAe,CAEtB,GAAI,CAACJ,EAAU,OACTN,EAAA,QAAQ,IAAIvG,EAAS,OAAO,EAAE,EAAE,cAAcA,EAAS,MAAM,EAEnE,MAAMkH,EAAUX,EAAM,mBAAmB,IAAIvG,EAAS,OAAO,EAAE,EAE5D,CAAA,GAAGkH,EAAQ,KAAM,GAAGA,EAAQ,EAAE,EAAE,QAAS3S,GAAS,CAE3C,MAAA4S,EAAW5S,EAAK,OAASA,EAAK,GAC9BqM,EAAMsG,EAAQ,KAAK,IAAI3S,CAAI,EAAI,EAAIA,EAAK,IAAI,OAAS,EAC/C4S,GAAAC,EAAe7S,EAAMqM,CAAG,EACzBuG,EAAAZ,EAAM,gBAAgBhS,EAAMyL,EAAUA,EAAS,MAAM,EAAIuG,EAAM,oBAAoBhS,EAAMyL,CAAQ,CAAA,CAC7G,EAIM,SAAAoH,EAAe7S,EAAMqM,EAAK,CAE7BrM,EAAK,IAAIqM,CAAG,EAAE,IAAMkG,EAAmB,GACzCvS,EAAK,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAClCzL,EAAK,IAAIqM,CAAG,EAAE,EAAIrM,EAAK,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAAIA,EAAS,OAAO,EAAI,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAAIA,EAAS,OAAO,OAASA,EAAS,OAAO,EAAIA,EAAS,OAAO,OAAS,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,GAGvMrM,EAAK,IAAIqM,CAAG,EAAE,IAAMkG,EAAmB,EAAIA,EAAmB,OAChEvS,EAAA,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAAIA,EAAS,OAAO,MACtDzL,EAAK,IAAIqM,CAAG,EAAE,EAAIrM,EAAK,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAAIA,EAAS,OAAO,EAAI,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAAIA,EAAS,OAAO,OAASA,EAAS,OAAO,EAAIA,EAAS,OAAO,OAAS,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,GAGvMrM,EAAK,IAAIqM,CAAG,EAAE,IAAMkG,EAAmB,GAC9CvS,EAAK,IAAIqM,CAAG,EAAE,EAAIrM,EAAK,IAAIqM,CAAG,EAAE,GAAKZ,EAAS,OAAO,EAAIA,EAAS,OAAO,EAAI,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,GAAKZ,EAAS,OAAO,EAAIA,EAAS,OAAO,MAAQA,EAAS,OAAO,EAAIA,EAAS,OAAO,MAAQ,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,EAC9MrM,EAAK,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,GAG3BzL,EAAK,IAAIqM,CAAG,EAAE,IAAMkG,EAAmB,EAAIA,EAAmB,SACrEvS,EAAK,IAAIqM,CAAG,EAAE,EAAIrM,EAAK,IAAIqM,CAAG,EAAE,GAAKZ,EAAS,OAAO,EAAIA,EAAS,OAAO,EAAI,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,GAAKZ,EAAS,OAAO,EAAIA,EAAS,OAAO,MAAQA,EAAS,OAAO,EAAIA,EAAS,OAAO,MAAQ,EAAIzL,EAAK,IAAIqM,CAAG,EAAE,EACzMrM,EAAA,IAAIqM,CAAG,EAAE,EAAIZ,EAAS,OAAO,EAAIA,EAAS,OAAO,OAE1D,CACF,CACF,CAGA,sBAAsBqH,EAAYC,EAAW,CAC3C,IAAIzK,EAAM,CAAA,EACV,OAAQyK,EAAW,CACjB,IAAK,IACGzK,EAAA,CACJ,MAAO,CACL,EAAGwK,EAAW,EACd,EAAGA,EAAW,CAChB,EACA,IAAK,CACH,EAAGA,EAAW,EAAIA,EAAW,MAC7B,EAAGA,EAAW,CAChB,CAAA,EAEF,MACF,IAAK,IACGxK,EAAA,CACJ,MAAO,CACL,EAAGwK,EAAW,EACd,EAAGA,EAAW,EAAIA,EAAW,MAC/B,EACA,IAAK,CACH,EAAGA,EAAW,EAAIA,EAAW,MAC7B,EAAGA,EAAW,EAAIA,EAAW,MAC/B,CAAA,EAEF,MACF,IAAK,IACGxK,EAAA,CACJ,MAAO,CACL,EAAGwK,EAAW,EACd,EAAGA,EAAW,CAChB,EACA,IAAK,CACH,EAAGA,EAAW,EACd,EAAGA,EAAW,EAAIA,EAAW,MAC/B,CAAA,EAEF,MACF,IAAK,IACGxK,EAAA,CACJ,MAAO,CACL,EAAGwK,EAAW,EAAIA,EAAW,MAC7B,EAAGA,EAAW,CAChB,EACA,IAAK,CACH,EAAGA,EAAW,EAAIA,EAAW,MAC7B,EAAGA,EAAW,EAAIA,EAAW,MAC/B,CAAA,EAEF,KACJ,CACO,OAAAxK,CACT,CAGA,gBAAgB0K,EAAUvH,EAAUS,EAAY,CACxC,MAAA+G,EAAYD,EAAS,IAAI,OAAS,EAClCE,EAAW,CAAE,EAAGhH,EAAW,EAAIT,EAAS,OAAO,EAAG,EAAGS,EAAW,EAAIT,EAAS,OAAO,CAAE,EAEtFkG,EAAW,KAAK,QAAQ,IAAIqB,EAAS,IAAI,EACzCpB,EAAS,KAAK,QAAQ,IAAIoB,EAAS,EAAE,EACrCnB,EAAe,KAAK,mBAAmBF,EAAUqB,EAAS,IAAI,CAAC,CAAC,EAChElB,EAAa,KAAK,mBAAmBF,EAAQoB,EAAS,IAAIC,CAAS,CAAC,GAGtE,CAACpB,GAAgB,CAACC,IAAiB,KAAA,WAAW,CAACkB,CAAQ,CAAC,EAE5D,MAAMG,EAAmB1H,EAAS,OAAO,KAAOkG,EAAS,GAiBzD,GAdIwB,GAEFH,EAAS,IAAI,CAAC,EAAE,EAAI9G,EAAW,GAAK8G,EAAS,IAAI,CAAC,EAAE,EAAIvH,EAAS,OAAO,GACxEuH,EAAS,IAAI,CAAC,EAAE,EAAI9G,EAAW,GAAK8G,EAAS,IAAI,CAAC,EAAE,EAAIvH,EAAS,OAAO,KAKxEuH,EAAS,IAAIC,CAAS,EAAE,EAAI/G,EAAW,GAAK8G,EAAS,IAAIC,CAAS,EAAE,EAAIxH,EAAS,OAAO,GACxFuH,EAAS,IAAIC,CAAS,EAAE,EAAI/G,EAAW,GAAK8G,EAAS,IAAIC,CAAS,EAAE,EAAIxH,EAAS,OAAO,IAKtFwH,IAAc,EAChBD,EAAS,IAAI,OAAO,EAAG,EAAG,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,CAAK,EAAA,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,CAAG,CAAA,UAGjHC,IAAc,EACjB,GAAApB,IAAiB,KAAOC,IAAe,IAAK,CAE1C,GAAA,KAAK,sBAAsBF,EAAQ,GAAG,EAAE,MAAM,EAAIoB,EAAS,IAAI,CAAC,EAAE,EACpEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,OAG1D,CACG,MAAAI,EAAQ,KAAK,sBAAsBzB,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EACpNoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGI,GAASD,EAAmB,EAAID,EAAS,GAAI,EAAGF,EAAS,IAAI,CAAC,EAAE,EAAIE,EAAS,GAC3FF,EAAA,IAAI,OAAO,CAAC,EAInBA,EAAS,IAAI,CAAC,GAAKA,EAAS,IAAI,CAAC,EAAE,GAAKA,EAAS,IAAI,CAAC,EAAE,IAC1DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,EAAG,EAAGrB,EAAS,GAAKwB,EAAmBD,EAAS,EAAI,IAC/FF,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GACpDA,EAAA,IAAI,OAAO,CAAC,QAGhBnB,IAAiB,KAAOC,IAAe,KAC1CH,EAAS,EAAIA,EAAS,OAASqB,EAAS,IAAI,CAAC,EAAE,EACjDA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAIzD,CAAC,YAAa,WAAW,EAAE,SAASrB,EAAS,IAAI,GACnDqB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAG,KAAK,IAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,EAAG,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,CAAC,EAAI,EAAG,EACtJoB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGpB,EAAO,EAAI,KAAK,MAAMA,EAAO,MAAQ,CAAC,GAAKuB,EAAmB,EAAID,EAAS,GAAI,EAAGF,EAAS,IAAI,CAAC,EAAE,CAAE,EAClHA,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAG,KAAK,sBAAsBpB,EAAQ,GAAG,EAAE,MAAM,GAAKuB,EAAmB,EAAID,EAAS,MAEvHF,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGrB,EAAS,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAAI,EAAGF,EAAS,IAAI,CAAC,EAAE,GAC9GA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GACpDA,EAAA,IAAI,OAAO,CAAC,GAIrBA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,EAAIA,EAAO,QACxCoB,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,GAAKnG,EAAS,OAAO,KAAOmG,EAAO,GAAKsB,EAAS,EAAI,GACvEF,EAAA,IAAI,OAAO,CAAC,IAGhBnB,IAAiB,KAAOC,IAAe,KAE1C,KAAK,sBAAsBF,EAAQ,GAAG,EAAE,MAAM,EAAIoB,EAAS,IAAI,CAAC,EAAE,EACpEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,IAIpDA,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGpB,EAAO,EAAIA,EAAO,OAASnG,EAAS,OAAO,KAAOmG,EAAO,GAAKsB,EAAS,EAAI,GAAI,EAAGF,EAAS,IAAI,CAAC,EAAE,CAAE,EAClHA,EAAA,IAAI,OAAO,CAAC,GAGnBA,EAAS,IAAI,CAAC,EAAE,GAAKvH,EAAS,OAAO,GAAK,KAAK,sBAAsBmG,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBD,EAAU,GAAG,EAAE,MAAM,IACrIqB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,GAAKG,EAAmBD,EAAS,EAAI,GAAK,EAAG,EAAGvB,EAAS,GAAKwB,EAAmBD,EAAS,EAAI,EAAG,EACxIF,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GACpDA,EAAA,IAAI,OAAO,CAAC,IAGhBnB,IAAiB,KAAOC,IAAe,KAC9CkB,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EACpCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAChCA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,IAC7BoB,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,GAAKnG,EAAS,OAAO,KAAOmG,EAAO,GAAKsB,EAAS,EAAI,GACvEF,EAAA,IAAI,OAAO,CAAC,GAEnBA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IAClC,CAAC,YAAa,WAAW,EAAE,SAASrB,EAAS,IAAI,GACnDqB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAG,KAAK,IAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,EAAG,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,CAAC,EAAI,EAAG,EACtJoB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGpB,EAAO,EAAI,KAAK,MAAMA,EAAO,MAAQ,CAAC,GAAKuB,EAAmB,EAAID,EAAS,GAAI,EAAGF,EAAS,IAAI,CAAC,EAAE,CAAE,EAClHA,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAG,KAAK,sBAAsBpB,EAAQ,GAAG,EAAE,MAAM,GAAKuB,EAAmB,EAAID,EAAS,MAEhIF,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAC3HF,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAClHF,EAAA,IAAI,OAAO,EAAG,CAAC,KAIrBnB,IAAiB,KAAOC,IAAe,KAC9CkB,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EACpCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAChCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACtCA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAClHF,EAAA,IAAI,OAAO,EAAG,CAAC,GAEtBA,EAAS,IAAI,CAAC,GAAKA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACrD,CAAC,YAAa,WAAW,EAAE,SAASpB,EAAO,IAAI,GACjDoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGrB,EAAS,EAAI,KAAK,MAAMA,EAAS,MAAQ,CAAC,EAAG,EAAGA,EAAS,GAAKwB,EAAmBD,EAAS,EAAI,IACrHF,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,IACjEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAC7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGpB,EAAO,GAAKuB,EAAmB,EAAID,EAAS,MAEhFF,EAAA,IAAI,CAAC,EAAE,EAAIpB,EAAO,GAAKuB,EAAmB,EAAID,EAAS,GACvDF,EAAA,IAAI,CAAC,EAAE,EAAIpB,EAAO,GAAKuB,EAAmB,EAAID,EAAS,GACvDF,EAAA,IAAI,OAAO,CAAC,KAIlBnB,IAAiB,KAAOC,IAAe,KAC9CkB,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EACpCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAChCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACtCA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBpB,EAAQ,GAAG,EAAE,MAAM,GAAKnG,EAAS,OAAO,KAAOmG,EAAO,GAAKsB,EAAS,EAAI,GAC9GF,EAAA,IAAI,OAAO,CAAC,GAEnBA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACtCA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GACpFF,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAC3EF,EAAA,IAAI,OAAO,EAAG,CAAC,IAGnBnB,IAAiB,KAAOC,IAAe,KAC9CkB,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EACpCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAChCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACtCA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBpB,EAAQ,GAAG,EAAE,MAAM,GAAKnG,EAAS,OAAO,KAAOmG,EAAO,GAAKsB,EAAS,EAAI,GAC9GF,EAAA,IAAI,OAAO,CAAC,GAEnBA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACtCA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAClHF,EAAA,IAAI,OAAO,EAAG,CAAC,IAGnBnB,IAAiB,KAAOC,IAAe,MAC9CkB,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EACpCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAChCA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IAClC,CAAC,YAAa,WAAW,EAAE,SAASpB,EAAO,IAAI,GACjDoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGrB,EAAS,EAAI,KAAK,MAAMA,EAAS,MAAQ,CAAC,EAAG,EAAGA,EAAS,GAAKwB,EAAmBD,EAAS,EAAI,IACrHF,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,IACjEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAC7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGpB,EAAO,GAAKuB,EAAmB,EAAID,EAAS,MAEzFF,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBpB,EAAQ,GAAG,EAAE,MAAM,GAAKnG,EAAS,OAAO,KAAOmG,EAAO,GAAKsB,EAAS,EAAI,GAC9GF,EAAA,IAAI,OAAO,CAAC,IAGrBA,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,IACtCA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,GAAKlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAClHF,EAAA,IAAI,OAAO,EAAG,CAAC,YAKrBC,IAAc,EAAG,CACxB,MAAM/H,EAAU,KAAK,MAAM,KAAK,IAAI8H,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAIC,CAAS,EAAE,CAAC,EAAI,CAAC,EAChF9H,EAAU,KAAK,MAAM,KAAK,IAAI6H,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAIC,CAAS,EAAE,CAAC,EAAI,CAAC,EAElF,GAAApB,IAAiB,KAAOC,IAAe,IAGzC,GAAI,KAAK,sBAAsBH,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,EAEhG,GAAA,KAAK,sBAAsBD,EAAU,GAAG,EAAE,MAAM,EAAIqB,EAAS,IAAI,CAAC,EAAE,EAAG,CACzE,MAAMK,EAAYL,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,EAAIA,EAAO,OAASoB,EAAS,IAAI,CAAC,EAAE,EAExEA,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGK,CAAU,EAC9CL,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGK,CAAU,MAIpD,CACH,MAAMC,EAAQ3B,EAAS,EAAIA,EAAS,MAAQqB,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,EAAIA,EAAS,EAAIA,EAAS,MAC7F0B,EAAYL,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,EAAIA,EAAO,OAASoB,EAAS,IAAI,CAAC,EAAE,EACjFA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGM,GAAS7H,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,GAAI,EAAGG,GAChFL,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGK,CAAU,EACvDL,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAEpDA,EAAA,IAAI,OAAO,CAAC,MAKnB,CAAC,YAAa,WAAW,EAAE,SAASrB,EAAS,IAAI,GACnDqB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGrB,EAAS,EAAIA,EAAS,OAAS,IAC5EqB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,KAG7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,QACjEqB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,OAAOrB,EAAS,EAAIC,EAAO,EAAIA,EAAO,QAAU,CAAC,CAAE,EAChHoB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,OAAOrB,EAAS,EAAIC,EAAO,EAAIA,EAAO,QAAU,CAAC,CAAE,WAGpHC,IAAiB,KAAOC,IAAe,IAE5CH,EAAS,EAAIA,EAAS,OAASC,EAAO,GACxCoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI7H,GACjE6H,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI7H,IAG1DwG,EAAS,EAAIA,EAAS,QAAUC,EAAO,IAC1C,CAAC,YAAa,WAAW,EAAE,SAASA,EAAO,IAAI,GACjDoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,QAC1EqB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,IACjEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,KAG7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGpB,EAAO,EAAIA,EAAO,OAAS,IACxEoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGpB,EAAO,EAAIA,EAAO,OAAS,IACxEoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,kBAGnEC,IAAiB,KAAOC,IAAe,IAChD,GAAI,CAAC,YAAa,WAAW,EAAE,SAASH,EAAS,IAAI,GAAK,CAAC,YAAa,WAAW,EAAE,SAASC,EAAO,IAAI,EAAG,CAC1G,IAAI/N,EAAImP,EAAS,IAAI,CAAC,EAAE,EAAIE,EAAS,EAAI,KAAK,IAAIvB,EAAS,EAAGC,EAAO,CAAC,EAAI,GAAK,KAAK,IAAID,EAAS,EAAGC,EAAO,CAAC,EAAI,GAAKoB,EAAS,IAAI,CAAC,EAAE,EAAIE,EAAS,EACzIF,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAAnP,CAAK,EACtCmP,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAAnP,CAAK,OAExCmP,EAAS,IAAI,CAAC,EAAE,EAAIvH,EAAS,OAAO,GAC3CuH,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAC7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,KAG7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,QACjEqB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAG,KAAK,IAAIrB,EAAS,EAAIA,EAAS,OAAQC,EAAO,EAAIA,EAAO,MAAM,EAAI,IACvGoB,EAAA,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAG,KAAK,IAAIrB,EAAS,EAAIA,EAAS,OAAQC,EAAO,EAAIA,EAAO,MAAM,EAAI,IAChHoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,cAEjEC,IAAiB,KAAOC,IAAe,IAC5CH,EAAS,EAAIC,EAAO,EAAIA,EAAO,QACjCoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI7H,GACjE6H,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI7H,IAG1DwG,EAAS,GAAKC,EAAO,EAAIA,EAAO,SACvC,QAAQ,IAAI,MAAM,EAClBoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,QAC1EqB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,IACjEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,KAE1DnB,IAAiB,KAAOC,IAAe,KAE5CrG,EAAS,OAAO,KAAOmG,EAAO,IAChCoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAG9G,EAAW,GAAK0F,EAAO,EAAIoB,EAAS,IAAI,CAAC,EAAE,GAAI,EAAGA,EAAS,IAAI,CAAC,EAAE,GACzFA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,IAI7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAG3DA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,GAAKqB,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,EAAIA,EAAS,QAErEqB,EAAA,IAAI,OAAO,EAAG,CAAC,EACtB,EAAAA,EAAS,IAAI,CAAC,EAAE,EAClBA,EAAS,IAAI,CAAC,EAAE,GAAKA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,IAAMlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,KAIlPrB,IAAiB,KAAOC,IAAe,IAC5CH,EAAS,EAAIC,EAAO,EAAIA,EAAO,OACjCoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI9H,EAAS,EAAG8H,EAAS,IAAI,CAAC,EAAE,GACvEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,KAI7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,MAAO,EAAGqB,EAAS,IAAI,CAAC,EAAE,GAC9EA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,GAAI,EAAGA,EAAS,IAAI,CAAC,EAAE,GAClEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI,GAAI,EAAGA,EAAS,IAAI,CAAC,EAAE,IAE3DnB,IAAiB,KAAOC,IAAe,IAE5CH,EAAS,EAAIA,EAAS,MAAQC,EAAO,GACvCoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI9H,EAAS,EAAG8H,EAAS,IAAI,CAAC,EAAE,GACvEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAI9H,EAAS,EAAG8H,EAAS,IAAI,CAAC,EAAE,KAEvEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,MAAQ,GAAI,EAAGoB,EAAS,IAAI,CAAC,EAAE,GACjFA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,MAAQ,GAAI,EAAGoB,EAAS,IAAI,CAAC,EAAE,GACjFA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIpB,EAAO,MAAO,EAAGoB,EAAS,IAAI,CAAC,EAAE,IAErEnB,IAAiB,KAAOC,IAAe,MAE5CrG,EAAS,OAAO,KAAOmG,EAAO,IAChCoB,EAAS,IAAI,CAAC,EAAI,CAAE,EAAG9G,EAAW,GAAK0F,EAAO,EAAIoB,EAAS,IAAI,CAAC,EAAE,GAAI,EAAGA,EAAS,IAAI,CAAC,EAAE,GACzFA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,IAI7DA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAG3DA,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,GAAKqB,EAAS,IAAI,CAAC,EAAE,EAAIrB,EAAS,EAAIA,EAAS,QAErEqB,EAAA,IAAI,OAAO,EAAG,CAAC,EACtB,EAAAA,EAAS,IAAI,CAAC,EAAE,EAClBA,EAAS,IAAI,CAAC,EAAE,GAAKA,EAAS,IAAI,CAAC,EAAE,EAAI,KAAK,sBAAsBrB,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,IAAMlG,EAAS,OAAO,KAAOkG,EAAS,GAAKuB,EAAS,EAAI,KAK1P,KAAA,KAAK,YAAaF,CAAQ,CACjC,CAGA,oBAAoBA,EAAUvH,EAAU,CAMhC,MAAA8H,EAAUP,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAC9CQ,EAAUR,EAAS,IAAI,CAAC,EAAE,EAAIA,EAAS,IAAI,CAAC,EAAE,EAEpDA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGvH,EAAS,OAAO,EAAIA,EAAS,OAAO,MAAO,EAAGA,EAAS,OAAO,EAAIA,EAAS,OAAO,OAAS,IAClHuH,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGvH,EAAS,OAAO,EAAIA,EAAS,OAAO,MAAQ,GAAM,EAAGA,EAAS,OAAO,EAAIA,EAAS,OAAO,QAChHuH,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIO,EAAS,EAAGP,EAAS,IAAI,CAAC,EAAE,GACvEA,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAIQ,GACjER,EAAS,IAAI,CAAC,EAAI,CAAE,EAAGA,EAAS,IAAI,CAAC,EAAE,EAAG,EAAGA,EAAS,IAAI,CAAC,EAAE,GAExD,KAAA,KAAK,YAAaA,CAAQ,CACjC,CAGA,gBAAgBvH,EAAUgI,EAAU,OAC9B,IAAA9B,EAAUC,EAAQ8B,EAAQ,EAAGC,EAAWlI,EAAS,OAAO,IAAKwH,EAAYU,EAAS,OAAS,EAe/F,IAbKzkB,EAAA,KAAA,MAAM,gBAAN,MAAAA,EAAqB,QAAgB8Q,GAAA,CACpCA,EAAK,MAAQyL,EAAS,OAAO,OACpBkG,EAAA3R,EACX0T,KAEE1T,EAAK,MAAQyL,EAAS,OAAO,KACtBmG,EAAA5R,EACT0T,IAEe,GAIf,CAAC,YAAa,WAAW,EAAE,SAAS/B,EAAS,IAAI,GAMnD,GAJIlG,EAAS,0BAA4B,GAAMkI,EAASlI,EAAS,uBAAuB,EAAE,IAAMkI,EAASlI,EAAS,wBAA0B,CAAC,EAAE,IAAO,KAAK,sBAAsBkG,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,IAEnRhI,EAAS,0BAA4B,GAAMkI,EAASlI,EAAS,uBAAuB,EAAE,IAAMkI,EAASlI,EAAS,wBAA0B,CAAC,EAAE,GAAO,KAAK,sBAAsBkG,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,GAEhNhI,EAAS,0BAA4B,GAAMkI,EAASlI,EAAS,uBAAuB,EAAE,IAAMkI,EAASlI,EAAS,wBAA0B,CAAC,EAAE,IAAO,KAAK,sBAAsBmG,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,GAAI,eAGhR,CAAC,YAAa,WAAW,EAAE,SAAS7B,EAAO,IAAI,IAElDqB,IAAc,GAEdA,IAAc,GAAKxH,EAAS,0BAA4B,GAExDwH,IAAc,GAAKxH,EAAS,0BAA4B,GAAK,KAAK,sBAAsBmG,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAExHR,IAAc,GAAKxH,EAAS,0BAA4B,GAExDwH,IAAc,GAAKxH,EAAS,0BAA4B,GAAK,KAAK,sBAAsBmG,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAExHR,IAAc,GAAKxH,EAAS,0BAA4B,IAAM,KAAK,sBAAsBkG,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,IAAI,OAIrMR,IAAc,EAEZU,EAAS,CAAC,EAAE,IAAMA,EAAS,CAAC,EAAE,GAEvBA,EAAA,CAAC,EAAE,EAAIF,EAAS,EAChBE,EAAA,CAAC,EAAE,EAAIF,EAAS,GAErB,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,KACjIE,EAAS,CAAC,EAAE,EAAIhC,EAAS,EAAIA,EAAS,MAAQ,EACrCgC,EAAA,QAAQ,CAAE,EAAGhC,EAAS,EAAIA,EAAS,MAAQ,EAAG,EAAG,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,EAAI9B,EAAS,EAAIA,EAAS,EAAIA,EAAS,MAAQ,CAAA,IAEpK,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,KACpHE,EAAAA,EAAS,OAAS,CAAC,EAAE,EAAI/B,EAAO,EAAIA,EAAO,MAAQ,EACnD+B,EAAA,KAAK,CAAE,EAAG/B,EAAO,EAAIA,EAAO,MAAQ,EAAG,EAAG,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,EAAI7B,EAAO,EAAIA,EAAO,EAAIA,EAAO,MAAQ,CAAA,KAMhJ+B,EAAA,CAAC,EAAE,EAAIF,EAAS,EAChBE,EAAA,CAAC,EAAE,EAAIF,EAAS,GAEpB,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,KAClIE,EAAS,CAAC,EAAE,EAAIhC,EAAS,EAAIA,EAAS,OAAS,EACtCgC,EAAA,QAAQ,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,EAAI9B,EAAS,EAAIA,EAAS,MAAQA,EAAS,EAAG,EAAGA,EAAS,EAAIA,EAAS,OAAS,CAAG,CAAA,IAEpK,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,KACpHE,EAAAA,EAAS,OAAS,CAAC,EAAE,EAAI/B,EAAO,EAAIA,EAAO,OAAS,EACpD+B,EAAA,KAAK,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,EAAI7B,EAAO,EAAIA,EAAO,MAAQA,EAAO,EAAG,EAAGA,EAAO,EAAIA,EAAO,OAAS,CAAG,CAAA,IAMpJqB,IAAc,EAEjBU,EAASlI,EAAS,uBAAuB,EAAE,IAAMkI,EAASlI,EAAS,wBAA0B,CAAC,EAAE,GAClGkI,EAASlI,EAAS,uBAAuB,EAAE,EAAIgI,EAAS,EACxDE,EAASlI,EAAS,wBAA0B,CAAC,EAAE,EAAIgI,EAAS,GAEvD,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,IAAMhI,EAAS,0BAA4B,IAC7KkI,EAASlI,EAAS,uBAAuB,EAAE,EAAIkG,EAAS,EAAIA,EAAS,MAAQ,EACpEgC,EAAA,QAAQ,CAAE,EAAGhC,EAAS,EAAIA,EAAS,MAAQ,EAAG,EAAG,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,EAAI9B,EAAS,EAAIA,EAAS,EAAIA,EAAS,MAAQ,CAAA,IAGnK,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,IAAMhI,EAAS,0BAA4B,IAChKkI,EAAAlI,EAAS,wBAA0B,CAAC,EAAE,EAAImG,EAAO,EAAIA,EAAO,MAAQ,EACpE+B,EAAA,KAAK,CAAE,EAAG/B,EAAO,EAAIA,EAAO,MAAQ,EAAG,EAAG,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,EAAI7B,EAAO,EAAIA,EAAO,EAAIA,EAAO,MAAQ,CAAA,GAGrJnG,EAAS,0BAA4B,GAAK,KAAK,sBAAsBkG,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,IAElKE,EAAA,OAAO,EAAG,CAAC,EACXA,EAAA,CAAC,EAAE,EAAI/B,EAAO,EAAID,EAAS,EAAIA,EAAS,EAAIA,EAAS,MAAQA,EAAS,GAG7ElG,EAAS,0BAA4B,GAAK,KAAK,sBAAsBmG,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,IAEvKE,EAAS,OAAOA,EAAS,OAAS,EAAG,CAAC,EACtCA,EAASA,EAAS,OAAS,CAAC,EAAE,EAAIhC,EAAS,EAAIC,EAAO,EAAIA,EAAO,EAAIA,EAAO,MAAQA,EAAO,KAK7F+B,EAASlI,EAAS,uBAAuB,EAAE,EAAIgI,EAAS,EACxDE,EAASlI,EAAS,wBAA0B,CAAC,EAAE,EAAIgI,EAAS,GAEvD,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,IAAMhI,EAAS,0BAA4B,IAE7KkI,EAASlI,EAAS,uBAAuB,EAAE,EAAIkG,EAAS,EAAIA,EAAS,OAAS,EACrEgC,EAAA,QAAQ,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,EAAI9B,EAAS,EAAIA,EAAS,EAAIA,EAAS,MAAO,EAAGA,EAAS,EAAIA,EAAS,OAAS,CAAG,CAAA,IAGnK,KAAK,sBAAsBC,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,IAAMhI,EAAS,0BAA4B,IAEhKkI,EAAAlI,EAAS,wBAA0B,CAAC,EAAE,EAAImG,EAAO,EAAIA,EAAO,OAAS,EACrE+B,EAAA,KAAK,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,EAAI7B,EAAO,EAAIA,EAAO,EAAIA,EAAO,MAAO,EAAGA,EAAO,EAAIA,EAAO,OAAS,CAAG,CAAA,GAGrJnG,EAAS,0BAA4B,GAAK,KAAK,sBAAsBkG,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,GAAK,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI8B,EAAS,IAElKE,EAAA,OAAO,EAAG,CAAC,EACXA,EAAA,CAAC,EAAE,EAAI/B,EAAO,EAAID,EAAS,EAAIA,EAAS,EAAIA,EAAS,OAASA,EAAS,GAG9ElG,EAAS,0BAA4B,GAAK,KAAK,sBAAsBmG,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,GAAK,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI6B,EAAS,IAEvKE,EAAS,OAAOA,EAAS,OAAS,EAAG,CAAC,EACtCA,EAASA,EAAS,OAAS,CAAC,EAAE,EAAIhC,EAAS,EAAIC,EAAO,EAAIA,EAAO,EAAIA,EAAO,OAASA,EAAO,IAKzFqB,IAAc,IAEjBU,EAASlI,EAAS,uBAAuB,EAAE,IAAMkI,EAASlI,EAAS,wBAA0B,CAAC,EAAE,GAClGkI,EAASlI,EAAS,uBAAuB,EAAE,EAAIgI,EAAS,EACxDE,EAASlI,EAAS,wBAA0B,CAAC,EAAE,EAAIgI,EAAS,EAExDhI,EAAS,0BAA4B,EAEnCmI,EAAkBD,CAAQ,EAExBA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,GAClEgC,EAAS,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,MAAQ,EAAG,EAAGA,EAAS,GAC9FgC,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,CAAE,EAC5CA,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAC7H+B,EAAS,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,MAAQ,EAAG,EAAG6B,EAAS,GACnGE,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,CAAE,IAEtM+B,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAG,EAAG6B,EAAS,CAAE,EACtME,EAAS,OAAO,CAAC,IAIZA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,IAC9DgC,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,MAAQ,EAAG,EAAG,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,GACrIgC,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,CAAE,EAC5CA,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAC7H+B,EAAS,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,MAAQ,EAAG,EAAG6B,EAAS,GACnGE,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,CAAE,IAEtM+B,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAG,EAAG6B,EAAS,CAAE,EACtME,EAAS,OAAO,CAAC,IAMjBF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GACtDgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EACvDgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,GACvD8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,IAC7DgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EACvDgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,GAK7DlG,EAAS,0BAA4BkI,EAAS,OAAS,EAE1DC,EAAkBD,CAAQ,EAExBA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,GAChE+B,EAAS,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,MAAQ,EAAG,EAAGA,EAAO,GACxF+B,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,CAAE,EAC5CA,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GACjIgC,EAAS,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,MAAQ,EAAG,EAAG8B,EAAS,GACvGE,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,CAAE,IAE5MgC,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAG,EAAG8B,EAAS,CAAE,EACnME,EAAA,OAAO,EAAG,CAAC,IAIfA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,IAC5D+B,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,MAAQ,EAAG,EAAG,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,GAC/H+B,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,CAAE,EAC5CA,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GACjIgC,EAAS,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,MAAQ,EAAG,EAAG8B,EAAS,GACvGE,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAG,EAAGF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,CAAE,IAE5MgC,EAAS,CAAC,EAAI,CAAE,EAAGA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAG,EAAG8B,EAAS,CAAE,EACnME,EAAA,OAAO,EAAG,CAAC,IAMpBF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GACpD+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EACrD+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,GACrD6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,IAC3D+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EACrD+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,IAO9D6B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,IACxHgC,EAAA,OAAO,EAAG,CAAC,EACXA,EAAA,CAAC,EAAE,EAAIA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,GAGtL8B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,IAC7H+B,EAASA,EAAS,OAAS,CAAC,EAAE,EAAIA,EAASA,EAAS,OAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAC7M+B,EAAA,OAAOA,EAAS,OAAS,CAAC,MAMvCA,EAASlI,EAAS,uBAAuB,EAAE,EAAIgI,EAAS,EACxDE,EAASlI,EAAS,wBAA0B,CAAC,EAAE,EAAIgI,EAAS,EAGxDhI,EAAS,0BAA4B,EAGnCoI,EAAkBF,CAAQ,EAExBA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,GACzDgC,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAG,EAAG,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,OAAS,GACtIgC,EAAA,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,CAAE,EAC5CF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAC7H+B,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAG,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,OAAS,GACpG+B,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAG,EAAG+B,EAAS,CAAC,EAAE,CAAE,IAEtMA,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,CAAE,EACtM+B,EAAS,OAAO,CAAC,IAIZA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,IAC9DgC,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAG,EAAG,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,OAAS,GACtIgC,EAAA,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,CAAE,EAC5CF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAC7H+B,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAG,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,OAAS,GACpG+B,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAG,EAAG+B,EAAS,CAAC,EAAE,CAAE,IAEtMA,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,CAAE,EACtM+B,EAAS,OAAO,CAAC,IAMjBF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GACtDgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,EAC3DgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,GAC3D8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,IAC7DgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,EAC3DgC,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,GAKjElG,EAAS,0BAA4BkI,EAAS,OAAS,EAG1DE,EAAkBF,CAAQ,EAExBA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,GACvD+B,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAG,EAAG,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,OAAS,GAChI+B,EAAA,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,CAAE,EAE5CF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GACjIgC,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAG,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,OAAS,GACxGgC,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAG,EAAGgC,EAAS,CAAC,EAAE,CAAE,IAE5MA,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,CAAE,EACnMgC,EAAA,OAAO,EAAG,CAAC,IAIfA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,IAC5D+B,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAG,EAAG,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAIA,EAAO,OAAS,GAChI+B,EAAA,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,CAAE,EAE5CF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GACjIgC,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAG,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAIA,EAAS,OAAS,GACxGgC,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAG,EAAGgC,EAAS,CAAC,EAAE,CAAE,IAE5MA,EAAS,CAAC,EAAI,CAAE,EAAGF,EAAS,EAAG,EAAGE,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,CAAE,EACnMgC,EAAA,OAAO,EAAG,CAAC,IAMpBF,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GACpD+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,EACzD+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,GACzD6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,IAC3D+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,EACzD+B,EAAA,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,IAQlE6B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,GAAK8B,EAAS,EAAI,KAAK,sBAAsB9B,EAAU,GAAG,EAAE,MAAM,IACxHgC,EAAA,OAAO,EAAG,CAAC,EACXA,EAAA,CAAC,EAAE,EAAIA,EAAS,CAAC,EAAE,EAAI,KAAK,sBAAsBhC,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAU,GAAG,EAAE,MAAM,GAGtL8B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,GAAK6B,EAAS,EAAI,KAAK,sBAAsB7B,EAAQ,GAAG,EAAE,MAAM,IAC7H+B,EAASA,EAAS,OAAS,CAAC,EAAE,EAAIA,EAASA,EAAS,OAAS,CAAC,EAAE,EAAI,KAAK,sBAAsB/B,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAQ,GAAG,EAAE,MAAM,EAC7M+B,EAAA,OAAOA,EAAS,OAAS,CAAC,KAMrCA,EAAS,SAAW,GAAKA,EAAS,CAAC,EAAE,IAAMA,EAAS,CAAC,EAAE,GAAKA,EAAS,CAAC,EAAE,IAAMA,EAAS,CAAC,EAAE,GACnFA,EAAA,OAAO,EAAG,CAAC,GAMxB,SAASC,EAAkBD,EAAU,CACnC,IAAIG,EAAa,EACR,QAAArV,EAAI,EAAGsV,EAAMJ,EAAS,OAAS,EAAGlV,EAAIsV,EAAKtV,IACpCqV,GAAA,KAAK,IAAIH,EAASlV,CAAC,EAAE,EAAIkV,EAASlV,EAAI,CAAC,EAAE,CAAC,EAG1D,OAAOqV,IAAe,KAAK,IAAIH,EAAS,CAAC,EAAE,EAAIA,EAASA,EAAS,OAAS,CAAC,EAAE,CAAC,CAChF,CAEA,SAASE,EAAkBF,EAAU,CACnC,IAAIK,EAAc,EACT,QAAAvV,EAAI,EAAGsV,EAAMJ,EAAS,OAAS,EAAGlV,EAAIsV,EAAKtV,IACnCuV,GAAA,KAAK,IAAIL,EAASlV,CAAC,EAAE,EAAIkV,EAASlV,EAAI,CAAC,EAAE,CAAC,EAG3D,OAAOuV,IAAgB,KAAK,IAAIL,EAAS,CAAC,EAAE,EAAIA,EAASA,EAAS,OAAS,CAAC,EAAE,CAAC,CACjF,CAEK,KAAA,KAAK,YAAalI,EAAS,MAAM,CACxC,CAGA,QAAQwI,EAAa,CACnB,KAAK,mBAAqBA,EAC1B,KAAK,SAAW,SAClB,CAOA,aAAaC,EAAoBT,EAAU,CACzC,KAAM,CAAE,EAAA7P,EAAG,EAAAC,CAAA,EAAM,KAAK,SAAS4P,CAAQ,EAQhC,OANS,OAAO,OAAOS,EAAoB,CAChD,EAAAtQ,EAAG,EAAGC,EAAI,GACV,MAAO,GACP,OAAQ,EAAA,CACT,CAGH,CAMA,eAAe4P,EAAU,CACvB,MAAMpF,EAAO,KAAK,MAAa,KAAK,SAASoF,CAAQ,EAG5C,QAAAhV,EAAI,EAAGsV,EAAM1F,EAAK,cAAc,OAAQ5P,EAAIsV,EAAKtV,IAAK,CAC7D,MAAMqF,EAAI,OAAOuK,EAAK,cAAc5P,CAAC,EAAE,KAAK,GAAK,IAC3CJ,EAAI,OAAOgQ,EAAK,cAAc5P,CAAC,EAAE,MAAM,GAAK,GAC5CmF,EAAI,OAAOyK,EAAK,cAAc5P,CAAC,EAAE,CAAC,EAClCoF,EAAI,OAAOwK,EAAK,cAAc5P,CAAC,EAAE,CAAC,EAEpC,GAAAmF,EAAIA,GAAKA,EAAIE,EAAIF,GAAKC,EAAIA,GAAKA,EAAIxF,EAAIwF,EAClC,OAAAwK,EAAK,cAAc5P,CAAC,EAGjC,CAMA,SAASgV,EAAU,CACX,MAAAU,EAAe,KAAK,OAAO,aAAa,EACxCjE,EAAW,KAAK,OAAO,SACvB/C,EAAM,KAAK,OAAOsG,EAAS,EAAIU,EAAa,GAAKjE,CAAQ,EAAG9C,EAAM,KAAK,OAAOqG,EAAS,EAAIU,EAAa,GAAKjE,CAAQ,EAEpH,MAAA,CACL,EAAG/C,EACH,EAAGC,CAAA,CAEP,CAGA,QAAQgH,EAAU,CAChB,KAAK,SAAWA,CAClB,CAGA,SAAU,CACR,KAAK,SAAW,SAClB,CAGA,SAAU,CACR,KAAK,SAAW,SAClB,CAGA,UAAUC,EAAY,GAAI,QACnBnlB,EAAA,KAAA,cAAA,MAAAA,EAAa,QAAqB+c,GAAA,CACrCA,EAAU,OAASoI,CAAA,GAGrB,KAAK,OAAO,CACd,CAGA,YAAYrtB,EAAO6O,EAAM,QAClB3G,EAAA,KAAA,cAAA,MAAAA,EAAa,QAAqB+c,GAAA,CAEjCA,EAAU,WACRpW,IAAS,QACXoW,EAAUpW,CAAI,EAAI7O,EAElB,QAAQ,IAAI,oBAAoB,EAI3BilB,EAAU,OAAS,OAC1BA,EAAUpW,CAAI,EAAI7O,EAGXilB,EAAU,OAAS,SAC1BA,EAAU,MAAQjlB,EACpB,GAEF,KAAK,OAAO,CACd,CAOA,eAAeotB,EAAUE,EAAa,CACpC,IAAIC,EAAgB,KAAK,cACvBC,EAAoB,KAAK,sBAAsBD,EAAc,CAAC,EAAG,GAAG,EACpEE,EAAoB,KAAK,sBAAsBF,EAAc,CAAC,EAAG,GAAG,EAElEjM,EAAM,CAAA,EAEV,GAAIiM,EAAc,CAAC,EAAE,MAAQA,EAAc,CAAC,EAAE,IACxCjM,EAAA,CAAC,EAAI,CAAE,EAAGiM,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,MAAO,EAAGA,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,OAAS,IACzGjM,EAAA,CAAC,EAAI,CAAE,EAAGiM,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,MAAQ,GAAI,EAAGA,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,OAAS,IAC9GjM,EAAA,CAAC,EAAI,CAAE,EAAGiM,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,MAAQ,GAAI,EAAGA,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,OAAS,IAC9GjM,EAAA,CAAC,EAAI,CAAE,EAAGiM,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,MAAQ,GAAI,EAAGA,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,OAAS,IAC9GjM,EAAA,CAAC,EAAI,CAAE,EAAGiM,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,MAAQ,GAAI,EAAGA,EAAc,CAAC,EAAE,EAAIA,EAAc,CAAC,EAAE,gBAGlG,CAAC,YAAa,WAAW,EAAE,SAASA,EAAc,CAAC,EAAE,IAAI,EAE5DC,EAAkB,IAAI,EAAIC,EAAkB,MAAM,GACpDnM,EAAI,CAAC,EAAI,CAAE,EAAGkM,EAAkB,IAAI,EAAI,KAAK,MAAOD,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGC,EAAkB,IAAI,GACvGlM,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGA,EAAI,CAAC,EAAE,EAAI,KAAK,OAAOmM,EAAkB,MAAM,EAAID,EAAkB,IAAI,GAAK,CAAC,GAC1GlM,EAAI,CAAC,EAAI,CAAE,EAAGmM,EAAkB,MAAM,EAAI,KAAK,MAAOF,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGjM,EAAI,CAAC,EAAE,GAC1FA,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGmM,EAAkB,MAAM,CAAE,IAIrDnM,EAAI,CAAC,EAAI,CAAE,EAAGkM,EAAkB,IAAI,EAAI,KAAK,MAAOD,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGC,EAAkB,IAAI,GAC3GlM,EAAI,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAG,KAAK,IAAIkM,EAAkB,IAAI,EAAGC,EAAkB,MAAM,CAAC,EAAI,IAC1FnM,EAAI,CAAC,EAAI,CAAE,EAAGmM,EAAkB,MAAM,EAAI,KAAK,MAAOF,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGjM,EAAI,CAAC,EAAE,GAC1FA,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGmM,EAAkB,IAAI,CAAE,WAI9C,CAAC,YAAa,WAAW,EAAE,SAASF,EAAc,CAAC,EAAE,IAAI,EAE5DC,EAAkB,IAAI,EAAIC,EAAkB,MAAM,GACpDnM,EAAI,CAAC,EAAI,CAAE,EAAGkM,EAAkB,IAAI,EAAI,KAAK,MAAOD,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGC,EAAkB,IAAI,GACvGlM,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGA,EAAI,CAAC,EAAE,EAAI,KAAK,OAAOmM,EAAkB,MAAM,EAAID,EAAkB,IAAI,GAAK,CAAC,GAC1GlM,EAAI,CAAC,EAAI,CAAE,EAAGmM,EAAkB,MAAM,EAAI,KAAK,MAAOF,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGjM,EAAI,CAAC,EAAE,GAC1FA,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGmM,EAAkB,MAAM,CAAE,IAIrDnM,EAAI,CAAC,EAAI,CAAE,EAAGkM,EAAkB,IAAI,EAAI,KAAK,MAAOD,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGC,EAAkB,MAAM,GAC7GlM,EAAI,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAG,KAAK,IAAIkM,EAAkB,IAAI,EAAGC,EAAkB,MAAM,CAAC,EAAI,IAC1FnM,EAAI,CAAC,EAAI,CAAE,EAAGmM,EAAkB,MAAM,EAAI,KAAK,MAAOF,EAAc,CAAC,EAAE,MAAQ,CAAE,EAAG,EAAGjM,EAAI,CAAC,EAAE,GAC1FA,EAAA,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGmM,EAAkB,MAAM,CAAE,WAOnD,KAAK,sBAAsBF,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAEtH,IAAKE,EAAkB,MAAM,EAAID,EAAkB,IAAI,IAAMC,EAAkB,IAAI,EAAID,EAAkB,MAAM,GAAK,EAAG,CAErH,IAAI3Q,EAAI,KAAK,IAAI2Q,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,EAAI,KAAK,IAAI,KAAK,OAAO,KAAK,IAAID,EAAkB,IAAI,EAAGC,EAAkB,IAAI,CAAC,EAAI,KAAK,IAAID,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,GAAK,CAAC,CAAC,EAC/NnM,EAAI,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAA1Q,CAAK,EAC9EyE,EAAI,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAA1Q,CAAK,OAM1E2Q,EAAkB,MAAM,EAAIC,EAAkB,IAAI,GACpDnM,EAAI,CAAC,EAAI,CAAE,EAAGkM,EAAkB,MAAM,EAAI,KAAK,MAAMD,EAAc,CAAC,EAAE,MAAQ,CAAC,EAAG,EAAGC,EAAkB,MAAM,GAC7GlM,EAAI,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGmM,EAAkB,MAAM,EAAI,KAAK,MAAMF,EAAc,CAAC,EAAE,OAAS,CAAC,GACzFjM,EAAA,CAAC,EAAI,CAAE,EAAGmM,EAAkB,MAAM,EAAG,EAAGnM,EAAI,CAAC,EAAE,CAAE,IAIjDA,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAGC,EAAkB,MAAM,EAAI,KAAK,MAAMD,EAAc,CAAC,EAAE,OAAS,CAAC,CAAE,EAC5IjM,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAI,KAAK,MAAMA,EAAc,CAAC,EAAE,MAAQ,CAAC,EAAG,EAAGjM,EAAI,CAAC,EAAE,CAAE,EAC9HA,EAAI,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,YAKhF,KAAK,sBAAsBA,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAI,KAAK,sBAAsBA,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAE3H,IAAKE,EAAkB,MAAM,EAAID,EAAkB,IAAI,IAAMC,EAAkB,IAAI,EAAID,EAAkB,MAAM,GAAK,EAAG,CAErH,IAAI3Q,EAAI,KAAK,IAAI2Q,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,EAAI,KAAK,IAAI,KAAK,OAAO,KAAK,IAAID,EAAkB,IAAI,EAAGC,EAAkB,IAAI,CAAC,EAAI,KAAK,IAAID,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,GAAK,CAAC,CAAC,EAC/NnM,EAAI,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAA1Q,CAAK,EAC9EyE,EAAI,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAA1Q,CAAK,OAM1E2Q,EAAkB,MAAM,EAAIC,EAAkB,IAAI,GACpDnM,EAAI,CAAC,EAAI,CAAE,EAAGkM,EAAkB,MAAM,EAAI,KAAK,MAAMD,EAAc,CAAC,EAAE,MAAQ,CAAC,EAAG,EAAGC,EAAkB,MAAM,GAC7GlM,EAAI,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAGmM,EAAkB,MAAM,EAAI,KAAK,MAAMF,EAAc,CAAC,EAAE,OAAS,CAAC,GAC7FjM,EAAI,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAGjM,EAAI,CAAC,EAAE,KAI/EA,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,EAAGC,EAAkB,MAAM,EAAI,KAAK,MAAMD,EAAc,CAAC,EAAE,OAAS,CAAC,CAAE,EAC5IjM,EAAA,CAAC,EAAI,CAAE,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAI,KAAK,MAAMA,EAAc,CAAC,EAAE,MAAQ,CAAC,EAAG,EAAGjM,EAAI,CAAC,EAAE,CAAE,EAC9HA,EAAI,CAAC,EAAI,CAAE,EAAGA,EAAI,CAAC,EAAE,EAAG,EAAG,KAAK,sBAAsBiM,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,YAKhFC,EAAkB,MAAM,EAAIC,EAAkB,IAAI,EAAG,CACxD,IAAA1N,EAAS,KAAK,IAAIyN,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,EACtEC,EAAO,KAAK,IAAI,KAAK,sBAAsBH,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,KAAK,sBAAsBA,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,CAAC,EACpI3Q,EAAImD,EAAS,KAAK,OAAO2N,EAAO3N,GAAU,CAAC,EAE/CuB,EAAI,CAAC,EAAI,CAAE,EAAA1E,EAAM,EAAG4Q,EAAkB,MAAM,GAC5ClM,EAAI,CAAC,EAAI,CAAE,EAAA1E,EAAM,EAAG6Q,EAAkB,IAAI,OAGvC,CACC,IAAA1N,EAAS,KAAK,IAAIyN,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,EACtEC,EAAO,KAAK,IAAI,KAAK,sBAAsBH,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,EAAG,KAAK,sBAAsBA,EAAc,CAAC,EAAG,GAAG,EAAE,MAAM,CAAC,EACpI3Q,EAAImD,EAAS,KAAK,OAAO2N,EAAO3N,GAAU,CAAC,EAE/CuB,EAAI,CAAC,EAAI,CAAE,EAAA1E,EAAM,EAAG4Q,EAAkB,IAAI,GAC1ClM,EAAI,CAAC,EAAI,CAAE,EAAA1E,EAAM,EAAG6Q,EAAkB,MAAM,GAKhD,GAAInM,EAAI,OAAQ,CACd,MAAMqM,EAAU,CAAA,EAGhB,OAAKL,GAWHA,EAAY,IAAMhM,EACX,OAAA,OAAOqM,EAASL,CAAW,GAXlC,OAAO,OAAOK,EAAS,CACrB,IAAK,KAAK,UAAU,EACpB,KAAMJ,EAAc,CAAC,EAAE,IACvB,GAAIA,EAAc,CAAC,EAAE,IACrB,IAAAjM,EACA,KAAM8L,CAAA,CACP,EAQIO,OAIP,QAAQ,MAAM,2BAA2B,CAE7C,CAOA,WAAWP,EAAUE,EAAa,CAChC,MAAMM,EAAc,KAAK,eAAeR,EAAUE,CAAW,EAGzD,CAAC,aAAc,YAAY,EAAE,SAASF,CAAQ,GAAQ,KAAA,WAAW,QAAQQ,CAAW,CAC1F,CAEA,UAAUR,EAAUE,EAAa,CAC/B,MAAMM,EAAc,KAAK,eAAeR,EAAUE,CAAW,EAEtD,OAAA,OAAO,OAAOA,EAAaM,CAAW,CAC/C,CAGA,kBAAmB,CACb,IAAAL,EAAgB,CAAG,EAAA,OAAO,KAAK,aAAa,EAC9CC,EAAoB,KAAK,sBAAsBD,EAAc,CAAC,EAAG,GAAG,EACpEE,EAAoB,KAAK,sBAAsBF,EAAc,CAAC,EAAG,GAAG,EAGlE,GAAA,CAAC,YAAa,WAAW,EAAE,SAASA,EAAc,CAAC,EAAE,IAAI,EAC3D,KAAK,SAAS,CACZ,QAAS,kBACT,KAAM,QACN,UAAW,EAAA,CACZ,UAGM,CAAC,YAAa,WAAW,EAAE,SAASA,EAAc,CAAC,EAAE,IAAI,EAAG,CAE7D,MAAAM,EAAa,KAAK,WAAW,sBAAsB,EAEzD,KAAK,WAAW,UAAU,CACxB,WAAAA,CAAA,CACD,MAGE,CAGH,MAAMC,EAAMN,EAAkB,IAAI,EAAI,GAAKC,EAAkB,MAAM,EAC/D,CAAE,EAAGD,EAAkB,MAAM,EAAI,KAAK,MAAMD,EAAc,CAAC,EAAE,MAAQ,CAAC,EAAI,GAAI,EAAGC,EAAkB,IAAI,EAAI,KAAK,OAAOC,EAAkB,MAAM,EAAID,EAAkB,IAAI,GAAK,CAAC,EAAI,EAAA,EACnL,CAAE,EAAGC,EAAkB,MAAM,EAAI,KAAK,MAAMF,EAAc,CAAC,EAAE,MAAQ,CAAC,EAAI,GAAI,EAAG,KAAK,IAAIC,EAAkB,MAAM,EAAGC,EAAkB,MAAM,CAAC,EAAI,EAAG,EAEnJM,EAAkB,CACtB,IAAK,KAAK,UAAU,EACpB,EAAGD,EAAI,EACP,EAAGA,EAAI,EACP,MAAO,GACP,OAAQ,GACR,KAAM,YACN,QAASP,EAAc,CAAC,EAAE,GAAA,EAI5B,KAAK,cAAgB,CAACA,EAAc,CAAC,EAAGQ,CAAe,EACjD,MAAAC,EAAW,KAAK,WAAW,UAAU,EAG3C,KAAK,cAAgB,CAACD,EAAiBR,EAAc,CAAC,CAAC,EACjD,MAAAM,EAAa,KAAK,WAAW,sBAAsB,EAEzD,KAAK,WAAW,UAAU,CACxB,OAAQE,EACR,SAAAC,EACA,WAAAH,CAAA,CACD,EAED,KAAK,cAAgB,GAEzB,CAGA,eAAe9tB,EAAK,CACP,UAAAiZ,KAAQ,KAAK,MAAM,cACxB,GAAAA,EAAK,MAAQjZ,EACR,OAAAiZ,CAGb,CAGA,YAAYiV,EAAU,CAIpB,UAAWjV,KAAQiV,EAAU,CAC3B,MAAMtD,EAAW,KAAK,eAAe3R,EAAK,IAAI,EACxC4R,EAAS,KAAK,eAAe5R,EAAK,EAAE,EACtC2R,GAAYC,IAET,KAAA,cAAgB,CAACD,EAAUC,CAAM,EACjC,KAAA,WAAW5R,EAAK,KAAMA,CAAI,GAGnC,KAAK,cAAgB,GACrB,KAAK,OAAO,CACd,CAGA,WAAWiV,EAAU,CAInB,MAAMC,EAAc,CAAA,EACpB,UAAWlV,KAAQiV,EAAU,CAC3B,MAAMtD,EAAW,KAAK,eAAe3R,EAAK,IAAI,EACxC4R,EAAS,KAAK,eAAe5R,EAAK,EAAE,EACtC2R,GAAYC,IAET,KAAA,cAAgB,CAACD,EAAUC,CAAM,EACtCsD,EAAY,KAAK,KAAK,UAAUlV,EAAK,KAAMA,CAAI,CAAC,GAGpD,YAAK,cAAgB,GAEdkV,CACT,CAGA,WAAY,CAEF,MAAA,CAAK,IAAA,KAAU,GAAK,KAAK,MAAM,KAAK,SAAW,GAAM,CAC/D,CAGA,SAASxY,EAAK,CACZ,KAAK,WAAW,UAAY,KAAK,WAAW,SAASA,CAAG,CAC1D,CACF,CCjpEA,MAAMyY,GAAS,+EAEFb,EAAc,CACzB,cAAiB,CACf,CACE,IAAO,OAAQ,EAAG,IAAK,EAAG,IAAK,MAAS,IAAK,OAAU,IAAK,IAAK,UAAW,IAAK,MAAO,UAAW,UACnG,eAAgB,GAChB,gBAAiB,GACjB,WAAY,CACV,CACE,SAAU,QAAS,WAAY,GAAM,WAAY,GAAM,MAAO,CAC5D,CACE,IAAK,UACL,MAAO,UACP,KAAM,GACR,EACA,CACE,KAAM,IACN,IAAK,OACP,CACF,CACF,EACA,CAAE,SAAU,QAAS,WAAY,EAAK,EACtC,CACE,SAAU,OAAQ,WAAY,GAAM,SAAU,CAC5C,CACE,SAAU,SAAU,WAAY,GAAM,WAAY,GAAM,SAAU,CAChE,CACE,SAAU,WAAY,WAAY,GAAM,WAAY,GAAM,SAAU,CAClE,CAAE,SAAU,aAAc,WAAY,GAAM,WAAY,EAAK,CAC/D,EAAG,MAAO,CACR,CACE,KAAM,IACN,IAAK,OACP,CACF,CACF,CACF,CACF,EACA,CAAE,SAAU,SAAU,WAAY,GAAM,WAAY,EAAK,EACzD,CAAE,SAAU,SAAU,WAAY,GAAM,WAAY,EAAK,CAC3D,CACF,EACA,CACE,SAAU,QAAS,WAAY,GAAO,WAAY,GAAM,MAAO,CAC7D,CACE,IAAK,UACL,MAAO,UACP,KAAM,GACR,EACA,CACE,KAAM,GACR,CACF,CACF,EACA,CAAE,SAAU,QAAS,WAAY,EAAM,EACvC,CACE,SAAU,QAAS,WAAY,GAAO,MAAO,CAC3C,CACE,KAAM,IACN,IAAK,OACP,CACF,CACF,CACF,EACA,aAAc,CAEZ,SAAU,EAEV,OAAAa,EACF,CAGF,EACA,CACE,IAAO,OAAQ,EAAG,IAAK,EAAG,IAAK,MAAS,GAAI,OAAU,IAAK,IAAK,UAAW,UAAW,KACtF,WAAY,CACV,CAAE,SAAU,OAAQ,WAAY,GAAM,WAAY,EAAM,EACxD,CAAE,SAAU,OAAQ,WAAY,EAAK,EACrC,CAAE,SAAU,OAAQ,WAAY,EAAK,CACvC,EACA,aAAc,CACZ,SAAU,EACV,OAAAA,EACF,CACF,EACA,CACE,IAAO,OAAQ,EAAG,IAAK,EAAG,IAAK,MAAS,GAAI,OAAU,IAAK,IAAK,UAAW,UAAW,UACtF,WAAY,CACV,CAAE,SAAU,OAAQ,WAAY,GAAO,WAAY,EAAM,EACzD,CAAE,SAAU,OAAQ,WAAY,EAAM,CACxC,EACA,aAAc,CACZ,SAAU,EACV,OAAAA,EACF,CACF,EAEA,CAAE,IAAO,OAAQ,EAAG,IAAK,EAAG,IAAK,MAAS,GAAI,OAAU,GAAI,KAAQ,WAAY,EAGhF,CAAE,IAAO,OAAQ,EAAG,IAAK,EAAG,GAAI,MAAS,IAAK,OAAU,IAAK,UAAW,gBAAiB,KAAM,QAAS,EACxG,CACE,IAAO,OAAQ,EAAG,IAAK,EAAG,IAAK,MAAS,IAAK,OAAU,IAAK,UAAW,kBAAmB,KAAM,UAChG,WAAY,CACV,CAAE,MAAO,KAAM,QAAS,wBAAyB,EACjD,CAAE,MAAO,KAAM,QAAS,UAAW,EACnC,CAAE,MAAO,OAAQ,QAAS,OAAQ,EAClC,CAAE,MAAO,MAAO,QAAS,KAAM,CACjC,CACF,EAEA,CAAE,IAAO,OAAQ,EAAG,KAAM,EAAG,KAAM,MAAS,IAAK,OAAU,IAAK,UAAW,cAAe,KAAM,QAAS,EAEzG,CAAE,IAAO,OAAQ,EAAG,MAAO,EAAG,MAAO,MAAS,IAAK,OAAU,IAAK,UAAW,cAAe,KAAM,QAAS,CAC7G,EACA,cAAiB,CAEf,CAAE,IAAK,EAAG,KAAQ,OAAQ,GAAM,OAAQ,IAAO,CAAC,CAAE,EAAG,IAAK,EAAG,KAAO,CAAE,EAAG,IAAK,EAAG,GAAI,CAAC,EAAG,KAAM,aAAc,aAAc,EAAG,OAAQ,IAAK,EAI3I,CAAE,IAAK,EAAG,KAAQ,OAAQ,GAAM,OAAQ,IAAO,CAAC,CAAE,EAAG,IAAK,EAAG,GAAI,EAAG,CAAE,EAAG,IAAK,EAAG,KAAO,CAAE,EAAG,IAAK,EAAG,GAAO,EAAA,CAAE,EAAG,IAAK,EAAG,GAAI,CAAC,EAAG,KAAM,aAAc,aAAc,CAAE,EAGrK,CAAE,IAAK,EAAG,KAAQ,OAAQ,GAAM,OAAQ,IAAO,CAAC,CAAE,EAAG,IAAK,EAAG,GAAI,EAAG,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAM,WAAY,aAAc,CAAE,EAC3H,CAAE,IAAK,EAAG,KAAQ,OAAQ,GAAM,OAAQ,IAAO,CAAC,CAAE,EAAG,IAAK,EAAG,GAAI,EAAG,CAAE,EAAG,IAAK,EAAG,IAAK,EAAG,KAAM,aAAc,aAAc,CAAE,EAG7H,CAAE,IAAK,EAAG,KAAQ,OAAQ,GAAM,OAAQ,IAAO,CAAC,CAAE,EAAG,IAAK,EAAG,KAAO,CAAE,EAAG,IAAK,EAAG,GAAI,CAAC,EAAG,KAAM,QAAS,aAAc,EAAG,OAAQ,IAAK,CAExI,EACA,cAAiB,CAEjB,EACA,cAAiB,CACf,CACE,IAAK,qBACL,EAAG,IAAK,EAAG,IACX,KAAM,WACN,KAAM,OACN,MAAO,SACT,CACF,CACF,ECzEa1G,GAAY,CACvB,CACE,CACE,KAAM,GACN,MAAO,OACP,MAAO,IACT,EACA,CACE,KAAM,GACN,MAAO,cACP,MAAO,MACT,EACA,CACE,KAAM,GACN,MAAO,QACP,MAAO,IACT,CACF,EACA,CACE,CACE,KAAM,GACN,MAAO,OACP,MAAO,IACT,CACF,EACA,CACE,CACE,KAAM,GACN,MAAO,SACP,MAAO,SACP,SAAU,CACR,CACE,KAAM,GACN,MAAO,UACP,MAAO,MACT,EACA,CACE,KAAM,GACN,MAAO,YACP,MAAO,MACT,EACA,CACE,KAAM,GACN,MAAO,UACP,MAAO,MACT,CACF,CACF,CACF,EACA,CACE,CACE,KAAM,GACN,MAAO,YACP,MAAO,OACT,EACA,CACE,KAAM,GACN,MAAO,cACP,MAAO,MACT,CACF,EACA,CACE,CACE,KAAM,GACN,MAAO,QACP,MAAO,OACP,SAAU,CACR,CACE,KAAM,GACN,MAAO,QACP,MAAO,IACT,EACA,CACE,KAAM,GACN,MAAO,OACP,MAAO,IACT,EACA,CACE,KAAM,GACN,MAAO,SACP,MAAO,IACT,EACA,CACE,KAAM,GACN,MAAO,SACP,MAAO,IACT,CACF,CACF,CACF,EACA,CACE,KAAM,GACN,MAAO,SACP,MAAO,IACT,CACF,ECtKe2G,EAAA,GAAA,IAAA,IAAA,2BAAA,YAAA,GAAA,EAAA,2eC4HX,IAAAC,EACE,MAAA9E,MAAc,IACdE,MAAc,IACdE,MAAc,IACd2E,MAAc,IAEdC,EAAQpU,GAAS,CACrB,MAAO,IACP,IAAK,GACL,IAAK,GACL,MAAO,GACP,KAAM,CAAA,CACP,EAEKqU,EAAW,IAAM,CACrB,QAAS/W,EAAI,EAAGA,EAAI4P,EAAK,cAAc,OAAQ5P,IAAK,CAC5C,MAAA6K,EAAK+E,EAAK,cAAc5P,CAAC,EACvB8R,EAAA,IAAIjH,EAAG,IAAKA,CAAE,EAExB,QAAS7K,EAAI,EAAGA,EAAI4P,EAAK,cAAc,OAAQ5P,IAAK,CAC5C,MAAA6K,EAAK+E,EAAK,cAAc5P,CAAC,EACvBgS,EAAA,IAAInH,EAAG,IAAKA,CAAE,EAExB,QAAS7K,EAAI,EAAGA,EAAI4P,EAAK,cAAc,OAAQ5P,IAAK,CAC5C,MAAA6K,EAAK+E,EAAK,cAAc5P,CAAC,EACvBkS,EAAA,IAAIrH,EAAG,IAAKA,CAAE,EAExB,QAAS7K,EAAI,EAAGA,EAAI4P,EAAK,cAAc,OAAQ5P,IAAK,CAC5C,MAAA6K,EAAK+E,EAAK,cAAc5P,CAAC,EACvB6W,EAAA,IAAIhM,EAAG,IAAKA,CAAE,EACxB,EAGImM,EAAa,IAAM,CAEvBJ,EAAQ,IAAIK,GAAM,CAChB,GAAI,SAAS,eAAe,QAAQ,EACpC,WAAY,sSACZ,SAAUH,EAAM,KAChB,WAAY,CACV,QAAS,SAAUI,EAAK,CAChB,MAAAC,EAAM,OAAO,QAAQ,EACtBA,IACLD,EAAI,UAAYC,EACXvH,EAAA,cAAc,KAAKsH,CAAG,EAC7B,EACA,QAAS,SAAU5uB,EAAK,CACtB,QAAQ,IAAIA,CAAG,CACjB,EACA,QAAS,SAAU4uB,EAAK,CACtB,QAAQ,IAAI,MAAM,EAClBA,EAAI,aAAe,EACdtH,EAAA,cAAc,KAAKsH,CAAG,CAC7B,EACA,QAAS,SAAU5uB,EAAK,CACtB,QAAQ,IAAIA,CAAG,CACjB,EACA,UAAW,SAAU4uB,EAAK,CACxBA,EAAI,QAAUtH,EAAK,cAAc,KAAKsH,EAAI,MAAM,EAChDA,EAAI,UAAYtH,EAAK,cAAc,KAAKsH,EAAI,QAAQ,EAC/CtH,EAAA,cAAc,KAAKsH,EAAI,UAAU,CACxC,EACA,UAAW,SAAU5uB,EAAK,CACxB,QAAQ,IAAIA,CAAG,CACjB,EACA,QAAS,SAAU4uB,EAAK,CACjBtH,EAAA,cAAc,KAAKsH,CAAG,EACnBL,EAAA,IAAIK,EAAI,IAAKA,CAAG,CAC1B,EACA,QAAS,SAAU5uB,EAAK,CACtB,QAAQ,IAAIA,CAAG,CACjB,EACA,QAAS,SAAU4uB,EAAK,CAChB,MAAAC,EAAM,OAAO,UAAU,EACxBA,IACLD,EAAI,KAAOC,EACNvH,EAAA,cAAc,KAAKsH,CAAG,EAC7B,EACA,QAAS,SAAU5uB,EAAK,CACtB,QAAQ,IAAIA,CAAG,CACjB,EACA,SAAU,SAAU2V,EAAK,CACf,QAAA,IAAIA,EAAI,OAAO,CACzB,EACA,WAAWmZ,EAAKC,EAAK,CACX,eAAA,IAAID,EAAKC,CAAG,EACb,EACT,EACA,YAAYzF,EAAO,CACZhC,EAAA,cAAc,KAAK,GAAGgC,CAAK,CAClC,EACA,kBAAkB0F,EAAI/uB,EAAO,CAG3B,OAFQ,QAAA,IAAI,UAAW+uB,EAAI/uB,CAAK,EAExBA,EAAO,CACb,IAAK,SACG,MAAA4uB,EAAM,OAAO,UAAU,EAC7B,GAAI,CAACA,EAAK,OACVP,EAAM,UAAUO,CAAG,EACnB,KAIJ,CACF,CACF,EACA,aAAcruB,EAAM,aACpB,aAAcA,EAAM,aACpB,aAAcA,EAAM,aACpB,UAAAknB,EAAA,CACD,EACD4G,EAAM,OAAOhH,CAAI,EACXgH,EAAA,GAAG,YAAc3H,GAAS,CAC9B,MAAMpE,EAAKiH,EAAQ,IAAI7C,EAAK,EAAE,EAC9BpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,MAAQoE,EAAK,MAChBpE,EAAG,OAASoE,EAAK,MAAA,CAClB,EACK2H,EAAA,GAAG,cAAgB3H,GAAS,CAChC,MAAMpE,EAAKiH,EAAQ,IAAI7C,EAAK,EAAE,EAC9BpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,MAAQoE,EAAK,MAChBpE,EAAG,OAASoE,EAAK,MAAA,CAClB,EACK2H,EAAA,GAAG,YAAclJ,GAAS,CAC9B,MAAM7C,EAAKmH,EAAQ,IAAItE,EAAK,EAAE,EAC9B7C,EAAG,IAAM6C,EAAK,GAAA,CACf,EACKkJ,EAAA,GAAG,YAAczE,GAAS,CAC9B,MAAMtH,EAAKqH,EAAQ,IAAIC,EAAK,EAAE,EAC9BtH,EAAG,EAAIsH,EAAK,EACZtH,EAAG,EAAIsH,EAAK,CAAA,CACb,EACKyE,EAAA,GAAG,YAAc3H,GAAS,CAC9B,MAAMpE,EAAKgM,EAAQ,IAAI5H,EAAK,EAAE,EAC9BpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,MAAQoE,EAAK,MAChBpE,EAAG,OAASoE,EAAK,MAAA,CAClB,EACK2H,EAAA,GAAG,cAAgB3H,GAAS,CAChC,MAAMpE,EAAKgM,EAAQ,IAAI5H,EAAK,EAAE,EAC9BpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,EAAIoE,EAAK,EACZpE,EAAG,MAAQoE,EAAK,MAChBpE,EAAG,OAASoE,EAAK,MAAA,CAClB,CAAA,EAKGsI,EAAe,IAAM,CACzBX,EAAM,QAAQ,CAAA,EAMVY,EAAqBC,GAAe,CACpCX,EAAM,MAAQ,KAAIA,EAAM,OAASW,GAC/Bb,EAAA,KAAKE,EAAM,KAAK,CAAA,EAGlBY,EAAU,IAAM,CACpBd,EAAM,QAAQ,CACZ,IAAKA,EAAM,UAAU,EACrB,WAAY,CAAC,CAAA,CACd,CAAA,EAGGe,EAAWhC,GAAa,CAC5BiB,EAAM,QAAQjB,CAAQ,CAAA,EAGlBiC,EAAU,IAAM,CACpBhB,EAAM,QAAQ,CAAA,EAGViB,EAAU,IAAM,CACpBjB,EAAM,QAAQ,CAAA,EAGVkB,EAAc,CAACvvB,EAAOwvB,IAAO,CAC3BnB,EAAA,YAAYruB,EAAOwvB,CAAE,CAAA,EAGvBC,EAAc,IAAM,CACxBlB,EAAM,KAAOA,EAAM,OAAS,EAAI,EAAI,EAC9BF,EAAA,YAAYE,EAAM,IAAI,CAAA,EAGxBmB,EAAO,IAAM,CACjBrB,EAAM,KAAK,CAAA,EAGPsB,EAAc,IAAM,CACxB,MAAMC,EAAO,CACX,CAAE,KAAQ,EAAG,GAAM,EAAG,IAAO,CAAC,CAAE,EAAG,IAAK,EAAG,GAAO,EAAA,CAAE,EAAG,IAAK,EAAG,GAAA,CAAK,EAAG,KAAM,aAAc,aAAc,CAAE,CAAA,EAE7GvB,EAAM,YAAYuB,CAAI,CAAA,EAGxB,OAAAjf,GAAU,IAAM,CACL6d,IACEC,GAAA,CACZ,EACDoB,GAAgBb,CAAY","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52]}