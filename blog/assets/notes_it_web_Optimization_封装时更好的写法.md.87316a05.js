import{_ as s,c as n,o as a,V as l}from"./chunks/framework.c277a2d0.js";const A=JSON.parse('{"title":"å°è£…æ—¶æ›´å¥½çš„å†™æ³•","description":"","frontmatter":{},"headers":[],"relativePath":"notes/it/web/Optimization/å°è£…æ—¶æ›´å¥½çš„å†™æ³•.md","filePath":"notes/it/web/Optimization/å°è£…æ—¶æ›´å¥½çš„å†™æ³•.md","lastUpdated":1693103007000}'),p={name:"notes/it/web/Optimization/å°è£…æ—¶æ›´å¥½çš„å†™æ³•.md"},o=l(`<h1 id="å°è£…æ—¶æ›´å¥½çš„å†™æ³•" tabindex="-1">å°è£…æ—¶æ›´å¥½çš„å†™æ³• <a class="header-anchor" href="#å°è£…æ—¶æ›´å¥½çš„å†™æ³•" aria-label="Permalink to &quot;å°è£…æ—¶æ›´å¥½çš„å†™æ³•&quot;">â€‹</a></h1><p>ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªç±»ï¼Œæä¾›äº†äº‹ä»¶å¯¹è±¡çš„å®ç°ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EventCenter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">on</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">handler</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">once</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">handler</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">once</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ ‡å¿—åªè§¦å‘ä¸€æ¬¡</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">eventName</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handler</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">emit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// è§¦å‘handlerå‡½æ•°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœæ˜¯ä¸€æ¬¡æ€§å‡½æ•° -&gt; å¸è½½</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">handler</span><span style="color:#89DDFF;">?.</span><span style="color:#A6ACCD;">once</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">off</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">eventName</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">handler</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">off</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">?,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">handler</span><span style="color:#89DDFF;">?)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>å…¶ä¸­ <code>once</code> å‡½æ•°æä¾›äº†åœ¨è°ƒç”¨ä¸€æ¬¡åå³åˆ»é”€æ¯çš„äº‹ä»¶æŒ‚è½½æ–¹å¼ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æ›´å¥½çš„å®ç°ï¼Œä¼˜åŒ–åçš„ä»£ç ï¼š</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EventCenter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">on</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">handler</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">once</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">handler</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wrappedHandler</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">off</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">eventName</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wrappedHandler</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">wrappedHandler</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">once</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">on</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">eventName</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">wrappedHandler</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">emit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Event</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">handler</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">off</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">eventName</span><span style="color:#89DDFF;">?,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">handler</span><span style="color:#89DDFF;">?)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">æç¤º</p><p>ä¹‹æ‰€ä»¥è¿™æ ·ä¿®æ”¹ï¼Œåœ¨ç»™å‡½æ•°å¯¹è±¡æŒ‚è½½å±æ€§æ—¶ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæœ€å¥½ <strong>é¿å…ä¿®æ”¹å‡½æ•°è‡ªèº«çš„å±æ€§</strong> ã€‚è¿™æ˜¯å› ä¸º <strong>å‡½æ•°åº”è¯¥ä¸“æ³¨äºæ‰§è¡Œç‰¹å®šçš„åŠŸèƒ½ï¼Œè€Œä¸åº”è¯¥è¢«ç”¨äºå­˜å‚¨çŠ¶æ€æˆ–é™„åŠ å…¶ä»–è¡Œä¸º</strong>ã€‚</p></div><p>åœ¨ä¿®æ”¹å‰çš„ä»£ç ä¸­ç»™ <code>handler</code> å‡½æ•°æ·»åŠ äº†ä¸€ä¸ª <code>once</code> å±æ€§æ¥è¡¨ç¤ºæ‰§è¡Œä¸€æ¬¡åè‡ªåŠ¨é”€æ¯ã€‚å°½ç®¡è¿™æ ·çš„åšæ³•å¯ä»¥å®ç°ä¸€æ¬¡æ€§çš„äº‹ä»¶è®¢é˜…ï¼Œä½†<strong>ä¼šç ´åå‡½æ•°çš„å•ä¸€èŒè´£åŸåˆ™å¹¶å¢åŠ å¤æ‚æ€§</strong>ã€‚</p><div class="warning custom-block"><p class="custom-block-title">å¦‚ä½•ç†è§£è¿™é‡Œçš„å‡½æ•°çš„å•ä¸€èŒè´£åŸåˆ™ï¼Ÿ</p><p>åœ¨ä¿®æ”¹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†å®ç° <code>once</code> è¿™ä¸€åŠŸèƒ½ï¼Œéœ€è¦ <code>once</code> åŠ <code>emit</code> å‡½æ•°å…±åŒå‘æŒ¥ä½œç”¨ã€‚ä½¿ <code>emit</code> å‡½æ•°ä¸å†çº¯ç²¹ï¼ˆæºæ‚äº† <code>once</code> æ‰€éœ€è¦çš„ <code>off</code> è°ƒç”¨ï¼‰ï¼Œè¿™æ˜¾ç„¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ã€‚</p><p>åœ¨ä¿®æ”¹åçš„ä»£ç é‡Œï¼Œ <code>once</code> åŠŸèƒ½å®Œå…¨ç”± <code>once</code> å‡½æ•°å®ŒæˆğŸ‰ã€‚</p></div><p>æ¨èçš„æ›´å¥½å†™æ³•æ˜¯ä½¿ç”¨é—­åŒ…æ¥ç®¡ç†çŠ¶æ€ï¼Œä»¥å®ç°ä¸€æ¬¡æ€§çš„äº‹ä»¶è®¢é˜…ã€‚å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªæ ‡å¿—ä½æ¥æ§åˆ¶å›è°ƒå‡½æ•°çš„æ‰§è¡Œæ¬¡æ•°ã€‚</p><p>åœ¨ä¿®æ”¹åçš„ä»£ç ä¸­ï¼Œ<code>once</code> æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…è£…å‡½æ•° <code>wrappedHandler</code> æ¥å¤„ç†äº‹ä»¶å›è°ƒã€‚è¿™ä¸ªåŒ…è£…å‡½æ•°ä¼šåœ¨æ‰§è¡Œåè‡ªåŠ¨è§£ç»‘äº‹ä»¶ã€‚é€šè¿‡ä½¿ç”¨é—­åŒ…å’Œé¢å¤–çš„æ ‡å¿—ä½ï¼Œæˆ‘ä»¬é¿å…äº†ç›´æ¥ä¿®æ”¹åŸå§‹å‡½æ•°çš„å±æ€§ï¼Œä½¿ä»£ç æ›´æ¸…æ™°ã€æ˜“äºç†è§£ï¼Œå¹¶ä¸”ä¿æŒäº†å‡½æ•°çš„å•ä¸€èŒè´£ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œä½¿ç”¨é—­åŒ…æ¥ç®¡ç†çŠ¶æ€å’Œé™„åŠ è¡Œä¸ºä¼šæ¯”ç›´æ¥åœ¨å‡½æ•°ä¸ŠæŒ‚è½½å±æ€§æ›´å¥½ï¼Œå› ä¸ºå®ƒéµå¾ªäº†è‰¯å¥½çš„è®¾è®¡åŸåˆ™ï¼Œå¹¶æä¾›äº†æ›´å¯æ§å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚</p>`,12),e=[o];function c(t,r,y,F,D,i){return a(),n("div",null,e)}const b=s(p,[["render",c]]);export{A as __pageData,b as default};
